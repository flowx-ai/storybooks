import{R as A,r as k}from"./index-B-o1Wr-g.js";import{j as S}from"./jsx-runtime-j_jdvEMj.js";import{S as nt}from"./index-DggQIU-7.js";import{c as le}from"./clsx-B-dksMZM.js";import{M as Pt}from"./Icon-C3PZoQlD.js";import{P as Bt}from"./Portal-Kk8hBqhk.js";var ge=e=>e.type==="checkbox",ie=e=>e instanceof Date,P=e=>e==null;const ot=e=>typeof e=="object";var M=e=>!P(e)&&!Array.isArray(e)&&ot(e)&&!ie(e),at=e=>M(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,$t=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ut=(e,r)=>e.has($t(r)),Ht=e=>{const r=e.constructor&&e.constructor.prototype;return M(r)&&r.hasOwnProperty("isPrototypeOf")},Re=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let r;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)r=new Date(e);else if(e instanceof Set)r=new Set(e);else if(!(Re&&(e instanceof Blob||i))&&(t||M(e)))if(r=t?[]:{},!t&&!Ht(e))r=e;else for(const n in e)e.hasOwnProperty(n)&&(r[n]=B(e[n]));else return e;return r}var we=e=>Array.isArray(e)?e.filter(Boolean):[],C=e=>e===void 0,c=(e,r,t)=>{if(!r||!M(e))return t;const i=we(r.split(/[,[\].]+?/)).reduce((n,o)=>P(n)?n:n[o],e);return C(i)||i===e?C(e[r])?t:e[r]:i},Y=e=>typeof e=="boolean",Ne=e=>/^\w*$/.test(e),dt=e=>we(e.replace(/["|']|\]/g,"").split(/\.|\[/)),D=(e,r,t)=>{let i=-1;const n=Ne(r)?[r]:dt(r),o=n.length,d=o-1;for(;++i<o;){const y=n[i];let v=t;if(i!==d){const b=e[y];v=M(b)||Array.isArray(b)?b:isNaN(+n[i+1])?{}:[]}if(y==="__proto__"||y==="constructor"||y==="prototype")return;e[y]=v,e=e[y]}return e};const be={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ft=A.createContext(null),Oe=()=>A.useContext(ft),Wt=e=>{const{children:r,...t}=e;return A.createElement(ft.Provider,{value:t},r)};var ct=(e,r,t,i=!0)=>{const n={defaultValues:r._defaultValues};for(const o in e)Object.defineProperty(n,o,{get:()=>{const d=o;return r._proxyFormState[d]!==X.all&&(r._proxyFormState[d]=!i||X.all),t&&(t[d]=!0),e[d]}});return n},$=e=>M(e)&&!Object.keys(e).length,yt=(e,r,t,i)=>{t(e);const{name:n,...o}=e;return $(o)||Object.keys(o).length>=Object.keys(r).length||Object.keys(o).find(d=>r[d]===(!i||X.all))},me=e=>Array.isArray(e)?e:[e],mt=(e,r,t)=>!e||!r||e===r||me(e).some(i=>i&&(t?i===r:i.startsWith(r)||r.startsWith(i)));function Ue(e){const r=A.useRef(e);r.current=e,A.useEffect(()=>{const t=!e.disabled&&r.current.subject&&r.current.subject.subscribe({next:r.current.next});return()=>{t&&t.unsubscribe()}},[e.disabled])}function qt(e){const r=Oe(),{control:t=r.control,disabled:i,name:n,exact:o}=e||{},[d,y]=A.useState(t._formState),v=A.useRef(!0),b=A.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),F=A.useRef(n);return F.current=n,Ue({disabled:i,next:h=>v.current&&mt(F.current,h.name,o)&&yt(h,b.current,t._updateFormState)&&y({...t._formState,...h}),subject:t._subjects.state}),A.useEffect(()=>(v.current=!0,b.current.isValid&&t._updateValid(!0),()=>{v.current=!1}),[t]),A.useMemo(()=>ct(d,t,b.current,!1),[d,t])}var G=e=>typeof e=="string",ht=(e,r,t,i,n)=>G(e)?(i&&r.watch.add(e),c(t,e,n)):Array.isArray(e)?e.map(o=>(i&&r.watch.add(o),c(t,o))):(i&&(r.watchAll=!0),t);function Yt(e){const r=Oe(),{control:t=r.control,name:i,defaultValue:n,disabled:o,exact:d}=e||{},y=A.useRef(i);y.current=i,Ue({disabled:o,subject:t._subjects.values,next:F=>{mt(y.current,F.name,d)&&b(B(ht(y.current,t._names,F.values||t._formValues,!1,n)))}});const[v,b]=A.useState(t._getWatch(i,n));return A.useEffect(()=>t._removeUnmounted()),v}function zt(e){const r=Oe(),{name:t,disabled:i,control:n=r.control,shouldUnregister:o}=e,d=ut(n._names.array,t),y=Yt({control:n,name:t,defaultValue:c(n._formValues,t,c(n._defaultValues,t,e.defaultValue)),exact:!0}),v=qt({control:n,name:t,exact:!0}),b=A.useRef(n.register(t,{...e.rules,value:y,...Y(e.disabled)?{disabled:e.disabled}:{}})),F=A.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!c(v.errors,t)},isDirty:{enumerable:!0,get:()=>!!c(v.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!c(v.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!c(v.validatingFields,t)},error:{enumerable:!0,get:()=>c(v.errors,t)}}),[v,t]),h=A.useMemo(()=>({name:t,value:y,...Y(i)||v.disabled?{disabled:v.disabled||i}:{},onChange:p=>b.current.onChange({target:{value:at(p),name:t},type:be.CHANGE}),onBlur:()=>b.current.onBlur({target:{value:c(n._formValues,t),name:t},type:be.BLUR}),ref:p=>{const E=c(n._fields,t);E&&p&&(E._f.ref={focus:()=>p.focus(),select:()=>p.select(),setCustomValidity:T=>p.setCustomValidity(T),reportValidity:()=>p.reportValidity()})}}),[t,n._formValues,i,v.disabled,y,n._fields]);return A.useEffect(()=>{const p=n._options.shouldUnregister||o,E=(T,N)=>{const H=c(n._fields,T);H&&H._f&&(H._f.mount=N)};if(E(t,!0),p){const T=B(c(n._options.defaultValues,t));D(n._defaultValues,t,T),C(c(n._formValues,t))&&D(n._formValues,t,T)}return!d&&n.register(t),()=>{(d?p&&!n._state.action:p)?n.unregister(t):E(t,!1)}},[t,n,d,o]),A.useEffect(()=>{n._updateDisabledField({disabled:i,fields:n._fields,name:t})},[i,t,n]),A.useMemo(()=>({field:h,formState:v,fieldState:F}),[h,v,F])}const Fr=e=>e.render(zt(e));var Xt=(e,r,t,i,n)=>r?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},Je=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched}),Qe=(e,r,t)=>!t&&(r.watchAll||r.watch.has(e)||[...r.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const he=(e,r,t,i)=>{for(const n of t||Object.keys(e)){const o=c(e,n);if(o){const{_f:d,...y}=o;if(d){if(d.refs&&d.refs[0]&&r(d.refs[0],n)&&!i)return!0;if(d.ref&&r(d.ref,d.name)&&!i)return!0;if(he(y,r))break}else if(M(y)&&he(y,r))break}}};var Kt=(e,r,t)=>{const i=me(c(e,t));return D(i,"root",r[t]),D(e,t,i),e},je=e=>e.type==="file",K=e=>typeof e=="function",_e=e=>{if(!Re)return!1;const r=e?e.ownerDocument:0;return e instanceof(r&&r.defaultView?r.defaultView.HTMLElement:HTMLElement)},xe=e=>G(e),Pe=e=>e.type==="radio",pe=e=>e instanceof RegExp;const Ze={value:!1,isValid:!1},et={value:!0,isValid:!0};var gt=e=>{if(Array.isArray(e)){if(e.length>1){const r=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:r,isValid:!!r.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!C(e[0].attributes.value)?C(e[0].value)||e[0].value===""?et:{value:e[0].value,isValid:!0}:et:Ze}return Ze};const tt={isValid:!1,value:null};var vt=e=>Array.isArray(e)?e.reduce((r,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:r,tt):tt;function rt(e,r,t="validate"){if(xe(e)||Array.isArray(e)&&e.every(xe)||Y(e)&&!e)return{type:t,message:xe(e)?e:"",ref:r}}var ae=e=>M(e)&&!pe(e)?e:{value:e,message:""},st=async(e,r,t,i,n,o)=>{const{ref:d,refs:y,required:v,maxLength:b,minLength:F,min:h,max:p,pattern:E,validate:T,name:N,valueAsNumber:H,mount:ee}=e._f,V=c(t,N);if(!ee||r.has(N))return{};const J=y?y[0]:d,Q=_=>{n&&J.reportValidity&&(J.setCustomValidity(Y(_)?"":_||""),J.reportValidity())},I={},ne=Pe(d),ve=ge(d),se=ne||ve,oe=(H||je(d))&&C(d.value)&&C(V)||_e(d)&&d.value===""||V===""||Array.isArray(V)&&!V.length,W=Xt.bind(null,N,i,I),Fe=(_,w,L,j=Z.maxLength,z=Z.minLength)=>{const q=_?w:L;I[N]={type:_?j:z,message:q,ref:d,...W(_?j:z,q)}};if(o?!Array.isArray(V)||!V.length:v&&(!se&&(oe||P(V))||Y(V)&&!V||ve&&!gt(y).isValid||ne&&!vt(y).isValid)){const{value:_,message:w}=xe(v)?{value:!!v,message:v}:ae(v);if(_&&(I[N]={type:Z.required,message:w,ref:J,...W(Z.required,w)},!i))return Q(w),I}if(!oe&&(!P(h)||!P(p))){let _,w;const L=ae(p),j=ae(h);if(!P(V)&&!isNaN(V)){const z=d.valueAsNumber||V&&+V;P(L.value)||(_=z>L.value),P(j.value)||(w=z<j.value)}else{const z=d.valueAsDate||new Date(V),q=fe=>new Date(new Date().toDateString()+" "+fe),ue=d.type=="time",de=d.type=="week";G(L.value)&&V&&(_=ue?q(V)>q(L.value):de?V>L.value:z>new Date(L.value)),G(j.value)&&V&&(w=ue?q(V)<q(j.value):de?V<j.value:z<new Date(j.value))}if((_||w)&&(Fe(!!_,L.message,j.message,Z.max,Z.min),!i))return Q(I[N].message),I}if((b||F)&&!oe&&(G(V)||o&&Array.isArray(V))){const _=ae(b),w=ae(F),L=!P(_.value)&&V.length>+_.value,j=!P(w.value)&&V.length<+w.value;if((L||j)&&(Fe(L,_.message,w.message),!i))return Q(I[N].message),I}if(E&&!oe&&G(V)){const{value:_,message:w}=ae(E);if(pe(_)&&!V.match(_)&&(I[N]={type:Z.pattern,message:w,ref:d,...W(Z.pattern,w)},!i))return Q(w),I}if(T){if(K(T)){const _=await T(V,t),w=rt(_,J);if(w&&(I[N]={...w,...W(Z.validate,w.message)},!i))return Q(w.message),I}else if(M(T)){let _={};for(const w in T){if(!$(_)&&!i)break;const L=rt(await T[w](V,t),J,w);L&&(_={...L,...W(w,L.message)},Q(L.message),i&&(I[N]=_))}if(!$(_)&&(I[N]={ref:J,..._},!i))return I}}return Q(!0),I};function Gt(e,r){const t=r.slice(0,-1).length;let i=0;for(;i<t;)e=C(e)?i++:e[r[i++]];return e}function Jt(e){for(const r in e)if(e.hasOwnProperty(r)&&!C(e[r]))return!1;return!0}function R(e,r){const t=Array.isArray(r)?r:Ne(r)?[r]:dt(r),i=t.length===1?e:Gt(e,t),n=t.length-1,o=t[n];return i&&delete i[o],n!==0&&(M(i)&&$(i)||Array.isArray(i)&&Jt(i))&&R(e,t.slice(0,-1)),e}var Me=()=>{let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next&&o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}},Le=e=>P(e)||!ot(e);function re(e,r){if(Le(e)||Le(r))return e===r;if(ie(e)&&ie(r))return e.getTime()===r.getTime();const t=Object.keys(e),i=Object.keys(r);if(t.length!==i.length)return!1;for(const n of t){const o=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const d=r[n];if(ie(o)&&ie(d)||M(o)&&M(d)||Array.isArray(o)&&Array.isArray(d)?!re(o,d):o!==d)return!1}}return!0}var Ft=e=>e.type==="select-multiple",Qt=e=>Pe(e)||ge(e),Te=e=>_e(e)&&e.isConnected,xt=e=>{for(const r in e)if(K(e[r]))return!0;return!1};function Ve(e,r={}){const t=Array.isArray(e);if(M(e)||t)for(const i in e)Array.isArray(e[i])||M(e[i])&&!xt(e[i])?(r[i]=Array.isArray(e[i])?[]:{},Ve(e[i],r[i])):P(e[i])||(r[i]=!0);return r}function bt(e,r,t){const i=Array.isArray(e);if(M(e)||i)for(const n in e)Array.isArray(e[n])||M(e[n])&&!xt(e[n])?C(r)||Le(t[n])?t[n]=Array.isArray(e[n])?Ve(e[n],[]):{...Ve(e[n])}:bt(e[n],P(r)?{}:r[n],t[n]):t[n]=!re(e[n],r[n]);return t}var ce=(e,r)=>bt(e,r,Ve(r)),_t=(e,{valueAsNumber:r,valueAsDate:t,setValueAs:i})=>C(e)?e:r?e===""?NaN:e&&+e:t&&G(e)?new Date(e):i?i(e):e;function Ie(e){const r=e.ref;return je(r)?r.files:Pe(r)?vt(e.refs).value:Ft(r)?[...r.selectedOptions].map(({value:t})=>t):ge(r)?gt(e.refs).value:_t(C(r.value)?e.ref.value:r.value,e)}var Zt=(e,r,t,i)=>{const n={};for(const o of e){const d=c(r,o);d&&D(n,o,d._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},ye=e=>C(e)?e:pe(e)?e.source:M(e)?pe(e.value)?e.value.source:e.value:e;const it="AsyncFunction";var er=e=>!!e&&!!e.validate&&!!(K(e.validate)&&e.validate.constructor.name===it||M(e.validate)&&Object.values(e.validate).find(r=>r.constructor.name===it)),tr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function lt(e,r,t){const i=c(e,t);if(i||Ne(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const o=n.join("."),d=c(r,o),y=c(e,o);if(d&&!Array.isArray(d)&&t!==o)return{name:t};if(y&&y.type)return{name:o,error:y};n.pop()}return{name:t}}var rr=(e,r,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(r||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,sr=(e,r)=>!we(c(e,r)).length&&R(e,r);const ir={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function lr(e={}){let r={...ir,...e},t={submitCount:0,isDirty:!1,isLoading:K(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},i={},n=M(r.defaultValues)||M(r.values)?B(r.defaultValues||r.values)||{}:{},o=r.shouldUnregister?{}:B(n),d={action:!1,mount:!1,watch:!1},y={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},v,b=0;const F={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:Me(),array:Me(),state:Me()},p=Je(r.mode),E=Je(r.reValidateMode),T=r.criteriaMode===X.all,N=s=>l=>{clearTimeout(b),b=setTimeout(s,l)},H=async s=>{if(!r.disabled&&(F.isValid||s)){const l=r.resolver?$((await se()).errors):await W(i,!0);l!==t.isValid&&h.state.next({isValid:l})}},ee=(s,l)=>{!r.disabled&&(F.isValidating||F.validatingFields)&&((s||Array.from(y.mount)).forEach(a=>{a&&(l?D(t.validatingFields,a,l):R(t.validatingFields,a))}),h.state.next({validatingFields:t.validatingFields,isValidating:!$(t.validatingFields)}))},V=(s,l=[],a,m,f=!0,u=!0)=>{if(m&&a&&!r.disabled){if(d.action=!0,u&&Array.isArray(c(i,s))){const g=a(c(i,s),m.argA,m.argB);f&&D(i,s,g)}if(u&&Array.isArray(c(t.errors,s))){const g=a(c(t.errors,s),m.argA,m.argB);f&&D(t.errors,s,g),sr(t.errors,s)}if(F.touchedFields&&u&&Array.isArray(c(t.touchedFields,s))){const g=a(c(t.touchedFields,s),m.argA,m.argB);f&&D(t.touchedFields,s,g)}F.dirtyFields&&(t.dirtyFields=ce(n,o)),h.state.next({name:s,isDirty:_(s,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(o,s,l)},J=(s,l)=>{D(t.errors,s,l),h.state.next({errors:t.errors})},Q=s=>{t.errors=s,h.state.next({errors:t.errors,isValid:!1})},I=(s,l,a,m)=>{const f=c(i,s);if(f){const u=c(o,s,C(a)?c(n,s):a);C(u)||m&&m.defaultChecked||l?D(o,s,l?u:Ie(f._f)):j(s,u),d.mount&&H()}},ne=(s,l,a,m,f)=>{let u=!1,g=!1;const x={name:s};if(!r.disabled){const O=!!(c(i,s)&&c(i,s)._f&&c(i,s)._f.disabled);if(!a||m){F.isDirty&&(g=t.isDirty,t.isDirty=x.isDirty=_(),u=g!==x.isDirty);const U=O||re(c(n,s),l);g=!!(!O&&c(t.dirtyFields,s)),U||O?R(t.dirtyFields,s):D(t.dirtyFields,s,!0),x.dirtyFields=t.dirtyFields,u=u||F.dirtyFields&&g!==!U}if(a){const U=c(t.touchedFields,s);U||(D(t.touchedFields,s,a),x.touchedFields=t.touchedFields,u=u||F.touchedFields&&U!==a)}u&&f&&h.state.next(x)}return u?x:{}},ve=(s,l,a,m)=>{const f=c(t.errors,s),u=F.isValid&&Y(l)&&t.isValid!==l;if(r.delayError&&a?(v=N(()=>J(s,a)),v(r.delayError)):(clearTimeout(b),v=null,a?D(t.errors,s,a):R(t.errors,s)),(a?!re(f,a):f)||!$(m)||u){const g={...m,...u&&Y(l)?{isValid:l}:{},errors:t.errors,name:s};t={...t,...g},h.state.next(g)}},se=async s=>{ee(s,!0);const l=await r.resolver(o,r.context,Zt(s||y.mount,i,r.criteriaMode,r.shouldUseNativeValidation));return ee(s),l},oe=async s=>{const{errors:l}=await se(s);if(s)for(const a of s){const m=c(l,a);m?D(t.errors,a,m):R(t.errors,a)}else t.errors=l;return l},W=async(s,l,a={valid:!0})=>{for(const m in s){const f=s[m];if(f){const{_f:u,...g}=f;if(u){const x=y.array.has(u.name),O=f._f&&er(f._f);O&&F.validatingFields&&ee([m],!0);const U=await st(f,y.disabled,o,T,r.shouldUseNativeValidation&&!l,x);if(O&&F.validatingFields&&ee([m]),U[u.name]&&(a.valid=!1,l))break;!l&&(c(U,u.name)?x?Kt(t.errors,U,u.name):D(t.errors,u.name,U[u.name]):R(t.errors,u.name))}!$(g)&&await W(g,l,a)}}return a.valid},Fe=()=>{for(const s of y.unMount){const l=c(i,s);l&&(l._f.refs?l._f.refs.every(a=>!Te(a)):!Te(l._f.ref))&&De(s)}y.unMount=new Set},_=(s,l)=>!r.disabled&&(s&&l&&D(o,s,l),!re(Be(),n)),w=(s,l,a)=>ht(s,y,{...d.mount?o:C(l)?n:G(s)?{[s]:l}:l},a,l),L=s=>we(c(d.mount?o:n,s,r.shouldUnregister?c(n,s,[]):[])),j=(s,l,a={})=>{const m=c(i,s);let f=l;if(m){const u=m._f;u&&(!u.disabled&&D(o,s,_t(l,u)),f=_e(u.ref)&&P(l)?"":l,Ft(u.ref)?[...u.ref.options].forEach(g=>g.selected=f.includes(g.value)):u.refs?ge(u.ref)?u.refs.length>1?u.refs.forEach(g=>(!g.defaultChecked||!g.disabled)&&(g.checked=Array.isArray(f)?!!f.find(x=>x===g.value):f===g.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(g=>g.checked=g.value===f):je(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||h.values.next({name:s,values:{...o}})))}(a.shouldDirty||a.shouldTouch)&&ne(s,f,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&fe(s)},z=(s,l,a)=>{for(const m in l){const f=l[m],u=`${s}.${m}`,g=c(i,u);(y.array.has(s)||M(f)||g&&!g._f)&&!ie(f)?z(u,f,a):j(u,f,a)}},q=(s,l,a={})=>{const m=c(i,s),f=y.array.has(s),u=B(l);D(o,s,u),f?(h.array.next({name:s,values:{...o}}),(F.isDirty||F.dirtyFields)&&a.shouldDirty&&h.state.next({name:s,dirtyFields:ce(n,o),isDirty:_(s,u)})):m&&!m._f&&!P(u)?z(s,u,a):j(s,u,a),Qe(s,y)&&h.state.next({...t}),h.values.next({name:d.mount?s:void 0,values:{...o}})},ue=async s=>{d.mount=!0;const l=s.target;let a=l.name,m=!0;const f=c(i,a),u=()=>l.type?Ie(f._f):at(s),g=x=>{m=Number.isNaN(x)||ie(x)&&isNaN(x.getTime())||re(x,c(o,a,x))};if(f){let x,O;const U=u(),te=s.type===be.BLUR||s.type===be.FOCUS_OUT,Ot=!tr(f._f)&&!r.resolver&&!c(t.errors,a)&&!f._f.deps||rr(te,c(t.touchedFields,a),t.isSubmitted,E,p),ke=Qe(a,y,te);D(o,a,U),te?(f._f.onBlur&&f._f.onBlur(s),v&&v(0)):f._f.onChange&&f._f.onChange(s);const Ce=ne(a,U,te,!1),Ut=!$(Ce)||ke;if(!te&&h.values.next({name:a,type:s.type,values:{...o}}),Ot)return F.isValid&&(r.mode==="onBlur"&&te?H():te||H()),Ut&&h.state.next({name:a,...ke?{}:Ce});if(!te&&ke&&h.state.next({...t}),r.resolver){const{errors:Ke}=await se([a]);if(g(U),m){const jt=lt(t.errors,i,a),Ge=lt(Ke,i,jt.name||a);x=Ge.error,a=Ge.name,O=$(Ke)}}else ee([a],!0),x=(await st(f,y.disabled,o,T,r.shouldUseNativeValidation))[a],ee([a]),g(U),m&&(x?O=!1:F.isValid&&(O=await W(i,!0)));m&&(f._f.deps&&fe(f._f.deps),ve(a,O,x,Ce))}},de=(s,l)=>{if(c(t.errors,l)&&s.focus)return s.focus(),1},fe=async(s,l={})=>{let a,m;const f=me(s);if(r.resolver){const u=await oe(C(s)?s:f);a=$(u),m=s?!f.some(g=>c(u,g)):a}else s?(m=(await Promise.all(f.map(async u=>{const g=c(i,u);return await W(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!m&&!t.isValid)&&H()):m=a=await W(i);return h.state.next({...!G(s)||F.isValid&&a!==t.isValid?{}:{name:s},...r.resolver||!s?{isValid:a}:{},errors:t.errors}),l.shouldFocus&&!m&&he(i,de,s?f:y.mount),m},Be=s=>{const l={...d.mount?o:n};return C(s)?l:G(s)?c(l,s):s.map(a=>c(l,a))},$e=(s,l)=>({invalid:!!c((l||t).errors,s),isDirty:!!c((l||t).dirtyFields,s),error:c((l||t).errors,s),isValidating:!!c(t.validatingFields,s),isTouched:!!c((l||t).touchedFields,s)}),It=s=>{s&&me(s).forEach(l=>R(t.errors,l)),h.state.next({errors:s?t.errors:{}})},He=(s,l,a)=>{const m=(c(i,s,{_f:{}})._f||{}).ref,f=c(t.errors,s)||{},{ref:u,message:g,type:x,...O}=f;D(t.errors,s,{...O,...l,ref:m}),h.state.next({name:s,errors:t.errors,isValid:!1}),a&&a.shouldFocus&&m&&m.focus&&m.focus()},Lt=(s,l)=>K(s)?h.values.subscribe({next:a=>s(w(void 0,l),a)}):w(s,l,!0),De=(s,l={})=>{for(const a of s?me(s):y.mount)y.mount.delete(a),y.array.delete(a),l.keepValue||(R(i,a),R(o,a)),!l.keepError&&R(t.errors,a),!l.keepDirty&&R(t.dirtyFields,a),!l.keepTouched&&R(t.touchedFields,a),!l.keepIsValidating&&R(t.validatingFields,a),!r.shouldUnregister&&!l.keepDefaultValue&&R(n,a);h.values.next({values:{...o}}),h.state.next({...t,...l.keepDirty?{isDirty:_()}:{}}),!l.keepIsValid&&H()},We=({disabled:s,name:l,field:a,fields:m})=>{(Y(s)&&d.mount||s||y.disabled.has(l))&&(s?y.disabled.add(l):y.disabled.delete(l),ne(l,Ie(a?a._f:c(m,l)._f),!1,!1,!0))},Se=(s,l={})=>{let a=c(i,s);const m=Y(l.disabled)||Y(r.disabled);return D(i,s,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:s}},name:s,mount:!0,...l}}),y.mount.add(s),a?We({field:a,disabled:Y(l.disabled)?l.disabled:r.disabled,name:s}):I(s,!0,l.value),{...m?{disabled:l.disabled||r.disabled}:{},...r.progressive?{required:!!l.required,min:ye(l.min),max:ye(l.max),minLength:ye(l.minLength),maxLength:ye(l.maxLength),pattern:ye(l.pattern)}:{},name:s,onChange:ue,onBlur:ue,ref:f=>{if(f){Se(s,l),a=c(i,s);const u=C(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,g=Qt(u),x=a._f.refs||[];if(g?x.find(O=>O===u):u===a._f.ref)return;D(i,s,{_f:{...a._f,...g?{refs:[...x.filter(Te),u,...Array.isArray(c(n,s))?[{}]:[]],ref:{type:u.type,name:s}}:{ref:u}}}),I(s,!1,void 0,u)}else a=c(i,s,{}),a._f&&(a._f.mount=!1),(r.shouldUnregister||l.shouldUnregister)&&!(ut(y.array,s)&&d.action)&&y.unMount.add(s)}}},qe=()=>r.shouldFocusError&&he(i,de,y.mount),Rt=s=>{Y(s)&&(h.state.next({disabled:s}),he(i,(l,a)=>{const m=c(i,a);m&&(l.disabled=m._f.disabled||s,Array.isArray(m._f.refs)&&m._f.refs.forEach(f=>{f.disabled=m._f.disabled||s}))},0,!1))},Ye=(s,l)=>async a=>{let m;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let f=B(o);if(y.disabled.size)for(const u of y.disabled)D(f,u,void 0);if(h.state.next({isSubmitting:!0}),r.resolver){const{errors:u,values:g}=await se();t.errors=u,f=g}else await W(i);if(R(t.errors,"root"),$(t.errors)){h.state.next({errors:{}});try{await s(f,a)}catch(u){m=u}}else l&&await l({...t.errors},a),qe(),setTimeout(qe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},Nt=(s,l={})=>{c(i,s)&&(C(l.defaultValue)?q(s,B(c(n,s))):(q(s,l.defaultValue),D(n,s,B(l.defaultValue))),l.keepTouched||R(t.touchedFields,s),l.keepDirty||(R(t.dirtyFields,s),t.isDirty=l.defaultValue?_(s,B(c(n,s))):_()),l.keepError||(R(t.errors,s),F.isValid&&H()),h.state.next({...t}))},ze=(s,l={})=>{const a=s?B(s):n,m=B(a),f=$(s),u=f?n:m;if(l.keepDefaultValues||(n=a),!l.keepValues){if(l.keepDirtyValues){const g=new Set([...y.mount,...Object.keys(ce(n,o))]);for(const x of Array.from(g))c(t.dirtyFields,x)?D(u,x,c(o,x)):q(x,c(u,x))}else{if(Re&&C(s))for(const g of y.mount){const x=c(i,g);if(x&&x._f){const O=Array.isArray(x._f.refs)?x._f.refs[0]:x._f.ref;if(_e(O)){const U=O.closest("form");if(U){U.reset();break}}}}i={}}o=r.shouldUnregister?l.keepDefaultValues?B(n):{}:B(u),h.array.next({values:{...u}}),h.values.next({values:{...u}})}y={mount:l.keepDirtyValues?y.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!F.isValid||!!l.keepIsValid||!!l.keepDirtyValues,d.watch=!!r.shouldUnregister,h.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:f?!1:l.keepDirty?t.isDirty:!!(l.keepDefaultValues&&!re(s,n)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:l.keepDirtyValues?l.keepDefaultValues&&o?ce(n,o):t.dirtyFields:l.keepDefaultValues&&s?ce(n,s):l.keepDirty?t.dirtyFields:{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Xe=(s,l)=>ze(K(s)?s(o):s,l);return{control:{register:Se,unregister:De,getFieldState:$e,handleSubmit:Ye,setError:He,_executeSchema:se,_getWatch:w,_getDirty:_,_updateValid:H,_removeUnmounted:Fe,_updateFieldArray:V,_updateDisabledField:We,_getFieldArray:L,_reset:ze,_resetDefaultValues:()=>K(r.defaultValues)&&r.defaultValues().then(s=>{Xe(s,r.resetOptions),h.state.next({isLoading:!1})}),_updateFormState:s=>{t={...t,...s}},_disableForm:Rt,_subjects:h,_proxyFormState:F,_setErrors:Q,get _fields(){return i},get _formValues(){return o},get _state(){return d},set _state(s){d=s},get _defaultValues(){return n},get _names(){return y},set _names(s){y=s},get _formState(){return t},set _formState(s){t=s},get _options(){return r},set _options(s){r={...r,...s}}},trigger:fe,register:Se,handleSubmit:Ye,watch:Lt,setValue:q,getValues:Be,reset:Xe,resetField:Nt,clearErrors:It,unregister:De,setError:He,setFocus:(s,l={})=>{const a=c(i,s),m=a&&a._f;if(m){const f=m.refs?m.refs[0]:m.ref;f.focus&&(f.focus(),l.shouldSelect&&K(f.select)&&f.select())}},getFieldState:$e}}function xr(e={}){const r=A.useRef(void 0),t=A.useRef(void 0),[i,n]=A.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});r.current||(r.current={...lr(e),formState:i});const o=r.current.control;return o._options=e,Ue({subject:o._subjects.state,next:d=>{yt(d,o._proxyFormState,o._updateFormState,!0)&&n({...o._formState})}}),A.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),A.useEffect(()=>{if(o._proxyFormState.isDirty){const d=o._getDirty();d!==i.isDirty&&o._subjects.state.next({isDirty:d})}},[o,i.isDirty]),A.useEffect(()=>{e.values&&!re(e.values,t.current)?(o._reset(e.values,o._options.resetOptions),t.current=e.values,n(d=>({...d}))):o._resetDefaultValues()},[e.values,o]),A.useEffect(()=>{e.errors&&o._setErrors(e.errors)},[e.errors,o]),A.useEffect(()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),A.useEffect(()=>{e.shouldUnregister&&o._subjects.values.next({values:o._getWatch()})},[e.shouldUnregister,o]),r.current.formState=ct(i,o),r.current}const br=Wt,pt=k.createContext({}),_r=({name:e,label:r="",helperText:t="",hasClear:i=!1,clearIcon:n=null,helperIcon:o=null,disabled:d=!1,hideInsideInfoPoint:y=!1,rules:v={},clearFn:b,children:F,showError:h,classNames:p})=>S.jsx(pt.Provider,{value:{name:e,label:r,hasClear:i,clearFn:b,clearIcon:n,helperText:t,hideInsideInfoPoint:y,disabled:d,rules:v,showError:h,classNames:p,helperIcon:o},children:F}),Vt=k.createContext({}),wt=k.forwardRef((e,r)=>{const t=k.useId();return S.jsx(Vt.Provider,{value:{id:t},children:S.jsx(nt,{ref:r,...e})})});wt.displayName="FlxFormItem";const nr=k.memo(wt);nr.displayName="MemoFlxFormItem";const Ae=()=>{const{name:e,...r}=k.useContext(pt),t=k.useContext(Vt);if(!r)throw new Error("useFormField should be used within <FlxFormField>");const{id:i}=t;return{id:i,name:e,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...r}},or=k.forwardRef(({error:e,...r},t)=>{const{formItemId:i,formDescriptionId:n,formMessageId:o}=Ae();return S.jsx(nt,{ref:t,id:i,"aria-describedby":e?`${n} ${o}`:`${n}`,"aria-invalid":!!e,...r})});or.displayName="FlxFormControl";const At=k.forwardRef(({className:e,disabled:r,children:t,...i},n)=>{const{formItemId:o}=Ae();return S.jsx("label",{ref:n,className:le(["flx-form-field-label",{disabled:r},e]),htmlFor:o,dangerouslySetInnerHTML:{__html:t},...i})});At.displayName="FlxFormLabel";const Et=k.memo(At);Et.displayName="MemoFlxFormLabel";const Ee=k.forwardRef(({children:e,className:r,position:t="right",...i},n)=>{const o=k.useRef(null),[d,y]=k.useState({}),[v,b]=k.useState(!1),F=k.useCallback(h=>{const p=h.getBoundingClientRect(),E={position:"absolute",minWidth:`${p.width}px`};switch(t){case"top":E.top=`${p.top+window.scrollY-8}px`,E.left=`${p.left+p.width/2}px`,E.transform="translateX(-50%) translateY(-100%)";break;case"bottom":E.top=`${p.bottom+window.scrollY+8}px`,E.left=`${p.left+p.width/2}px`,E.transform="translateX(-50%)";break;case"left":E.top=`${p.top+window.scrollY+p.height/2}px`,E.left=`${p.left-8}px`,E.transform="translateX(-100%) translateY(-50%)";break;case"right":E.top=`${p.top+window.scrollY+p.height/2}px`,E.left=`${p.right+8}px`,E.transform="translateY(-50%)";break}y(E)},[t]);return k.useEffect(()=>{var N;const h=(N=o.current)==null?void 0:N.parentElement;if(!h)return;const p=()=>{F(h),b(!0)},E=()=>b(!1),T=()=>F(h);return h.addEventListener("mouseenter",p),h.addEventListener("mouseleave",E),F(h),window.addEventListener("resize",T),()=>{h.removeEventListener("mouseenter",p),h.removeEventListener("mouseleave",E),window.removeEventListener("resize",T)}},[t,F]),S.jsx("div",{className:"flx-tooltip-wrapper",ref:o,children:v&&S.jsx(Bt,{children:S.jsx("div",{ref:n,className:le("flx-tooltip",`flx-tooltip-${t}`,r),style:d,...i,children:e})})})});Ee.displayName="FlxTooltip";const ar=k.memo(Ee);ar.displayName="MemoFlxTooltip";const Dt=k.forwardRef(({children:e,className:r,iconComponent:t,...i},n)=>S.jsxs("div",{ref:n,className:le(["flx-info-helper",r]),...i,children:[S.jsx("div",{className:"flx-icon-with-default",children:S.jsx("div",{className:"flx-content-icon",children:t??S.jsx(Pt,{name:"info"})})}),S.jsx(Ee,{className:le(["flx-tooltip",r]),position:"right",children:e})]}));Dt.displayName="FlxFormInfoHelper";const St=k.memo(Dt);St.displayName="MemoFlxFormInfoHelper";const kt=k.forwardRef(({className:e,...r},t)=>{const{formDescriptionId:i}=Ae();return S.jsx("div",{ref:t,id:i,className:le(["flx-form-field-helper",e]),...r})});kt.displayName="FlxFormHelper";const Ct=k.memo(kt);Ct.displayName="MemoFlxFormHelper";const Mt=k.forwardRef(({className:e,children:r,error:t,errorDisplayType:i="inline",...n},o)=>{const d=k.useRef(null),y=t?t.message:r;return i==="tooltip"?y?S.jsx(Ee,{className:le("flx-form-field-error","tooltip",e),position:"top",children:y}):null:S.jsx("div",{ref:d,className:"flx-error-wrapper",children:y?S.jsx("div",{ref:o,className:le("flx-form-field-error","inline",e),...n,children:y}):null})});Mt.displayName="FlxFormError";const Tt=k.memo(Mt);Tt.displayName="MemoFlxFormError";const pr=({children:e,error:r,errorDisplayType:t="inline"})=>{const{hideInsideInfoPoint:i,helperIcon:n,helperText:o,label:d,disabled:y,formMessageId:v,classNames:b}=Ae();return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flx-label-container",children:[S.jsx(Et,{className:b==null?void 0:b.label,disabled:y,children:d}),i?S.jsx(St,{iconComponent:n,className:b==null?void 0:b.helperTooltip,children:o}):null]}),e,!r&&!i&&o?S.jsx(Ct,{className:b==null?void 0:b.helper,children:o}):null,S.jsx(Tt,{id:v,className:b==null?void 0:b.error,error:r,errorDisplayType:t})]})};export{Fr as C,br as F,_r as a,Oe as b,Ae as c,wt as d,or as e,pr as f,xr as u};
