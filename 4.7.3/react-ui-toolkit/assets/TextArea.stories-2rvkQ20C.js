import{j as r}from"./jsx-runtime-CBDCb4rg.js";import{f as w,c as E,u as B,a as O,C as P,b as R,d as $,F as _,e as k}from"./Content-DlMT5peK.js";import{c as H}from"./clsx-B-dksMZM.js";import{r as t}from"./index-B-o1Wr-g.js";import{u as L}from"./useComputedClearIcon-CXkq2o3F.js";import{F as V}from"./Icon-DQNTWSJm.js";import"./index-qMorCPSe.js";import"./Portal-vLh0jiGk.js";import"./index-DjIwiQkP.js";import"./_commonjsHelpers-Cpj98o6Y.js";const N=t.forwardRef(({disabled:i=!1,hasError:e=!1,filled:s=!1,placeholder:d,minRows:a=2,maxRows:n,heightType:l,value:u,...f},c)=>{const[h,F]=t.useState("auto"),[y,C]=t.useState(a),m=t.useRef(24),o=t.useRef(null),x=t.useRef(0);t.useImperativeHandle(c,()=>o.current),t.useEffect(()=>{if(o.current){const p=window.getComputedStyle(o.current),T=parseInt(p.lineHeight,10),q=parseInt(p.paddingTop,10),v=parseInt(p.paddingBottom,10);m.current=T,x.current=q+v}},[]);const b=t.useCallback(()=>{if(!o.current)return;o.current.rows=a;const p=Math.floor((o.current.scrollHeight-x.current)/m.current);if(p>a){const T=n?Math.min(p,n):p;o.current.style.height=`${m.current*T+x.current}px`,F(`${m.current*T+x.current}px`),C(T)}else F("auto"),C(a)},[a,n]);return t.useEffect(()=>{u!==void 0&&l!=="fixed"&&(o.current.style.height="auto",b())},[b,l,u]),t.useEffect(()=>{o.current&&!s&&(o.current.rows=a,F("auto"),C(a))},[s,a]),r.jsx(E,{children:r.jsx("textarea",{...f,value:u,className:H(["flx-textarea",{error:e},{disabled:i},{filled:s}]),disabled:i,placeholder:d,ref:o,rows:a,style:{height:h,overflowY:n&&y>=n||l==="fixed"?"scroll":"hidden",maxHeight:n?`${(m.current+x.current)*n}px`:void 0,...f.style}})})});N.displayName="FlxTextAreaInput";const M=t.memo(N);M.displayName="MemoFlxTextAreaInput";const j=t.forwardRef(({error:i,name:e,placeholder:s="",className:d,clearFn:a,onChange:n,value:l,clearIcon:u,hasClear:f,disabled:c=!1,onBlur:h,dataUniqueid:F,dataTestId:y,errorDisplayType:C,...m},o)=>{const{clearIconComponent:x}=L({filled:!!l,hasClear:f,resetFieldFn:a,clearIcon:u,className:"flx-textarea-clear"});return r.jsx("div",{ref:o,"data-uniqueid":F,"data-testid":y,className:H(["flx-textarea-control",d]),children:r.jsx(w,{error:i,errorDisplayType:C,children:r.jsxs("div",{className:"flx-textarea-wrapper",children:[r.jsx(M,{...m,name:e,disabled:c,onChange:n,onBlur:h,placeholder:s,filled:!!l,value:l,hasError:!!i}),x]})})})});j.displayName="FlxTextArea";const Y=t.memo(j);Y.displayName="MemoFlxTextArea";const re={title:"Text entry",component:j,decorators:[(i,{args:e})=>{const s=$({mode:"onTouched",defaultValues:{textarea:""}}),d=()=>{s.resetField("textarea")};return r.jsx(_,{...s,children:r.jsx(k,{name:"textarea",label:e.label,disabled:e.disabled,helperText:e.helper,clearFn:d,rules:e.requiredError?{required:"This field is required"}:{},hideInsideInfoPoint:e.infoTooltip,clearIcon:e.hasCustomClearIcon?r.jsx(V,{name:"trash"}):null,hasClear:e.hasClear,children:r.jsx(i,{})})})}],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:function(e){const{control:s}=B(),{name:d,rules:a,disabled:n,hasClear:l,clearIcon:u,clearFn:f}=O();return r.jsx("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:r.jsx(P,{name:d,control:s,disabled:n,rules:a,render:({field:c,fieldState:h})=>r.jsx(R,{children:r.jsx(E,{children:r.jsx(j,{value:c.value,disabled:c.disabled,name:c.name,onChange:c.onChange,onBlur:c.onBlur,error:h.error,placeholder:e.placeholder,hasClear:l,clearIcon:u,clearFn:f,minRows:e.minRows,maxRows:e.maxRows})})})})})}},z={args:{label:"Input label",fontFamily:"Open Sans",hasClear:!1,disabled:!1,placeholder:"Placeholder",helper:"",infoTooltip:!1,requiredError:!1,hasCustomClearIcon:!1,minRows:3,maxRows:6}},I={...z};var g,A,S;I.parameters={...I.parameters,docs:{...(g=I.parameters)==null?void 0:g.docs,source:{originalSource:`{
  ...TextareaTemplate
} satisfies Story`,...(S=(A=I.parameters)==null?void 0:A.docs)==null?void 0:S.source}}};const te=["Textarea"];export{I as Textarea,te as __namedExportsOrder,re as default};
