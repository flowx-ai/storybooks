import{R as w,r as k}from"./index-B-o1Wr-g.js";import{j as D}from"./jsx-runtime-CBDCb4rg.js";import{S as at}from"./index-qMorCPSe.js";import{c as ne}from"./clsx-B-dksMZM.js";import{M as $t}from"./Icon-DQNTWSJm.js";import{P as Ht}from"./Portal-vLh0jiGk.js";var he=e=>e.type==="checkbox",le=e=>e instanceof Date,$=e=>e==null;const ot=e=>typeof e=="object";var L=e=>!$(e)&&!Array.isArray(e)&&ot(e)&&!le(e),ut=e=>L(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Wt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dt=(e,s)=>e.has(Wt(s)),qt=e=>{const s=e.constructor&&e.constructor.prototype;return L(s)&&s.hasOwnProperty("isPrototypeOf")},Me=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function O(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(e instanceof Set)s=new Set(e);else if(!(Me&&(e instanceof Blob||i))&&(t||L(e)))if(s=t?[]:{},!t&&!qt(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=O(e[n]));else return e;return s}var Ve=e=>Array.isArray(e)?e.filter(Boolean):[],R=e=>e===void 0,y=(e,s,t)=>{if(!s||!L(e))return t;const i=Ve(s.split(/[,[\].]+?/)).reduce((n,a)=>$(n)?n:n[a],e);return R(i)||i===e?R(e[s])?t:e[s]:i},Y=e=>typeof e=="boolean",Te=e=>/^\w*$/.test(e),ft=e=>Ve(e.replace(/["|']|\]/g,"").split(/\.|\[/)),E=(e,s,t)=>{let i=-1;const n=Te(s)?[s]:ft(s),a=n.length,d=a-1;for(;++i<a;){const c=n[i];let F=t;if(i!==d){const _=e[c];F=L(_)||Array.isArray(_)?_:isNaN(+n[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=F,e=e[c]}};const Fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ct=w.createContext(null),Ie=()=>w.useContext(ct),Yt=e=>{const{children:s,...t}=e;return w.createElement(ct.Provider,{value:t},s)};var yt=(e,s,t,i=!0)=>{const n={defaultValues:s._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const d=a;return s._proxyFormState[d]!==K.all&&(s._proxyFormState[d]=!i||K.all),t&&(t[d]=!0),e[d]}});return n};function zt(e){const s=Ie(),{control:t=s.control,disabled:i,name:n,exact:a}=e||{},[d,c]=w.useState(t._formState),F=w.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),_=w.useRef(n);return _.current=n,w.useEffect(()=>t._subscribe({name:_.current,formState:F.current,exact:a,callback:x=>{!i&&c({...t._formState,...x})}}),[t,i,a]),w.useEffect(()=>{F.current.isValid&&t._setValid(!0)},[t]),w.useMemo(()=>yt(d,t,F.current,!1),[d,t])}var Z=e=>typeof e=="string",mt=(e,s,t,i,n)=>Z(e)?(i&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(a=>(i&&s.watch.add(a),y(t,a))):(i&&(s.watchAll=!0),t);function Xt(e){const s=Ie(),{control:t=s.control,name:i,defaultValue:n,disabled:a,exact:d}=e||{},c=w.useRef(i),F=w.useRef(n);c.current=i,w.useEffect(()=>t._subscribe({name:c.current,formState:{values:!0},exact:d,callback:b=>!a&&x(mt(c.current,t._names,b.values||t._formValues,!1,F.current))}),[t,a,d]);const[_,x]=w.useState(t._getWatch(i,n));return w.useEffect(()=>t._removeUnmounted()),_}function Kt(e){const s=Ie(),{name:t,disabled:i,control:n=s.control,shouldUnregister:a}=e,d=dt(n._names.array,t),c=Xt({control:n,name:t,defaultValue:y(n._formValues,t,y(n._defaultValues,t,e.defaultValue)),exact:!0}),F=zt({control:n,name:t,exact:!0}),_=w.useRef(e),x=w.useRef(n.register(t,{...e.rules,value:c,...Y(e.disabled)?{disabled:e.disabled}:{}})),b=w.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(F.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(F.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(F.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(F.validatingFields,t)},error:{enumerable:!0,get:()=>y(F.errors,t)}}),[F,t]),g=w.useCallback(P=>x.current.onChange({target:{value:ut(P),name:t},type:Fe.CHANGE}),[t]),S=w.useCallback(()=>x.current.onBlur({target:{value:y(n._formValues,t),name:t},type:Fe.BLUR}),[t,n._formValues]),H=w.useCallback(P=>{const j=y(n._fields,t);j&&P&&(j._f.ref={focus:()=>P.focus(),select:()=>P.select(),setCustomValidity:v=>P.setCustomValidity(v),reportValidity:()=>P.reportValidity()})},[n._fields,t]),M=w.useMemo(()=>({name:t,value:c,...Y(i)||F.disabled?{disabled:F.disabled||i}:{},onChange:g,onBlur:S,ref:H}),[t,i,F.disabled,g,S,H,c]);return w.useEffect(()=>{const P=n._options.shouldUnregister||a;n.register(t,{..._.current.rules,...Y(_.current.disabled)?{disabled:_.current.disabled}:{}});const j=(v,X)=>{const q=y(n._fields,v);q&&q._f&&(q._f.mount=X)};if(j(t,!0),P){const v=O(y(n._options.defaultValues,t));E(n._defaultValues,t,v),R(y(n._formValues,t))&&E(n._formValues,t,v)}return!d&&n.register(t),()=>{(d?P&&!n._state.action:P)?n.unregister(t):j(t,!1)}},[t,n,d,a]),w.useEffect(()=>{n._setDisabledField({disabled:i,name:t})},[i,t,n]),w.useMemo(()=>({field:M,formState:F,fieldState:b}),[M,F,b])}const br=e=>e.render(Kt(e));var Gt=(e,s,t,i,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Ge=()=>{let e=[];return{get observers(){return e},next:n=>{for(const a of e)a.next&&a.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(a=>a!==n)}}),unsubscribe:()=>{e=[]}}},Le=e=>$(e)||!ot(e);function se(e,s){if(Le(e)||Le(s))return e===s;if(le(e)&&le(s))return e.getTime()===s.getTime();const t=Object.keys(e),i=Object.keys(s);if(t.length!==i.length)return!1;for(const n of t){const a=e[n];if(!i.includes(n))return!1;if(n!=="ref"){const d=s[n];if(le(a)&&le(d)||L(a)&&L(d)||Array.isArray(a)&&Array.isArray(d)?!se(a,d):a!==d)return!1}}return!0}var B=e=>L(e)&&!Object.keys(e).length,Ne=e=>e.type==="file",G=e=>typeof e=="function",xe=e=>{if(!Me)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ht=e=>e.type==="select-multiple",Oe=e=>e.type==="radio",Jt=e=>Oe(e)||he(e),Re=e=>xe(e)&&e.isConnected;function Qt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=R(e)?i++:e[s[i++]];return e}function Zt(e){for(const s in e)if(e.hasOwnProperty(s)&&!R(e[s]))return!1;return!0}function I(e,s){const t=Array.isArray(s)?s:Te(s)?[s]:ft(s),i=t.length===1?e:Qt(e,t),n=t.length-1,a=t[n];return i&&delete i[a],n!==0&&(L(i)&&B(i)||Array.isArray(i)&&Zt(i))&&I(e,t.slice(0,-1)),e}var gt=e=>{for(const s in e)if(G(e[s]))return!0;return!1};function be(e,s={}){const t=Array.isArray(e);if(L(e)||t)for(const i in e)Array.isArray(e[i])||L(e[i])&&!gt(e[i])?(s[i]=Array.isArray(e[i])?[]:{},be(e[i],s[i])):$(e[i])||(s[i]=!0);return s}function vt(e,s,t){const i=Array.isArray(e);if(L(e)||i)for(const n in e)Array.isArray(e[n])||L(e[n])&&!gt(e[n])?R(s)||Le(t[n])?t[n]=Array.isArray(e[n])?be(e[n],[]):{...be(e[n])}:vt(e[n],$(s)?{}:s[n],t[n]):t[n]=!se(e[n],s[n]);return t}var fe=(e,s)=>vt(e,s,be(s));const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var Ft=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!R(e[0].attributes.value)?R(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je},xt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>R(e)?e:s?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):i?i(e):e;const Ze={isValid:!1,value:null};var bt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Ze):Ze;function et(e){const s=e.ref;return Ne(s)?s.files:Oe(s)?bt(e.refs).value:ht(s)?[...s.selectedOptions].map(({value:t})=>t):he(s)?Ft(e.refs).value:xt(R(s.value)?e.ref.value:s.value,e)}var er=(e,s,t,i)=>{const n={};for(const a of e){const d=y(s,a);d&&E(n,a,d._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},_e=e=>e instanceof RegExp,ce=e=>R(e)?e:_e(e)?e.source:L(e)?_e(e.value)?e.value.source:e.value:e,tt=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched});const rt="AsyncFunction";var tr=e=>!!e&&!!e.validate&&!!(G(e.validate)&&e.validate.constructor.name===rt||L(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===rt)),rr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),st=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const me=(e,s,t,i)=>{for(const n of t||Object.keys(e)){const a=y(e,n);if(a){const{_f:d,...c}=a;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],n)&&!i)return!0;if(d.ref&&s(d.ref,d.name)&&!i)return!0;if(me(c,s))break}else if(L(c)&&me(c,s))break}}};function it(e,s,t){const i=y(e,t);if(i||Te(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const a=n.join("."),d=y(s,a),c=y(e,a);if(d&&!Array.isArray(d)&&t!==a)return{name:t};if(c&&c.type)return{name:a,error:c};n.pop()}return{name:t}}var sr=(e,s,t,i)=>{t(e);const{name:n,...a}=e;return B(a)||Object.keys(a).length>=Object.keys(s).length||Object.keys(a).find(d=>s[d]===(!i||K.all))},ir=(e,s,t)=>!e||!s||e===s||ye(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),lr=(e,s,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,nr=(e,s)=>!Ve(y(e,s)).length&&I(e,s),ar=(e,s,t)=>{const i=ye(y(e,t));return E(i,"root",s[t]),E(e,t,i),e},ve=e=>Z(e);function lt(e,s,t="validate"){if(ve(e)||Array.isArray(e)&&e.every(ve)||Y(e)&&!e)return{type:t,message:ve(e)?e:"",ref:s}}var ae=e=>L(e)&&!_e(e)?e:{value:e,message:""},nt=async(e,s,t,i,n,a)=>{const{ref:d,refs:c,required:F,maxLength:_,minLength:x,min:b,max:g,pattern:S,validate:H,name:M,valueAsNumber:P,mount:j}=e._f,v=y(t,M);if(!j||s.has(M))return{};const X=c?c[0]:d,q=A=>{n&&X.reportValidity&&(X.setCustomValidity(Y(A)?"":A||""),X.reportValidity())},N={},oe=Oe(d),ue=he(d),Ae=oe||ue,J=(P||Ne(d))&&R(d.value)&&R(v)||xe(d)&&d.value===""||v===""||Array.isArray(v)&&!v.length,ie=Gt.bind(null,M,i,N),ee=(A,V,C,W=te.maxLength,z=te.minLength)=>{const Q=A?V:C;N[M]={type:A?W:z,message:Q,ref:d,...ie(A?W:z,Q)}};if(a?!Array.isArray(v)||!v.length:F&&(!Ae&&(J||$(v))||Y(v)&&!v||ue&&!Ft(c).isValid||oe&&!bt(c).isValid)){const{value:A,message:V}=ve(F)?{value:!!F,message:F}:ae(F);if(A&&(N[M]={type:te.required,message:V,ref:X,...ie(te.required,V)},!i))return q(V),N}if(!J&&(!$(b)||!$(g))){let A,V;const C=ae(g),W=ae(b);if(!$(v)&&!isNaN(v)){const z=d.valueAsNumber||v&&+v;$(C.value)||(A=z>C.value),$(W.value)||(V=z<W.value)}else{const z=d.valueAsDate||new Date(v),Q=ge=>new Date(new Date().toDateString()+" "+ge),re=d.type=="time",de=d.type=="week";Z(C.value)&&v&&(A=re?Q(v)>Q(C.value):de?v>C.value:z>new Date(C.value)),Z(W.value)&&v&&(V=re?Q(v)<Q(W.value):de?v<W.value:z<new Date(W.value))}if((A||V)&&(ee(!!A,C.message,W.message,te.max,te.min),!i))return q(N[M].message),N}if((_||x)&&!J&&(Z(v)||a&&Array.isArray(v))){const A=ae(_),V=ae(x),C=!$(A.value)&&v.length>+A.value,W=!$(V.value)&&v.length<+V.value;if((C||W)&&(ee(C,A.message,V.message),!i))return q(N[M].message),N}if(S&&!J&&Z(v)){const{value:A,message:V}=ae(S);if(_e(A)&&!v.match(A)&&(N[M]={type:te.pattern,message:V,ref:d,...ie(te.pattern,V)},!i))return q(V),N}if(H){if(G(H)){const A=await H(v,t),V=lt(A,X);if(V&&(N[M]={...V,...ie(te.validate,V.message)},!i))return q(V.message),N}else if(L(H)){let A={};for(const V in H){if(!B(A)&&!i)break;const C=lt(await H[V](v,t),X,V);C&&(A={...C,...ie(V,C.message)},q(C.message),i&&(N[M]=A))}if(!B(A)&&(N[M]={ref:X,...A},!i))return N}}return q(!0),N};const or={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function ur(e={}){let s={...or,...e},t={submitCount:0,isDirty:!1,isLoading:G(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1};const i={};let n=L(s.defaultValues)||L(s.values)?O(s.values||s.defaultValues)||{}:{},a=s.shouldUnregister?{}:O(n),d={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},F,_=0;const x={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...x};const g={array:Ge(),state:Ge()},S=tt(s.mode),H=tt(s.reValidateMode),M=s.criteriaMode===K.all,P=r=>l=>{clearTimeout(_),_=setTimeout(r,l)},j=async r=>{if(!s.disabled&&(x.isValid||b.isValid||r)){const l=s.resolver?B((await J()).errors):await ee(i,!0);l!==t.isValid&&g.state.next({isValid:l})}},v=(r,l)=>{!s.disabled&&(x.isValidating||x.validatingFields||b.isValidating||b.validatingFields)&&((r||Array.from(c.mount)).forEach(o=>{o&&(l?E(t.validatingFields,o,l):I(t.validatingFields,o))}),g.state.next({validatingFields:t.validatingFields,isValidating:!B(t.validatingFields)}))},X=(r,l=[],o,m,f=!0,u=!0)=>{if(m&&o&&!s.disabled){if(d.action=!0,u&&Array.isArray(y(i,r))){const h=o(y(i,r),m.argA,m.argB);f&&E(i,r,h)}if(u&&Array.isArray(y(t.errors,r))){const h=o(y(t.errors,r),m.argA,m.argB);f&&E(t.errors,r,h),nr(t.errors,r)}if((x.touchedFields||b.touchedFields)&&u&&Array.isArray(y(t.touchedFields,r))){const h=o(y(t.touchedFields,r),m.argA,m.argB);f&&E(t.touchedFields,r,h)}(x.dirtyFields||b.dirtyFields)&&(t.dirtyFields=fe(n,a)),g.state.next({name:r,isDirty:V(r,l),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(a,r,l)},q=(r,l)=>{E(t.errors,r,l),g.state.next({errors:t.errors})},N=r=>{t.errors=r,g.state.next({errors:t.errors,isValid:!1})},oe=(r,l,o,m)=>{const f=y(i,r);if(f){const u=y(a,r,R(o)?y(n,r):o);R(u)||m&&m.defaultChecked||l?E(a,r,l?u:et(f._f)):z(r,u),d.mount&&j()}},ue=(r,l,o,m,f)=>{let u=!1,h=!1;const p={name:r};if(!s.disabled){if(!o||m){(x.isDirty||b.isDirty)&&(h=t.isDirty,t.isDirty=p.isDirty=V(),u=h!==p.isDirty);const T=se(y(n,r),l);h=!!y(t.dirtyFields,r),T?I(t.dirtyFields,r):E(t.dirtyFields,r,!0),p.dirtyFields=t.dirtyFields,u=u||(x.dirtyFields||b.dirtyFields)&&h!==!T}if(o){const T=y(t.touchedFields,r);T||(E(t.touchedFields,r,o),p.touchedFields=t.touchedFields,u=u||(x.touchedFields||b.touchedFields)&&T!==o)}u&&f&&g.state.next(p)}return u?p:{}},Ae=(r,l,o,m)=>{const f=y(t.errors,r),u=(x.isValid||b.isValid)&&Y(l)&&t.isValid!==l;if(s.delayError&&o?(F=P(()=>q(r,o)),F(s.delayError)):(clearTimeout(_),F=null,o?E(t.errors,r,o):I(t.errors,r)),(o?!se(f,o):f)||!B(m)||u){const h={...m,...u&&Y(l)?{isValid:l}:{},errors:t.errors,name:r};t={...t,...h},g.state.next(h)}},J=async r=>{v(r,!0);const l=await s.resolver(a,s.context,er(r||c.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return v(r),l},ie=async r=>{const{errors:l}=await J(r);if(r)for(const o of r){const m=y(l,o);m?E(t.errors,o,m):I(t.errors,o)}else t.errors=l;return l},ee=async(r,l,o={valid:!0})=>{for(const m in r){const f=r[m];if(f){const{_f:u,...h}=f;if(u){const p=c.array.has(u.name),T=f._f&&tr(f._f);T&&x.validatingFields&&v([m],!0);const U=await nt(f,c.disabled,a,M,s.shouldUseNativeValidation&&!l,p);if(T&&x.validatingFields&&v([m]),U[u.name]&&(o.valid=!1,l))break;!l&&(y(U,u.name)?p?ar(t.errors,U,u.name):E(t.errors,u.name,U[u.name]):I(t.errors,u.name))}!B(h)&&await ee(h,l,o)}}return o.valid},A=()=>{for(const r of c.unMount){const l=y(i,r);l&&(l._f.refs?l._f.refs.every(o=>!Re(o)):!Re(l._f.ref))&&Se(r)}c.unMount=new Set},V=(r,l)=>!s.disabled&&(r&&l&&E(a,r,l),!se(Ue(),n)),C=(r,l,o)=>mt(r,c,{...d.mount?a:R(l)?n:Z(r)?{[r]:l}:l},o,l),W=r=>Ve(y(d.mount?a:n,r,s.shouldUnregister?y(n,r,[]):[])),z=(r,l,o={})=>{const m=y(i,r);let f=l;if(m){const u=m._f;u&&(!u.disabled&&E(a,r,xt(l,u)),f=xe(u.ref)&&$(l)?"":l,ht(u.ref)?[...u.ref.options].forEach(h=>h.selected=f.includes(h.value)):u.refs?he(u.ref)?u.refs.length>1?u.refs.forEach(h=>(!h.defaultChecked||!h.disabled)&&(h.checked=Array.isArray(f)?!!f.find(p=>p===h.value):f===h.value)):u.refs[0]&&(u.refs[0].checked=!!f):u.refs.forEach(h=>h.checked=h.value===f):Ne(u.ref)?u.ref.value="":(u.ref.value=f,u.ref.type||g.state.next({name:r,values:O(a)})))}(o.shouldDirty||o.shouldTouch)&&ue(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&Ee(r)},Q=(r,l,o)=>{for(const m in l){const f=l[m],u=`${r}.${m}`,h=y(i,u);(c.array.has(r)||L(f)||h&&!h._f)&&!le(f)?Q(u,f,o):z(u,f,o)}},re=(r,l,o={})=>{const m=y(i,r),f=c.array.has(r),u=O(l);E(a,r,u),f?(g.array.next({name:r,values:O(a)}),(x.isDirty||x.dirtyFields||b.isDirty||b.dirtyFields)&&o.shouldDirty&&g.state.next({name:r,dirtyFields:fe(n,a),isDirty:V(r,u)})):m&&!m._f&&!$(u)?Q(r,u,o):z(r,u,o),st(r,c)&&g.state.next({...t}),g.state.next({name:d.mount?r:void 0,values:O(a)})},de=async r=>{d.mount=!0;const l=r.target;let o=l.name,m=!0;const f=y(i,o),u=h=>{m=Number.isNaN(h)||le(h)&&isNaN(h.getTime())||se(h,y(a,o,h))};if(f){let h,p;const T=l.type?et(f._f):ut(r),U=r.type===Fe.BLUR||r.type===Fe.FOCUS_OUT,Pt=!rr(f._f)&&!s.resolver&&!y(t.errors,o)&&!f._f.deps||lr(U,y(t.touchedFields,o),t.isSubmitted,H,S),ke=st(o,c,U);E(a,o,T),U?(f._f.onBlur&&f._f.onBlur(r),F&&F(0)):f._f.onChange&&f._f.onChange(r);const Ce=ue(o,T,U),jt=!B(Ce)||ke;if(!U&&g.state.next({name:o,type:r.type,values:O(a)}),Pt)return(x.isValid||b.isValid)&&(s.mode==="onBlur"?U&&j():U||j()),jt&&g.state.next({name:o,...ke?{}:Ce});if(!U&&ke&&g.state.next({...t}),s.resolver){const{errors:Xe}=await J([o]);if(u(T),m){const Bt=it(t.errors,i,o),Ke=it(Xe,i,Bt.name||o);h=Ke.error,o=Ke.name,p=B(Xe)}}else v([o],!0),h=(await nt(f,c.disabled,a,M,s.shouldUseNativeValidation))[o],v([o]),u(T),m&&(h?p=!1:(x.isValid||b.isValid)&&(p=await ee(i,!0)));m&&(f._f.deps&&Ee(f._f.deps),Ae(o,p,h,Ce))}},ge=(r,l)=>{if(y(t.errors,l)&&r.focus)return r.focus(),1},Ee=async(r,l={})=>{let o,m;const f=ye(r);if(s.resolver){const u=await ie(R(r)?r:f);o=B(u),m=r?!f.some(h=>y(u,h)):o}else r?(m=(await Promise.all(f.map(async u=>{const h=y(i,u);return await ee(h&&h._f?{[u]:h}:h)}))).every(Boolean),!(!m&&!t.isValid)&&j()):m=o=await ee(i);return g.state.next({...!Z(r)||(x.isValid||b.isValid)&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),l.shouldFocus&&!m&&me(i,ge,r?f:c.mount),m},Ue=r=>{const l={...d.mount?a:n};return R(r)?l:Z(r)?y(l,r):r.map(o=>y(l,o))},Pe=(r,l)=>({invalid:!!y((l||t).errors,r),isDirty:!!y((l||t).dirtyFields,r),error:y((l||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((l||t).touchedFields,r)}),Lt=r=>{r&&ye(r).forEach(l=>I(t.errors,l)),g.state.next({errors:r?t.errors:{}})},je=(r,l,o)=>{const m=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:u,message:h,type:p,...T}=f;E(t.errors,r,{...T,...l,ref:m}),g.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&m&&m.focus&&m.focus()},Mt=(r,l)=>G(r)?g.state.subscribe({next:o=>r(C(void 0,l),o)}):C(r,l,!0),Be=r=>g.state.subscribe({next:l=>{ir(r.name,l.name,r.exact)&&sr(l,r.formState||x,Ut,r.reRenderRoot)&&r.callback({values:{...a},...t,...l})}}).unsubscribe,Tt=r=>(d.mount=!0,b={...b,...r.formState},Be({...r,formState:b})),Se=(r,l={})=>{for(const o of r?ye(r):c.mount)c.mount.delete(o),c.array.delete(o),l.keepValue||(I(i,o),I(a,o)),!l.keepError&&I(t.errors,o),!l.keepDirty&&I(t.dirtyFields,o),!l.keepTouched&&I(t.touchedFields,o),!l.keepIsValidating&&I(t.validatingFields,o),!s.shouldUnregister&&!l.keepDefaultValue&&I(n,o);g.state.next({values:O(a)}),g.state.next({...t,...l.keepDirty?{isDirty:V()}:{}}),!l.keepIsValid&&j()},$e=({disabled:r,name:l})=>{(Y(r)&&d.mount||r||c.disabled.has(l))&&(r?c.disabled.add(l):c.disabled.delete(l))},De=(r,l={})=>{let o=y(i,r);const m=Y(l.disabled)||Y(s.disabled);return E(i,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...l}}),c.mount.add(r),o?$e({disabled:Y(l.disabled)?l.disabled:s.disabled,name:r}):oe(r,!0,l.value),{...m?{disabled:l.disabled||s.disabled}:{},...s.progressive?{required:!!l.required,min:ce(l.min),max:ce(l.max),minLength:ce(l.minLength),maxLength:ce(l.maxLength),pattern:ce(l.pattern)}:{},name:r,onChange:de,onBlur:de,ref:f=>{if(f){De(r,l),o=y(i,r);const u=R(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Jt(u),p=o._f.refs||[];if(h?p.find(T=>T===u):u===o._f.ref)return;E(i,r,{_f:{...o._f,...h?{refs:[...p.filter(Re),u,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),oe(r,!1,void 0,u)}else o=y(i,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||l.shouldUnregister)&&!(dt(c.array,r)&&d.action)&&c.unMount.add(r)}}},He=()=>s.shouldFocusError&&me(i,ge,c.mount),It=r=>{Y(r)&&(g.state.next({disabled:r}),me(i,(l,o)=>{const m=y(i,o);m&&(l.disabled=m._f.disabled||r,Array.isArray(m._f.refs)&&m._f.refs.forEach(f=>{f.disabled=m._f.disabled||r}))},0,!1))},We=(r,l)=>async o=>{let m;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=O(a);if(g.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:h}=await J();t.errors=u,f=h}else await ee(i);if(c.disabled.size)for(const u of c.disabled)E(f,u,void 0);if(I(t.errors,"root"),B(t.errors)){g.state.next({errors:{}});try{await r(f,o)}catch(u){m=u}}else l&&await l({...t.errors},o),He(),setTimeout(He);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:B(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},Nt=(r,l={})=>{y(i,r)&&(R(l.defaultValue)?re(r,O(y(n,r))):(re(r,l.defaultValue),E(n,r,O(l.defaultValue))),l.keepTouched||I(t.touchedFields,r),l.keepDirty||(I(t.dirtyFields,r),t.isDirty=l.defaultValue?V(r,O(y(n,r))):V()),l.keepError||(I(t.errors,r),x.isValid&&j()),g.state.next({...t}))},qe=(r,l={})=>{const o=r?O(r):n,m=O(o),f=B(r),u=f?n:m;if(l.keepDefaultValues||(n=o),!l.keepValues){if(l.keepDirtyValues){const h=new Set([...c.mount,...Object.keys(fe(n,a))]);for(const p of Array.from(h))y(t.dirtyFields,p)?E(u,p,y(a,p)):re(p,y(u,p))}else{if(Me&&R(r))for(const h of c.mount){const p=y(i,h);if(p&&p._f){const T=Array.isArray(p._f.refs)?p._f.refs[0]:p._f.ref;if(xe(T)){const U=T.closest("form");if(U){U.reset();break}}}}for(const h of c.mount)re(h,y(u,h))}a=O(u),g.array.next({values:{...u}}),g.state.next({values:{...u}})}c={mount:l.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!x.isValid||!!l.keepIsValid||!!l.keepDirtyValues,d.watch=!!s.shouldUnregister,g.state.next({submitCount:l.keepSubmitCount?t.submitCount:0,isDirty:f?!1:l.keepDirty?t.isDirty:!!(l.keepDefaultValues&&!se(r,n)),isSubmitted:l.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:l.keepDirtyValues?l.keepDefaultValues&&a?fe(n,a):t.dirtyFields:l.keepDefaultValues&&r?fe(n,r):l.keepDirty?t.dirtyFields:{},touchedFields:l.keepTouched?t.touchedFields:{},errors:l.keepErrors?t.errors:{},isSubmitSuccessful:l.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1})},Ye=(r,l)=>qe(G(r)?r(a):r,l),Ot=(r,l={})=>{const o=y(i,r),m=o&&o._f;if(m){const f=m.refs?m.refs[0]:m.ref;f.focus&&(f.focus(),l.shouldSelect&&G(f.select)&&f.select())}},Ut=r=>{t={...t,...r}},ze={control:{register:De,unregister:Se,getFieldState:Pe,handleSubmit:We,setError:je,_subscribe:Be,_runSchema:J,_getWatch:C,_getDirty:V,_setValid:j,_setFieldArray:X,_setDisabledField:$e,_setErrors:N,_getFieldArray:W,_reset:qe,_resetDefaultValues:()=>G(s.defaultValues)&&s.defaultValues().then(r=>{Ye(r,s.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:It,_subjects:g,_proxyFormState:x,get _fields(){return i},get _formValues(){return a},get _state(){return d},set _state(r){d=r},get _defaultValues(){return n},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:Tt,trigger:Ee,register:De,handleSubmit:We,watch:Mt,setValue:re,getValues:Ue,reset:Ye,resetField:Nt,clearErrors:Lt,unregister:Se,setError:je,setFocus:Ot,getFieldState:Pe};return{...ze,formControl:ze}}function _r(e={}){const s=w.useRef(void 0),t=w.useRef(void 0),[i,n]=w.useState({isDirty:!1,isValidating:!1,isLoading:G(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:G(e.defaultValues)?void 0:e.defaultValues});s.current||(s.current={...e.formControl?e.formControl:ur(e),formState:i},e.formControl&&e.defaultValues&&!G(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=s.current.control;return a._options=e,w.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>n({...a._formState}),reRenderRoot:!0}),[a]),w.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),w.useEffect(()=>{if(a._proxyFormState.isDirty){const d=a._getDirty();d!==i.isDirty&&a._subjects.state.next({isDirty:d})}},[a,i.isDirty]),w.useEffect(()=>{e.values&&!se(e.values,t.current)?(a._reset(e.values,a._options.resetOptions),t.current=e.values,n(d=>({...d}))):a._resetDefaultValues()},[e.values,a]),w.useEffect(()=>{e.errors&&!B(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),w.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),w.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),s.current.formState=yt(i,a),s.current}const Vr=Yt,_t=k.createContext({}),wr=({name:e,label:s="",helperText:t="",hasClear:i=!1,clearIcon:n=null,helperIcon:a=null,disabled:d=!1,hideInsideInfoPoint:c=!1,rules:F={},clearFn:_,children:x,showError:b,classNames:g})=>D.jsx(_t.Provider,{value:{name:e,label:s,hasClear:i,clearFn:_,clearIcon:n,helperText:t,hideInsideInfoPoint:c,disabled:d,rules:F,showError:b,classNames:g,helperIcon:a},children:x}),Vt=k.createContext({}),wt=k.forwardRef((e,s)=>{const t=k.useId();return D.jsx(Vt.Provider,{value:{id:t},children:D.jsx(at,{ref:s,...e})})});wt.displayName="FlxFormItem";const dr=k.memo(wt);dr.displayName="MemoFlxFormItem";const we=()=>{const{name:e,...s}=k.useContext(_t),t=k.useContext(Vt);if(!s)throw new Error("useFormField should be used within <FlxFormField>");const{id:i}=t;return{id:i,name:e,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...s}},fr=k.forwardRef(({error:e,...s},t)=>{const{formItemId:i,formDescriptionId:n,formMessageId:a}=we();return D.jsx(at,{ref:t,id:i,"aria-describedby":e?`${n} ${a}`:`${n}`,"aria-invalid":!!e,...s})});fr.displayName="FlxFormControl";const pt=k.forwardRef(({className:e,disabled:s,children:t,...i},n)=>{const{formItemId:a}=we();return D.jsx("label",{ref:n,className:ne(["flx-form-field-label",{disabled:s},e]),htmlFor:a,dangerouslySetInnerHTML:{__html:t},...i})});pt.displayName="FlxFormLabel";const At=k.memo(pt);At.displayName="MemoFlxFormLabel";const pe=k.forwardRef(({children:e,className:s,position:t="right",...i},n)=>{const a=k.useRef(null),[d,c]=k.useState({}),[F,_]=k.useState(!1),x=k.useCallback(b=>{const g=b.getBoundingClientRect(),S={position:"absolute",minWidth:`${g.width}px`};switch(t){case"top":S.top=`${g.top+window.scrollY-8}px`,S.left=`${g.left+g.width/2}px`,S.transform="translateX(-50%) translateY(-100%)";break;case"bottom":S.top=`${g.bottom+window.scrollY+8}px`,S.left=`${g.left+g.width/2}px`,S.transform="translateX(-50%)";break;case"left":S.top=`${g.top+window.scrollY+g.height/2}px`,S.left=`${g.left-8}px`,S.transform="translateX(-100%) translateY(-50%)";break;case"right":S.top=`${g.top+window.scrollY+g.height/2}px`,S.left=`${g.right+8}px`,S.transform="translateY(-50%)";break}c(S)},[t]);return k.useEffect(()=>{var M;const b=(M=a.current)==null?void 0:M.parentElement;if(!b)return;const g=()=>{x(b),_(!0)},S=()=>_(!1),H=()=>x(b);return b.addEventListener("mouseenter",g),b.addEventListener("mouseleave",S),x(b),window.addEventListener("resize",H),()=>{b.removeEventListener("mouseenter",g),b.removeEventListener("mouseleave",S),window.removeEventListener("resize",H)}},[t,x]),D.jsx("div",{className:"flx-tooltip-wrapper",ref:a,children:F&&D.jsx(Ht,{children:D.jsx("div",{ref:n,className:ne("flx-tooltip",`flx-tooltip-${t}`,s),style:d,...i,children:e})})})});pe.displayName="FlxTooltip";const cr=k.memo(pe);cr.displayName="MemoFlxTooltip";const Et=k.forwardRef(({children:e,className:s,iconComponent:t,...i},n)=>D.jsxs("div",{ref:n,className:ne(["flx-info-helper",s]),...i,children:[D.jsx("div",{className:"flx-icon-with-default",children:D.jsx("div",{className:"flx-content-icon",children:t??D.jsx($t,{name:"info"})})}),D.jsx(pe,{className:ne(["flx-tooltip",s]),position:"right",children:e})]}));Et.displayName="FlxFormInfoHelper";const St=k.memo(Et);St.displayName="MemoFlxFormInfoHelper";const Dt=k.forwardRef(({className:e,...s},t)=>{const{formDescriptionId:i}=we();return D.jsx("div",{ref:t,id:i,className:ne(["flx-form-field-helper",e]),...s})});Dt.displayName="FlxFormHelper";const kt=k.memo(Dt);kt.displayName="MemoFlxFormHelper";const Ct=k.forwardRef(({className:e,children:s,error:t,errorDisplayType:i="inline",...n},a)=>{const d=k.useRef(null),c=t?t.message:s;return i==="tooltip"?c?D.jsx(pe,{className:ne("flx-form-field-error","tooltip",e),position:"top",children:c}):null:D.jsx("div",{ref:d,className:"flx-error-wrapper",children:c?D.jsx("div",{ref:a,className:ne("flx-form-field-error","inline",e),...n,children:c}):null})});Ct.displayName="FlxFormError";const Rt=k.memo(Ct);Rt.displayName="MemoFlxFormError";const pr=({children:e,error:s,errorDisplayType:t="inline"})=>{const{hideInsideInfoPoint:i,helperIcon:n,helperText:a,label:d,disabled:c,formMessageId:F,classNames:_}=we();return D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:"flx-label-container",children:[D.jsx(At,{className:_==null?void 0:_.label,disabled:c,children:d}),i?D.jsx(St,{iconComponent:n,className:_==null?void 0:_.helperTooltip,children:a}):null]}),e,!s&&!i&&a?D.jsx(kt,{className:_==null?void 0:_.helper,children:a}):null,D.jsx(Rt,{id:F,className:_==null?void 0:_.error,error:s,errorDisplayType:t})]})};export{br as C,Vr as F,we as a,wt as b,fr as c,_r as d,wr as e,pr as f,Ie as u};
