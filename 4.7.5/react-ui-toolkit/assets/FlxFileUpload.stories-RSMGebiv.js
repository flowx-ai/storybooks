import{j as i}from"./jsx-runtime-CBDCb4rg.js";import{r as c}from"./index-B-o1Wr-g.js";import{c as z}from"./clsx-B-dksMZM.js";import{M as S}from"./Button-DnrjwBWn.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-qMorCPSe.js";const T=(t,e)=>e&&t.size>e?{fileSizeExceeded:"File size exceeded"}:{},C=(t,e)=>{if(!e||e==="*/*")return{};const l=e.split(",").map(s=>s.trim());for(const s of l){if(s===t.type)return{};if(s.includes("*")&&s.split("/")[0]===t.type.split("/")[0])return{};if(t.name.endsWith(s))return{}}return{invalidFileType:"File type is invalid"}},N=t=>!t||t==="*/*"?t:t.split(",").map(e=>(e=e.trim(),e.startsWith(".")||e.includes("/")||e.includes("*")?e:`.${e}`)).join(","),u=c.forwardRef(({className:t,label:e,accept:l="*/*",maxFileSize:s,dataTestId:f,buttonVariant:n,onFileSelect:o,...a},d)=>{const r=c.useRef(null),y=N(l),U=()=>{r.current&&r.current.click()},b=j=>{var x;const p=(x=j.currentTarget.files)==null?void 0:x[0];p&&(o==null||o({file:p,errors:{...T(p,s),...C(p,l)}}))};return i.jsxs(i.Fragment,{children:[i.jsx(S,{"data-testid":f,className:z("flx-fileupload-button",t),ref:d,onClick:U,variant:n,...a,children:e}),i.jsx("input",{type:"file",accept:y,ref:r,onChange:b})]})});u.displayName="FlxFileUpload";const w=c.memo(u);w.displayName="MemoFlxFileUpload";const R=({label:t,buttonVariant:e,disabled:l,width:s,fontFamily:f})=>{var a,d;const[n,o]=c.useState({errors:{}});return i.jsxs("div",{className:"flx-default-theme",children:[i.jsx(u,{className:"custom-class",buttonVariant:e,disabled:l,style:{width:s&&s>0?`${s}px`:"auto","--flxTheme-button-fontFamily":f},label:t,onFileSelect:r=>o(r)}),i.jsx("hr",{}),i.jsxs("p",{children:["Uploaded file: ",(a=n.file)==null?void 0:a.name," (size: ",(d=n.file)==null?void 0:d.size," kb)"]})]})},O={title:"FileUpload",component:u,argTypes:{asChild:{table:{disable:!0}},iconComponent:{table:{disable:!0}},buttonVariant:{options:["fill","ghost","text"],mapping:{none:null,fill:"fill",ghost:"ghost",text:"text"},control:{type:"select"}},fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:R,parameters:{design:{type:"figma",url:"https://www.figma.com/file/2n2umsSLJbNigLx43nseml/FlowX-Design-System?node-id=5599%3A5879"}}},k={args:{label:"Upload",buttonVariant:"ghost",fontFamily:"Open Sans",width:0,disabled:!1,maxFileSize:0,accept:""}},m={...k};var F,h,g;m.parameters={...m.parameters,docs:{...(F=m.parameters)==null?void 0:F.docs,source:{originalSource:`{
  ...FileUploadTemplate
} satisfies Story`,...(g=(h=m.parameters)==null?void 0:h.docs)==null?void 0:g.source}}};const L=["FileUpload"];export{m as FileUpload,L as __namedExportsOrder,O as default};
