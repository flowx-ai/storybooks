import{j as e}from"./jsx-runtime-DztICxWZ.js";import{c as re}from"./clsx-B-dksMZM.js";import{r as a}from"./index-Bv9Y92EF.js";import{M as te,f as le,g as ie,h as de,i as oe,j as se}from"./Accordion-CNPuleA-.js";import{M as f}from"./Icon-B96PK6rJ.js";import{M as ue}from"./Button-DN-XrF-T.js";import{M as fe}from"./Modal-DyDzvFKA.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-CluZi8Ot.js";import"./index-BaC3dPEX.js";import"./index-CsL57FjJ.js";import"./Card-B78pYT27.js";import"./tslib.es6-DeVLoAT7.js";import"./Portal-B87B-olk.js";const K=({viewerId:l=`pdfjs-viewer-ID${Date.now()}`,viewerFolder:w="assets/pdfjs/web/viewer.html",externalWindow:t=!1,target:d="_blank",showSpinner:v=!0,downloadFileName:n,openFile:V=!0,download:i=!0,startDownload:u,viewBookmark:U=!0,print:g=!0,startPrint:$,fullScreen:A=!0,find:L=!0,zoom:F,nameddest:E,pagemode:N,lastPage:b,rotatecw:C,rotateccw:c,cursor:R,scroll:k,spread:m,locale:q,useOnlyCssZoom:D=!1,errorOverride:P=!1,errorAppend:_=!0,errorMessage:h,diagnosticLogs:S=!0,externalWindowOptions:ee,onBeforePrint:B,onAfterPrint:T,onDocumentLoad:J,onPageChange:X,pdfSrc:o,page:W})=>{const Z=a.useRef(null),M=a.useRef(),[j,ne]=a.useState(null),z=a.useCallback(p=>{const{data:r}=p;if(r&&r.viewerId&&r.event&&r.viewerId===l){const y=r.event,I=r.param;y==="beforePrint"&&B?B():y==="afterPrint"&&T?T():y==="pagesLoaded"&&J?J(I):y==="pageChange"&&X&&X(I)}},[l,B,T,J,X]);a.useEffect(()=>(window.addEventListener("message",z,!1),()=>{window.removeEventListener("message",z,!1)}),[z]),a.useEffect(()=>(t||ae(),()=>{j&&j.close()}),[o,t]),a.useEffect(()=>()=>{M.current&&M.current()},[]);const ae=()=>{var I;if(!o)return;let p;if(o instanceof Blob){const s=URL.createObjectURL(o);p=encodeURIComponent(s),M.current=()=>URL.revokeObjectURL(s)}else if(o instanceof Uint8Array){const s=new Blob([o],{type:"application/pdf"}),H=URL.createObjectURL(s);p=encodeURIComponent(H),M.current=()=>URL.revokeObjectURL(H)}else p=o;let r=w;r+=`?file=${p}`;const y=[`viewerId=${l}`,n&&`fileName=${n}`,`openFile=${V}`,`download=${i}`,u&&`startDownload=${u}`,`viewBookmark=${U}`,`print=${g}`,$&&`startPrint=${$}`,`fullScreen=${A}`,`find=${L}`,b&&`lastpage=${b}`,C&&`rotatecw=${C}`,c&&`rotateccw=${c}`,R&&`cursor=${R}`,k&&`scroll=${k}`,m&&`spread=${m}`,q&&`locale=${q}`,`useOnlyCssZoom=${D}`,h&&`errorMessage=${h}`,P&&`errorOverride=${P}`,_&&`errorAppend=${_}`,W&&`page=${W}`,F&&`zoom=${F}`,E&&`nameddest=${E}`,N&&`pagemode=${N}`];if(r+="&"+y.filter(Boolean).join("&"),t){if(!j||j.closed){const s=window.open("",d,ee||"");if(s==null){S&&console.error('For "externalWindow = true", pop-ups should be enabled.');return}ne(s),v&&s.document.write(`
            <style>
              .loader {
                position: fixed;
                left: 40%;
                top: 40%;
                border: 16px solid #f3f3f3;
                border-radius: 50%;
                border-top: 16px solid #3498db;
                width: 120px;
                height: 120px;
                animation: spin 2s linear infinite;
              }
              @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            </style>
            <div class="loader"></div>
          `)}j.location.href=r}else Z.current&&((I=Z.current.contentWindow)==null||I.location.replace(r))};return e.jsx("iframe",{title:"pdfjs-viewer",hidden:t||!t&&!o,ref:Z,width:"100%",height:"100%"})};try{K.displayName="PdfJsViewer",K.__docgenInfo={description:"",displayName:"PdfJsViewer",props:{viewerId:{defaultValue:{value:"`pdfjs-viewer-ID${Date.now()}`"},description:"",name:"viewerId",required:!1,type:{name:"string | undefined"}},viewerFolder:{defaultValue:{value:"assets/pdfjs/web/viewer.html"},description:"",name:"viewerFolder",required:!1,type:{name:"string | undefined"}},externalWindow:{defaultValue:{value:"false"},description:"",name:"externalWindow",required:!1,type:{name:"boolean | undefined"}},target:{defaultValue:{value:"_blank"},description:"",name:"target",required:!1,type:{name:"string | undefined"}},showSpinner:{defaultValue:{value:"true"},description:"",name:"showSpinner",required:!1,type:{name:"boolean | undefined"}},downloadFileName:{defaultValue:null,description:"",name:"downloadFileName",required:!1,type:{name:"string | undefined"}},openFile:{defaultValue:{value:"true"},description:"",name:"openFile",required:!1,type:{name:"boolean | undefined"}},download:{defaultValue:{value:"true"},description:"",name:"download",required:!1,type:{name:"boolean | undefined"}},startDownload:{defaultValue:null,description:"",name:"startDownload",required:!1,type:{name:"boolean | undefined"}},viewBookmark:{defaultValue:{value:"true"},description:"",name:"viewBookmark",required:!1,type:{name:"boolean | undefined"}},print:{defaultValue:{value:"true"},description:"",name:"print",required:!1,type:{name:"boolean | undefined"}},startPrint:{defaultValue:null,description:"",name:"startPrint",required:!1,type:{name:"boolean | undefined"}},fullScreen:{defaultValue:{value:"true"},description:"",name:"fullScreen",required:!1,type:{name:"boolean | undefined"}},find:{defaultValue:{value:"true"},description:"",name:"find",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!1,type:{name:"string | undefined"}},nameddest:{defaultValue:null,description:"",name:"nameddest",required:!1,type:{name:"string | undefined"}},pagemode:{defaultValue:null,description:"",name:"pagemode",required:!1,type:{name:"string | undefined"}},lastPage:{defaultValue:null,description:"",name:"lastPage",required:!1,type:{name:"boolean | undefined"}},rotatecw:{defaultValue:null,description:"",name:"rotatecw",required:!1,type:{name:"boolean | undefined"}},rotateccw:{defaultValue:null,description:"",name:"rotateccw",required:!1,type:{name:"boolean | undefined"}},cursor:{defaultValue:null,description:"",name:"cursor",required:!1,type:{name:"string | undefined"}},scroll:{defaultValue:null,description:"",name:"scroll",required:!1,type:{name:"string | undefined"}},spread:{defaultValue:null,description:"",name:"spread",required:!1,type:{name:"string | undefined"}},locale:{defaultValue:null,description:"",name:"locale",required:!1,type:{name:"string | undefined"}},useOnlyCssZoom:{defaultValue:{value:"false"},description:"",name:"useOnlyCssZoom",required:!1,type:{name:"boolean | undefined"}},errorOverride:{defaultValue:{value:"false"},description:"",name:"errorOverride",required:!1,type:{name:"boolean | undefined"}},errorAppend:{defaultValue:{value:"true"},description:"",name:"errorAppend",required:!1,type:{name:"boolean | undefined"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string | undefined"}},diagnosticLogs:{defaultValue:{value:"true"},description:"",name:"diagnosticLogs",required:!1,type:{name:"boolean | undefined"}},externalWindowOptions:{defaultValue:null,description:"",name:"externalWindowOptions",required:!1,type:{name:"string | undefined"}},onBeforePrint:{defaultValue:null,description:"",name:"onBeforePrint",required:!1,type:{name:"(() => void) | undefined"}},onAfterPrint:{defaultValue:null,description:"",name:"onAfterPrint",required:!1,type:{name:"(() => void) | undefined"}},onDocumentLoad:{defaultValue:null,description:"",name:"onDocumentLoad",required:!1,type:{name:"((param: any) => void) | undefined"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!1,type:{name:"((param: any) => void) | undefined"}},pdfSrc:{defaultValue:null,description:"",name:"pdfSrc",required:!1,type:{name:"string | Blob | Uint8Array<ArrayBufferLike> | null | undefined"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number | undefined"}}}}}catch{}const x=a.forwardRef(({title:l,subTitle:w,file:t,hasAccordion:d=!0,isExpanded:v=!0,previewInModal:n=!1,className:V,style:i,loading:u,error:U,retry:g,dataUniqueId:$,dataTestId:A,documentIcon:L,emptyIcon:F,errorIcon:E,reloadIcon:N,viewIcon:b},C)=>{const[c,R]=a.useState(v),[k,m]=a.useState(!1),q=()=>{m(!0)},D=a.useCallback(S=>{S.key==="Enter"&&q()},[]),P=a.useMemo(()=>{if(n)return()=>e.jsx("div",{tabIndex:0,role:"button",onClick:q,onKeyDown:D,className:"flx-document-preview-view",children:b||e.jsx(f,{name:"eye",className:"flx-document-action-icon"})});if(!d)return()=>e.jsx(f,{})},[D,d,n,b]),_=()=>{!d||n||R(!c)},h=()=>u?e.jsx("div",{className:"flx-viewer-container flx-not-loaded",style:i,children:e.jsx(f,{name:"documentPreviewLoading",className:"flx-document-loading"})}):U?e.jsxs("div",{className:"flx-viewer-container flx-document-error",style:i,children:[E||e.jsx(f,{name:"documentPreviewError"}),e.jsx(ue,{className:"flx-document-preview-retry",variant:"text",onClick:()=>g==null?void 0:g(),icon:"left",iconComponent:N||e.jsx(f,{name:"retry"}),children:"Retry loading"})]}):t?e.jsx(K,{pdfSrc:t}):e.jsx("div",{className:"flx-viewer-container flx-document-empty",style:i,children:F||e.jsx(f,{name:"documentPreviewEmpty"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:re([V,"flx-document-preview",{"flx-viewer-closed":n||!c}]),ref:C,"data-uniqueid":$,"data-testid":A,children:e.jsx(te,{className:"document-viewer-accordion",children:e.jsxs(le,{defaultOpened:!n&&c,alwaysOpened:!d&&n,disabled:n,children:[e.jsxs(ie,{children:[e.jsx(de,{caretIcon:P,onClick:_,children:e.jsxs("div",{className:"flx-document-preview-title",children:[e.jsx("div",{className:"flx-document-preview-icon",children:L||e.jsx(f,{name:"documents"})}),l]})}),e.jsx(oe,{alwaysDisplay:n,children:w})]}),e.jsx(se,{children:e.jsx("div",{className:"flx-viewer-container",style:i,children:h()})})]})})}),n&&e.jsx(fe,{dismissible:!0,className:"flx-document-viewer-modal",isOpen:k,onClose:()=>m(!1),onBackdropClick:()=>m(!1),children:h()})]})});x.displayName="FlxDocumentViewer";const ce=a.memo(x);ce.displayName="MemoFlxDocumentViewer";try{x.displayName="FlxDocumentViewer",x.__docgenInfo={description:"",displayName:"FlxDocumentViewer",props:{dataUniqueId:{defaultValue:null,description:"",name:"dataUniqueId",required:!1,type:{name:"string | undefined"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},hasAccordion:{defaultValue:{value:"true"},description:"",name:"hasAccordion",required:!1,type:{name:"boolean | undefined"}},previewInModal:{defaultValue:{value:"false"},description:"",name:"previewInModal",required:!1,type:{name:"boolean | undefined"}},isExpanded:{defaultValue:{value:"true"},description:"",name:"isExpanded",required:!1,type:{name:"boolean | undefined"}},file:{defaultValue:null,description:"",name:"file",required:!1,type:{name:"string | Blob | Uint8Array<ArrayBufferLike> | null | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean | undefined"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"boolean | undefined"}},retry:{defaultValue:null,description:"",name:"retry",required:!1,type:{name:"(() => void) | undefined"}},documentIcon:{defaultValue:null,description:"",name:"documentIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},emptyIcon:{defaultValue:null,description:"",name:"emptyIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},errorIcon:{defaultValue:null,description:"",name:"errorIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},reloadIcon:{defaultValue:null,description:"",name:"reloadIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},viewIcon:{defaultValue:null,description:"",name:"viewIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},shareIcon:{defaultValue:null,description:"",name:"shareIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}}}}}catch{}const Ee={title:"DocumentViewer",component:x,argTypes:{},render:({title:l,subTitle:w,file:t,loading:d,error:v,hasAccordion:n,previewInModal:V,width:i,height:u})=>e.jsx("div",{className:"flx-default-theme",children:e.jsx(x,{title:l,subTitle:w,file:t,loading:d,error:v,hasAccordion:n,previewInModal:V,style:{width:i>0?`${i}px`:"auto",height:u>0?`${u}px`:"auto"}})})},me={args:{title:"Title",subTitle:"Sub title",file:"/assets/sample.pdf",loading:!1,error:!1,hasAccordion:!0,previewInModal:!1,width:0,height:500}},O={...me};var G,Q,Y;O.parameters={...O.parameters,docs:{...(G=O.parameters)==null?void 0:G.docs,source:{originalSource:`{
  ...DocumentViewerTemplate
} satisfies Story`,...(Y=(Q=O.parameters)==null?void 0:Q.docs)==null?void 0:Y.source}}};const Ne=["DocumentViewer"];export{O as DocumentViewer,Ne as __namedExportsOrder,Ee as default};
