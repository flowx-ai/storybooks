import{j as e}from"./jsx-runtime-DztICxWZ.js";import{c as re}from"./clsx-B-dksMZM.js";import{r as a}from"./index-Bv9Y92EF.js";import{M as te,f as le,g as ie,h as de,i as oe,j as se}from"./Accordion-BjGNnZh3.js";import{M as f}from"./Icon-DBJcy2f-.js";import{M as ue}from"./Button-B9BL4a0C.js";import{M as fe}from"./Modal-B3JNsH2N.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-CluZi8Ot.js";import"./index-BaC3dPEX.js";import"./index-CsL57FjJ.js";import"./Card-DsNGtt2e.js";import"./tslib.es6-DeVLoAT7.js";import"./Portal-B87B-olk.js";const W=({viewerId:l=`pdfjs-viewer-ID${Date.now()}`,viewerFolder:w="assets/pdfjs/web/viewer.html",externalWindow:t=!1,target:d="_blank",showSpinner:v=!0,downloadFileName:n,openFile:g=!0,download:i=!0,startDownload:u,viewBookmark:A=!0,print:V=!0,startPrint:I,fullScreen:L=!0,find:S=!0,zoom:$,nameddest:F,pagemode:E,lastPage:q,rotatecw:N,rotateccw:C,cursor:c,scroll:R,spread:k,locale:m,useOnlyCssZoom:D=!1,errorOverride:b=!1,errorAppend:P=!0,errorMessage:_,diagnosticLogs:M=!0,externalWindowOptions:B,onBeforePrint:T,onAfterPrint:J,onDocumentLoad:X,onPageChange:Z,pdfSrc:o,page:H})=>{const z=a.useRef(null),O=a.useRef(),[h,ne]=a.useState(null),K=a.useCallback(p=>{const{data:r}=p;if(r&&r.viewerId&&r.event&&r.viewerId===l){const y=r.event,j=r.param;y==="beforePrint"&&T?T():y==="afterPrint"&&J?J():y==="pagesLoaded"&&X?X(j):y==="pageChange"&&Z&&Z(j)}},[l,T,J,X,Z]);a.useEffect(()=>(window.addEventListener("message",K,!1),()=>{window.removeEventListener("message",K,!1)}),[K]),a.useEffect(()=>(t||ae(),()=>{h&&h.close()}),[o,t]),a.useEffect(()=>()=>{O.current&&O.current()},[]);const ae=()=>{var j;if(!o)return;let p;if(o instanceof Blob){const s=URL.createObjectURL(o);p=encodeURIComponent(s),O.current=()=>URL.revokeObjectURL(s)}else if(o instanceof Uint8Array){const s=new Blob([o],{type:"application/pdf"}),G=URL.createObjectURL(s);p=encodeURIComponent(G),O.current=()=>URL.revokeObjectURL(G)}else p=o;let r=w;r+=`?file=${p}`;const y=[`viewerId=${l}`,n&&`fileName=${n}`,`openFile=${g}`,`download=${i}`,u&&`startDownload=${u}`,`viewBookmark=${A}`,`print=${V}`,I&&`startPrint=${I}`,`fullScreen=${L}`,`find=${S}`,q&&`lastpage=${q}`,N&&`rotatecw=${N}`,C&&`rotateccw=${C}`,c&&`cursor=${c}`,R&&`scroll=${R}`,k&&`spread=${k}`,m&&`locale=${m}`,`useOnlyCssZoom=${D}`,_&&`errorMessage=${_}`,b&&`errorOverride=${b}`,P&&`errorAppend=${P}`,H&&`page=${H}`,$&&`zoom=${$}`,F&&`nameddest=${F}`,E&&`pagemode=${E}`];if(r+="&"+y.filter(Boolean).join("&"),t){if(!h||h.closed){const s=window.open("",d,B||"");if(s==null){M&&console.error('For "externalWindow = true", pop-ups should be enabled.');return}ne(s),v&&s.document.write(`
            <style>
              .loader {
                position: fixed;
                left: 40%;
                top: 40%;
                border: 16px solid #f3f3f3;
                border-radius: 50%;
                border-top: 16px solid #3498db;
                width: 120px;
                height: 120px;
                animation: spin 2s linear infinite;
              }
              @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            </style>
            <div class="loader"></div>
          `)}h.location.href=r}else z.current&&((j=z.current.contentWindow)==null||j.location.replace(r))};return e.jsx("iframe",{title:"pdfjs-viewer",hidden:t||!t&&!o,ref:z,width:"100%",height:"100%"})};try{W.displayName="PdfJsViewer",W.__docgenInfo={description:"",displayName:"PdfJsViewer",props:{viewerId:{defaultValue:{value:"`pdfjs-viewer-ID${Date.now()}`"},description:"",name:"viewerId",required:!1,type:{name:"string | undefined"}},viewerFolder:{defaultValue:{value:"assets/pdfjs/web/viewer.html"},description:"",name:"viewerFolder",required:!1,type:{name:"string | undefined"}},externalWindow:{defaultValue:{value:"false"},description:"",name:"externalWindow",required:!1,type:{name:"boolean | undefined"}},target:{defaultValue:{value:"_blank"},description:"",name:"target",required:!1,type:{name:"string | undefined"}},showSpinner:{defaultValue:{value:"true"},description:"",name:"showSpinner",required:!1,type:{name:"boolean | undefined"}},downloadFileName:{defaultValue:null,description:"",name:"downloadFileName",required:!1,type:{name:"string | undefined"}},openFile:{defaultValue:{value:"true"},description:"",name:"openFile",required:!1,type:{name:"boolean | undefined"}},download:{defaultValue:{value:"true"},description:"",name:"download",required:!1,type:{name:"boolean | undefined"}},startDownload:{defaultValue:null,description:"",name:"startDownload",required:!1,type:{name:"boolean | undefined"}},viewBookmark:{defaultValue:{value:"true"},description:"",name:"viewBookmark",required:!1,type:{name:"boolean | undefined"}},print:{defaultValue:{value:"true"},description:"",name:"print",required:!1,type:{name:"boolean | undefined"}},startPrint:{defaultValue:null,description:"",name:"startPrint",required:!1,type:{name:"boolean | undefined"}},fullScreen:{defaultValue:{value:"true"},description:"",name:"fullScreen",required:!1,type:{name:"boolean | undefined"}},find:{defaultValue:{value:"true"},description:"",name:"find",required:!1,type:{name:"boolean | undefined"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!1,type:{name:"string | undefined"}},nameddest:{defaultValue:null,description:"",name:"nameddest",required:!1,type:{name:"string | undefined"}},pagemode:{defaultValue:null,description:"",name:"pagemode",required:!1,type:{name:"string | undefined"}},lastPage:{defaultValue:null,description:"",name:"lastPage",required:!1,type:{name:"boolean | undefined"}},rotatecw:{defaultValue:null,description:"",name:"rotatecw",required:!1,type:{name:"boolean | undefined"}},rotateccw:{defaultValue:null,description:"",name:"rotateccw",required:!1,type:{name:"boolean | undefined"}},cursor:{defaultValue:null,description:"",name:"cursor",required:!1,type:{name:"string | undefined"}},scroll:{defaultValue:null,description:"",name:"scroll",required:!1,type:{name:"string | undefined"}},spread:{defaultValue:null,description:"",name:"spread",required:!1,type:{name:"string | undefined"}},locale:{defaultValue:null,description:"",name:"locale",required:!1,type:{name:"string | undefined"}},useOnlyCssZoom:{defaultValue:{value:"false"},description:"",name:"useOnlyCssZoom",required:!1,type:{name:"boolean | undefined"}},errorOverride:{defaultValue:{value:"false"},description:"",name:"errorOverride",required:!1,type:{name:"boolean | undefined"}},errorAppend:{defaultValue:{value:"true"},description:"",name:"errorAppend",required:!1,type:{name:"boolean | undefined"}},errorMessage:{defaultValue:null,description:"",name:"errorMessage",required:!1,type:{name:"string | undefined"}},diagnosticLogs:{defaultValue:{value:"true"},description:"",name:"diagnosticLogs",required:!1,type:{name:"boolean | undefined"}},externalWindowOptions:{defaultValue:null,description:"",name:"externalWindowOptions",required:!1,type:{name:"string | undefined"}},onBeforePrint:{defaultValue:null,description:"",name:"onBeforePrint",required:!1,type:{name:"(() => void) | undefined"}},onAfterPrint:{defaultValue:null,description:"",name:"onAfterPrint",required:!1,type:{name:"(() => void) | undefined"}},onDocumentLoad:{defaultValue:null,description:"",name:"onDocumentLoad",required:!1,type:{name:"((param: any) => void) | undefined"}},onPageChange:{defaultValue:null,description:"",name:"onPageChange",required:!1,type:{name:"((param: any) => void) | undefined"}},pdfSrc:{defaultValue:null,description:"",name:"pdfSrc",required:!1,type:{name:"string | Blob | Uint8Array<ArrayBufferLike> | null | undefined"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number | undefined"}}}}}catch{}const x=a.forwardRef(({title:l,subTitle:w,file:t,hasAccordion:d=!0,isExpanded:v=!0,previewInModal:n=!1,className:g,style:i,loading:u,error:A,retry:V,dataUniqueId:I,dataTestId:L,documentIcon:S,emptyIcon:$,errorIcon:F,reloadIcon:E,viewIcon:q,language:N},C)=>{const[c,R]=a.useState(v),[k,m]=a.useState(!1),D=()=>{m(!0)},b=a.useCallback(B=>{B.key==="Enter"&&D()},[]),P=a.useMemo(()=>{if(n)return()=>e.jsx("div",{tabIndex:0,role:"button",onClick:D,onKeyDown:b,className:"flx-document-preview-view",children:q||e.jsx(f,{name:"eye",className:"flx-document-action-icon"})});if(!d)return()=>e.jsx(f,{})},[b,d,n,q]),_=()=>{!d||n||R(!c)},M=()=>u?e.jsx("div",{className:"flx-viewer-container flx-not-loaded",style:i,children:e.jsx(f,{name:"documentPreviewLoading",className:"flx-document-loading"})}):A?e.jsxs("div",{className:"flx-viewer-container flx-document-error",style:i,children:[F||e.jsx(f,{name:"documentPreviewError"}),e.jsx(ue,{className:"flx-document-preview-retry",variant:"text",onClick:()=>V==null?void 0:V(),icon:"left",iconComponent:E||e.jsx(f,{name:"retry"}),children:"Retry loading"})]}):t?e.jsx(W,{pdfSrc:t,locale:N}):e.jsx("div",{className:"flx-viewer-container flx-document-empty",style:i,children:$||e.jsx(f,{name:"documentPreviewEmpty"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:re([g,"flx-document-preview",{"flx-viewer-closed":n||!c}]),ref:C,"data-uniqueid":I,"data-testid":L,children:e.jsx(te,{className:"document-viewer-accordion",children:e.jsxs(le,{defaultOpened:!n&&c,alwaysOpened:!d&&n,disabled:n,children:[e.jsxs(ie,{children:[e.jsx(de,{caretIcon:P,onClick:_,children:e.jsxs("div",{className:"flx-document-preview-title",children:[e.jsx("div",{className:"flx-document-preview-icon",children:S||e.jsx(f,{name:"documents"})}),l]})}),e.jsx(oe,{alwaysDisplay:n,children:w})]}),e.jsx(se,{children:e.jsx("div",{className:"flx-viewer-container",style:i,children:M()})})]})})}),n&&e.jsx(fe,{dismissible:!0,className:"flx-document-viewer-modal",isOpen:k,onClose:()=>m(!1),onBackdropClick:()=>m(!1),children:M()})]})});x.displayName="FlxDocumentViewer";const ce=a.memo(x);ce.displayName="MemoFlxDocumentViewer";try{x.displayName="FlxDocumentViewer",x.__docgenInfo={description:"",displayName:"FlxDocumentViewer",props:{dataUniqueId:{defaultValue:null,description:"",name:"dataUniqueId",required:!1,type:{name:"string | undefined"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},hasAccordion:{defaultValue:{value:"true"},description:"",name:"hasAccordion",required:!1,type:{name:"boolean | undefined"}},previewInModal:{defaultValue:{value:"false"},description:"",name:"previewInModal",required:!1,type:{name:"boolean | undefined"}},isExpanded:{defaultValue:{value:"true"},description:"",name:"isExpanded",required:!1,type:{name:"boolean | undefined"}},file:{defaultValue:null,description:"",name:"file",required:!1,type:{name:"string | Blob | Uint8Array<ArrayBufferLike> | null | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean | undefined"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"boolean | undefined"}},retry:{defaultValue:null,description:"",name:"retry",required:!1,type:{name:"(() => void) | undefined"}},documentIcon:{defaultValue:null,description:"",name:"documentIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},emptyIcon:{defaultValue:null,description:"",name:"emptyIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},errorIcon:{defaultValue:null,description:"",name:"errorIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},reloadIcon:{defaultValue:null,description:"",name:"reloadIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},viewIcon:{defaultValue:null,description:"",name:"viewIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},shareIcon:{defaultValue:null,description:"",name:"shareIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"string | undefined"}}}}}catch{}const Ee={title:"DocumentViewer",component:x,argTypes:{},render:({title:l,subTitle:w,file:t,loading:d,error:v,hasAccordion:n,previewInModal:g,width:i,height:u})=>e.jsx("div",{className:"flx-default-theme",children:e.jsx(x,{title:l,subTitle:w,file:t,loading:d,error:v,hasAccordion:n,previewInModal:g,style:{width:i>0?`${i}px`:"auto",height:u>0?`${u}px`:"auto"}})})},me={args:{title:"Title",subTitle:"Sub title",file:"/assets/sample.pdf",loading:!1,error:!1,hasAccordion:!0,previewInModal:!1,width:0,height:500}},U={...me};var Q,Y,ee;U.parameters={...U.parameters,docs:{...(Q=U.parameters)==null?void 0:Q.docs,source:{originalSource:`{
  ...DocumentViewerTemplate
} satisfies Story`,...(ee=(Y=U.parameters)==null?void 0:Y.docs)==null?void 0:ee.source}}};const Ne=["DocumentViewer"];export{U as DocumentViewer,Ne as __namedExportsOrder,Ee as default};
