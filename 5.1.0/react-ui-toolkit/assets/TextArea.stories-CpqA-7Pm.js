import{j as r}from"./jsx-runtime-DztICxWZ.js";import{r as t}from"./index-Bv9Y92EF.js";import{u as S,F as V,a as v,b as M,C as B,c as $,d as L,e as O,f as P}from"./InfoTooltip-CNkDUhVZ.js";import{c as N}from"./clsx-B-dksMZM.js";import{u as k}from"./useComputedClearIcon-Db4D2zu5.js";import{F as D}from"./Icon-DBJcy2f-.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./Portal-B87B-olk.js";import"./index-CluZi8Ot.js";import"./index-BaC3dPEX.js";const C=t.forwardRef(({disabled:l=!1,hasError:e=!1,filled:s=!1,placeholder:i,minRows:a=2,maxRows:n,heightType:c,value:d,...f},u)=>{const[m,x]=t.useState("auto"),[j,b]=t.useState(a),h=t.useRef(24),o=t.useRef(null),F=t.useRef(0);t.useImperativeHandle(u,()=>o.current),t.useEffect(()=>{if(o.current){const p=window.getComputedStyle(o.current),y=parseInt(p.lineHeight,10),_=parseInt(p.paddingTop,10),R=parseInt(p.paddingBottom,10);h.current=y,F.current=_+R}},[]);const g=t.useCallback(()=>{if(!o.current)return;o.current.rows=a;const p=Math.floor((o.current.scrollHeight-F.current)/h.current);if(p>a){const y=n?Math.min(p,n):p;o.current.style.height=`${h.current*y+F.current}px`,x(`${h.current*y+F.current}px`),b(y)}else x("auto"),b(a)},[a,n]);return t.useEffect(()=>{d!==void 0&&c!=="fixed"&&(o.current.style.height="auto",g())},[g,c,d]),t.useEffect(()=>{o.current&&!s&&(o.current.rows=a,x("auto"),b(a))},[s,a]),r.jsx("textarea",{...f,className:N(["flx-textarea",{error:e},{disabled:l},{filled:s}]),disabled:l,placeholder:i,ref:o,rows:a,value:d,style:{height:m,overflowY:n&&j>=n||c==="fixed"?"scroll":"hidden",maxHeight:n?`${(h.current+F.current)*n}px`:void 0,...f.style}})});C.displayName="FlxTextAreaInput";const H=t.memo(C);H.displayName="MemoFlxTextAreaInput";const I=t.forwardRef(({error:l,name:e,placeholder:s="",clearFn:i,onChange:a,value:n,clearIcon:c,hasClear:d,disabled:f=!1,onBlur:u,...m},x)=>{const{clearIconComponent:j}=k({filled:!!n,hasClear:d,resetFieldFn:i,clearIcon:c,className:"flx-textarea-clear"});return r.jsxs("div",{className:"flx-textarea-wrapper",children:[r.jsx(H,{...m,ref:x,name:e,disabled:f,onChange:a,onBlur:u,placeholder:s,filled:!!n,value:n,hasError:!!l}),j]})});I.displayName="FlxTextArea";const w=t.forwardRef(({children:l,dataUniqueid:e,dataTestId:s,className:i},a)=>r.jsx("div",{ref:a,"data-uniqueid":e,"data-testid":s,className:N(["flx-textarea-control",i]),children:l}));w.displayName="FlxTextAreaContainer";const J=t.memo(I);J.displayName="MemoFlxTextArea";try{C.displayName="FlxTextAreaInput",C.__docgenInfo={description:"",displayName:"FlxTextAreaInput",props:{placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string | undefined"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"boolean | undefined"}},clearIcon:{defaultValue:null,description:"",name:"clearIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},clearFn:{defaultValue:null,description:"",name:"clearFn",required:!1,type:{name:"(() => void) | undefined"}},hasClear:{defaultValue:null,description:"",name:"hasClear",required:!1,type:{name:"boolean | undefined"}},maxRows:{defaultValue:null,description:"",name:"maxRows",required:!1,type:{name:"number | undefined"}},minRows:{defaultValue:{value:"2"},description:"",name:"minRows",required:!1,type:{name:"number | undefined"}},heightType:{defaultValue:null,description:"",name:"heightType",required:!1,type:{name:'"fixed" | "auto" | undefined'}}}}}catch{}const te={title:"Text entry",component:I,decorators:[l=>{const e=O({mode:"onTouched",defaultValues:{textarea:""}});return r.jsx(P,{...e,children:r.jsx(l,{})})}],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:function(e){const s=t.useId(),i=`${s}-form-item`,a=`${s}-form-item-description`,n="textarea",c=e.requiredError?{required:"This field is required"}:{},{control:d,resetField:f}=S();return r.jsx("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:r.jsxs(w,{children:[r.jsxs(V,{children:[r.jsx(v,{htmlFor:i,disabled:e.disabled,children:e.label}),e.infoTooltip?r.jsx(M,{children:e.helper}):null]}),r.jsx(B,{name:n,control:d,rules:c,render:({field:u,fieldState:m})=>r.jsxs(r.Fragment,{children:[r.jsx(I,{value:u.value,name:n,onChange:u.onChange,onBlur:u.onBlur,error:!!m.error,placeholder:e.placeholder,disabled:e.disabled,hasClear:e.hasClear,clearFn:()=>f(n),clearIcon:e.hasCustomClearIcon?r.jsx(D,{name:"trash"}):null,minRows:e.minRows,maxRows:e.maxRows}),!e.infoTooltip&&!m.error?r.jsx($,{id:a,children:e.helper}):null,r.jsx(L,{error:m.error})]})})]})})}},X={args:{label:"Input label",fontFamily:"Open Sans",hasClear:!1,disabled:!1,placeholder:"Placeholder",helper:"",infoTooltip:!1,requiredError:!1,hasCustomClearIcon:!1,minRows:3,maxRows:6}},T={...X};var A,q,E;T.parameters={...T.parameters,docs:{...(A=T.parameters)==null?void 0:A.docs,source:{originalSource:`{
  ...TextareaTemplate
} satisfies Story`,...(E=(q=T.parameters)==null?void 0:q.docs)==null?void 0:E.source}}};const ae=["Textarea"];export{T as Textarea,ae as __namedExportsOrder,te as default};
