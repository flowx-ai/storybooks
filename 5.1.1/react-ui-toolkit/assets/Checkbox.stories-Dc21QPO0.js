import{j as o}from"./jsx-runtime-DztICxWZ.js";import{r}from"./index-Bv9Y92EF.js";import{u as We,F as Ye,a as Ae,b as Ke,C as ze,c as Qe,d as Ze,f as De,e as en}from"./InfoTooltip-BGqrRuDD.js";import{c as me}from"./clsx-B-dksMZM.js";import{F as nn}from"./Icon-Da6wEY94.js";import{F as tn,a as on}from"./ChoiceGroup-DFl-5DaW.js";import{u as ke}from"./useControlled-bC22fXfP.js";import{c as ae,u as fe}from"./floating-ui.utils.dom-cLmtQo3s.js";import{u as Q}from"./useBaseUiId-BJFIvnQ9.js";import{f as rn,N as an,c as ln,m as sn,E as dn,u as ye}from"./useRenderElement-CQQ5I8lv.js";import{f as ge,c as cn,a as Fe,u as ve,b as Ve,d as Pe}from"./useField-CjkaMQbR.js";import{v as un}from"./useInteractions-DwvY_w4P.js";import{a as mn}from"./useButton-BpCaeLYm.js";import{u as fn}from"./FieldItemContext-FDB5z_De.js";import{c as pn}from"./createBaseUIEventDetails-2goIIMRX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";import"./DirectionContext-BpJw-_6G.js";import"./owner-BLNona6N.js";import"./useOpenChangeComplete-DtBfQTi2.js";import"./useTransitionStatus-D3wENK3H.js";import"./event-BieJfEq0.js";let pe=(function(t){return t.checked="data-checked",t.unchecked="data-unchecked",t.disabled="data-disabled",t.readonly="data-readonly",t.required="data-required",t.valid="data-valid",t.invalid="data-invalid",t.touched="data-touched",t.dirty="data-dirty",t.filled="data-filled",t.focused="data-focused",t})({});function hn(t){return r.useMemo(()=>({checked(e){return t.indeterminate?{}:e?{[pe.checked]:""}:{[pe.unchecked]:""}},...ge}),[t.indeterminate])}const Ee=r.createContext(void 0);function xn(t=!0){const e=r.useContext(Ee);if(e===void 0&&!t)throw new Error(rn(3));return e}const bn=r.createContext(void 0),Re="data-parent",Cn=r.forwardRef(function(e,d){const{checked:g,className:R,defaultChecked:h=!1,disabled:F=!1,id:c,indeterminate:a=!1,inputRef:m,name:C,onCheckedChange:l,parent:u=!1,readOnly:x=!1,render:p,required:i=!1,value:s,nativeButton:V=!0,...f}=e,{clearErrors:H}=cn(),{disabled:v,name:$,setDirty:Z,setFilled:S,setFocused:G,setTouched:D,state:J,validationMode:M,validityData:j}=Fe(),X=fn(),{labelId:je,controlId:Ie,setControlId:N,getDescriptionProps:le}=ve(),n=xn(),q=n==null?void 0:n.parent,O=q&&n.allValues,I=v||X.disabled||(n==null?void 0:n.disabled)||F,U=$??C,k=s??U,ee=Q(c),W=c??(O&&!u?`${q.id}-${k}`:Ie);let ne={};O&&(u?ne=n.parent.getParentProps():k&&(ne=n.parent.getChildProps(k,W??void 0)));const Ne=ae(l),{checked:se=g,indeterminate:Y=a,onCheckedChange:te,..._e}=ne,_=n==null?void 0:n.value,ie=n==null?void 0:n.setValue,de=n==null?void 0:n.defaultValue,w=r.useRef(null),{getButtonProps:we,buttonRef:Ge}=mn({disabled:I,native:V}),Me=Ve(),P=(n==null?void 0:n.fieldControlValidation)??Me,[E,qe]=ke({controlled:k&&_&&!u?_.includes(k):se,default:k&&de&&!u?de.includes(k):h,name:"Checkbox",state:"checked"});fe(()=>{const b=w==null?void 0:w.current;if(!b||N===an)return;const y=b.closest("label")!=null;return N(y?c??null:n&&!u?W:ee),()=>{N(void 0)}},[W,n,ee,c,O,N,u]),Pe({enabled:!n,id:ee,commitValidation:P.commitValidation,value:E,controlRef:w,name:U,getValue:()=>E});const B=r.useRef(null),Oe=ln(m,B,P.inputRef);fe(()=>{B.current&&(B.current.indeterminate=Y,E&&S(!0))},[E,Y,S]);function Be(){G(!0)}function Te(){const b=B.current;b&&(D(!0),G(!1),M==="onBlur"&&P.commitValidation(n?_:b.checked))}function Le(b){var y;b.defaultPrevented||x||(b.preventDefault(),(y=B.current)==null||y.click())}const He=Q(),$e=sn({checked:E,disabled:I,name:u?void 0:U,id:He,required:i,ref:Oe,style:un,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(b){if(b.nativeEvent.defaultPrevented)return;const y=b.target.checked,A=pn("none",b.nativeEvent);if(te==null||te(y,A),Ne(y,A),!A.isCanceled&&(H(U),Z(y!==j.initialValue),qe(y),n||(S(y),M==="onChange"?P.commitValidation(y):P.commitValidation(y,!0)),k&&_&&ie&&!u)){const K=y?[..._,k]:_.filter(Ue=>Ue!==k);ie(K,A),S(K.length>0),M==="onChange"?P.commitValidation(K):P.commitValidation(K,!0)}},onFocus(){var b;(b=w.current)==null||b.focus()}},s!==void 0?{value:(n?E&&s:s)||""}:dn,le,n?P.getValidationProps:P.getInputValidationProps),ce=O?!!se:E,ue=O&&Y||a;r.useEffect(()=>{q&&k&&q.disabledStatesRef.current.set(k,I)},[q,I,k]);const oe=r.useMemo(()=>({...J,checked:ce,disabled:I,readOnly:x,required:i,indeterminate:ue}),[J,ce,I,x,i,ue]),Je=hn(oe),Xe=ye("button",e,{state:oe,ref:[Ge,w,d,n==null?void 0:n.registerControlRef],props:[{id:W??void 0,role:"checkbox",disabled:I,"aria-checked":Y?"mixed":E,"aria-readonly":x||void 0,"aria-required":i||void 0,"aria-labelledby":je,[Re]:u?"":void 0,onFocus:Be,onBlur:Te,onClick:Le},le,P.getValidationProps,f,_e,we],stateAttributesMapping:Je});return o.jsxs(bn.Provider,{value:oe,children:[Xe,!E&&!n&&e.name&&!u&&o.jsx("input",{type:"hidden",name:e.name,value:"off"}),o.jsx("input",{...$e})]})}),he=[];function kn(t){const{allValues:e=he,value:d=he,onValueChange:g}=t,R=r.useRef(d),h=r.useRef(new Map),[F,c]=r.useState("mixed"),a=Q(),m=d.length===e.length,C=d.length!==e.length&&d.length>0,l=ae(g),u=r.useCallback(()=>({id:a,indeterminate:C,checked:m,"aria-controls":e.map(p=>`${a}-${p}`).join(" "),onCheckedChange(p,i){const s=R.current,V=e.filter(v=>h.current.get(v)&&s.includes(v)),f=e.filter(v=>!h.current.get(v)||h.current.get(v)&&s.includes(v));if(s.length===f.length||s.length===0){d.length===f.length?l(V,i):l(f,i);return}F==="mixed"?(l(f,i),c("on")):F==="on"?(l(V,i),c("off")):F==="off"&&(l(s,i),c("mixed"))}}),[e,m,a,C,l,F,d.length]),x=r.useCallback((p,i)=>({id:i??`${a}-${p}`,checked:d.includes(p),onCheckedChange(s,V){const f=d.slice();s?f.push(p):f.splice(f.indexOf(p),1),R.current=f,l(f,V),c("mixed")}}),[a,l,d]);return r.useMemo(()=>({id:a,indeterminate:C,getParentProps:u,getChildProps:x,disabledStatesRef:h}),[a,C,u,x])}const yn=r.forwardRef(function(e,d){const{allValues:g,className:R,defaultValue:h,disabled:F=!1,id:c,onValueChange:a,render:m,value:C,...l}=e,{disabled:u,name:x,state:p}=Fe(),{labelId:i}=ve(),s=u||F,V=Ve(),[f,H]=ke({controlled:C,default:h,name:"CheckboxGroup",state:"value"}),v=ae((j,X)=>{a==null||a(j,X),!X.isCanceled&&H(j)}),$=kn({allValues:g,value:C,onValueChange:a}),Z=Q(c),S=r.useRef(null),G=r.useCallback(j=>{S.current==null&&j!=null&&!j.hasAttribute(Re)&&(S.current=j)},[]);Pe({enabled:!!x,id:Z,commitValidation:V.commitValidation,value:f,controlRef:S,name:x,getValue:()=>f});const D=r.useMemo(()=>({...p,disabled:s}),[p,s]),J=r.useMemo(()=>({allValues:g,value:f,defaultValue:h,setValue:v,parent:$,disabled:s,fieldControlValidation:V,registerControlRef:G}),[g,f,h,v,$,s,V,G]),M=ye("div",e,{state:D,ref:d,props:[{role:"group","aria-labelledby":i},l],stateAttributesMapping:ge});return o.jsx(Ee.Provider,{value:J,children:M})}),Se=r.createContext({}),gn=()=>r.useContext(Se),T=r.forwardRef(({label:t,choiceIconSelected:e=null,choiceIconUnselected:d=null,disabled:g,reversedLabel:R=!1,value:h="on",className:F,checked:c,onBlur:a,...m},C)=>{const l=r.useId(),{noBorder:u}=gn(),[x,p]=r.useState(!1),i=r.useMemo(()=>c?e:d,[c,e,d]);return o.jsx(Cn,{...m,id:l,"aria-labelledby":l,className:me(["flx-checkbox",{"flx-checkbox-reversed":R},{"flx-checkbox-clear":u},F]),ref:C,disabled:g,checked:c,value:h,onFocus:()=>{p(!0)},onBlur:s=>{p(!1),a==null||a(s)},children:o.jsxs("label",{htmlFor:l,className:me(["flx-checkbox-label",{disabled:g},{checked:c},{focused:x},{empty:!c}]),children:[o.jsx("div",{className:"flx-checkbox-icons",children:i?o.jsx("div",{className:"flx-checkbox-icon",children:i}):o.jsx("div",{className:"flx-checkbox-container",children:o.jsx(nn,{name:"check"})})}),o.jsx("div",{className:"flx-checkbox-text",children:t})]})})});T.displayName="FlxCheckbox";const L=({noBorder:t=!1,...e})=>o.jsx(Se.Provider,{value:{noBorder:t},children:o.jsx(yn,{...e,render:o.jsx(tn,{})})});L.displayName="FlxCheckboxGroup";const re=r.memo(L);re.displayName="MemoFlxCheckboxGroup";try{T.displayName="FlxCheckbox",T.__docgenInfo={description:"",displayName:"FlxCheckbox",props:{choiceIconSelected:{defaultValue:{value:"null"},description:"",name:"choiceIconSelected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},choiceIconUnselected:{defaultValue:{value:"null"},description:"",name:"choiceIconUnselected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},reversedLabel:{defaultValue:{value:"false"},description:"",name:"reversedLabel",required:!1,type:{name:"boolean | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"Whether the component should ignore user interaction.",name:"disabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxRootState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxRootState> | undefined"}}}}}catch{}try{L.displayName="FlxCheckboxGroup",L.__docgenInfo={description:"",displayName:"FlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}try{re.displayName="MemoFlxCheckboxGroup",re.__docgenInfo={description:"",displayName:"MemoFlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}const Fn=["Option 1","Option 2","Option 3"],Wn={component:T,title:"Choices",decorators:[t=>o.jsx(De,{...en({mode:"onChange",defaultValues:{checkbox:[]}}),children:o.jsx(t,{})})],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}},disabledFirstOption:{control:{type:"boolean"}},groupDirection:{options:["row","column"],control:{type:"select"}}},render:function(e){const d=r.useId(),g=`${d}-form-item`,R=`${d}-form-item-description`,h="checkbox",F=e.requiredError?{validate:{required:m=>m.length>0||"This field is required"}}:{},{control:c,watch:a}=We();return o.jsxs("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:[o.jsxs(on,{direction:e.groupDirection,children:[o.jsxs(Ye,{children:[o.jsx(Ae,{htmlFor:g,disabled:e.disabled,children:e.label}),e.infoTooltip?o.jsx(Ke,{children:e.helper}):null]}),o.jsx(ze,{disabled:e.disabled,control:c,name:h,rules:e.requiredError?F:{},render:({field:m,fieldState:C})=>o.jsxs(o.Fragment,{children:[o.jsx(L,{noBorder:e.noBorder,style:{width:e.width?`${e.width}px`:"100%"},children:Fn.map((l,u)=>{var x;return o.jsx(T,{name:m.name,label:l,reversedLabel:e.reversedLabel,disabled:m.disabled||e.disabledFirstOption&&u===0,checked:(x=m.value)==null?void 0:x.includes(l),onBlur:m.onBlur,onCheckedChange:p=>{var i;return p?m.onChange([...m.value,l]):m.onChange((i=m.value)==null?void 0:i.filter(s=>s!==l))}},l)})}),!e.infoTooltip&&!C.error?o.jsx(Qe,{id:R,children:e.helper}):null,o.jsx(Ze,{error:C.error})]})})]}),o.jsxs("p",{children:["Selected options: ",a(h).join(",")]})]})}},z={args:{disabled:!1,label:"Checkbox label",helper:"Helper text",infoTooltip:!1,requiredError:!1,reversedLabel:!1,disabledFirstOption:!1,groupDirection:"row",noBorder:!1}};var xe,be,Ce;z.parameters={...z.parameters,docs:{...(xe=z.parameters)==null?void 0:xe.docs,source:{originalSource:`{
  args: {
    disabled: false,
    label: 'Checkbox label',
    helper: 'Helper text',
    infoTooltip: false,
    requiredError: false,
    reversedLabel: false,
    disabledFirstOption: false,
    groupDirection: 'row',
    noBorder: false
  }
}`,...(Ce=(be=z.parameters)==null?void 0:be.docs)==null?void 0:Ce.source}}};const Yn=["Checkbox"];export{z as Checkbox,Yn as __namedExportsOrder,Wn as default};
