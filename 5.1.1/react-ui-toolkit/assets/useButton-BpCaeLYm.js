import{r as d}from"./index-Bv9Y92EF.js";import{c as P,u as w,b as N}from"./floating-ui.utils.dom-cLmtQo3s.js";import{f as T,m as K,a as g}from"./useRenderElement-CQQ5I8lv.js";const R=d.createContext(void 0);function x(i=!1){const t=d.useContext(R);if(t===void 0&&!i)throw new Error(T(16));return t}function M(i){const{focusableWhenDisabled:t,disabled:u,composite:f=!1,tabIndex:e=0,isNativeButton:r}=i,c=f&&t!==!1,b=f&&t===!1;return{props:d.useMemo(()=>{const a={onKeyDown(p){u&&t&&p.key!=="Tab"&&p.preventDefault()}};return f||(a.tabIndex=e,!r&&u&&(a.tabIndex=t?e:-1)),(r&&(t||c)||!r&&u)&&(a["aria-disabled"]=u),r&&(!t||b)&&(a.disabled=u),a},[f,u,t,c,b,r,e])}}function S(i={}){const{disabled:t=!1,focusableWhenDisabled:u,tabIndex:f=0,native:e=!0}=i,r=d.useRef(null),c=x(!0)!==void 0,b=P(()=>{const s=r.current;return!!((s==null?void 0:s.tagName)==="A"&&(s!=null&&s.href))}),{props:l}=M({focusableWhenDisabled:u,disabled:t,composite:c,tabIndex:f,isNativeButton:e}),a=d.useCallback(()=>{const s=r.current;U(s)&&c&&t&&l.disabled===void 0&&s.disabled&&(s.disabled=!1)},[t,l.disabled,c]);w(a,[a]);const p=d.useCallback((s={})=>{const{onClick:n,onMouseDown:m,onKeyUp:D,onKeyDown:y,onPointerDown:C,...h}=s;return K({type:e?"button":void 0,onClick(o){if(t){o.preventDefault();return}n==null||n(o)},onMouseDown(o){t||m==null||m(o)},onKeyDown(o){if(t||(g(o),y==null||y(o)),o.baseUIHandlerPrevented)return;const k=o.target===o.currentTarget&&!e&&!b()&&!t,E=o.key==="Enter",B=o.key===" ";k&&((B||E)&&o.preventDefault(),E&&(n==null||n(o)))},onKeyUp(o){t||(g(o),D==null||D(o)),!o.baseUIHandlerPrevented&&o.target===o.currentTarget&&!e&&!t&&o.key===" "&&(n==null||n(o))},onPointerDown(o){if(t){o.preventDefault();return}C==null||C(o)}},e?void 0:{role:"button"},l,h)},[t,l,e,b]),I=P(s=>{r.current=s,a()});return{getButtonProps:p,buttonRef:I}}function U(i){return N(i)&&i.tagName==="BUTTON"}export{R as C,S as a,x as u};
