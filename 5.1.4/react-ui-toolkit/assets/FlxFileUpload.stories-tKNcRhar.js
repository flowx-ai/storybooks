import{j as n}from"./jsx-runtime-DztICxWZ.js";import{r as m}from"./index-Bv9Y92EF.js";import{c as S}from"./clsx-B-dksMZM.js";import{M as T}from"./Button-CsQ05Hxl.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./useRenderElement-IQYmzFOi.js";const q=(t,e)=>e&&t.size>e?{fileSizeExceeded:"File size exceeded"}:{},v=(t,e)=>{if(!e||e==="*/*")return{};const a=e.split(",").map(l=>l.trim());for(const l of a){if(l===t.type)return{};if(l.includes("*")&&l.split("/")[0]===t.type.split("/")[0])return{};if(t.name.endsWith(l))return{}}return{invalidFileType:"File type is invalid"}},z=t=>!t||t==="*/*"?t:t.split(",").map(e=>(e=e.trim(),e.startsWith(".")||e.includes("/")||e.includes("*")?e:`.${e}`)).join(","),i=m.forwardRef(({className:t,label:e,accept:a="*/*",maxFileSize:l,dataTestId:f,buttonVariant:o,onFileSelect:r,...d},u)=>{const s=m.useRef(null),h=z(a),V=()=>{s.current&&s.current.click()},U=_=>{var x;const p=(x=_.currentTarget.files)==null?void 0:x[0];p&&(r==null||r({file:p,errors:{...q(p,l),...v(p,a)}}))};return n.jsxs(n.Fragment,{children:[n.jsx(T,{"data-testid":f,className:S("flx-fileupload-button",t),ref:u,onClick:V,variant:o,...d,children:e}),n.jsx("input",{type:"file",accept:h,ref:s,onChange:U})]})});i.displayName="FlxFileUpload";const F=m.memo(i);F.displayName="MemoFlxFileUpload";try{i.displayName="FlxFileUpload",i.__docgenInfo={description:"",displayName:"FlxFileUpload",props:{dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},accept:{defaultValue:{value:"*/*"},description:"",name:"accept",required:!1,type:{name:"string | undefined"}},maxFileSize:{defaultValue:null,description:"",name:"maxFileSize",required:!1,type:{name:"number | undefined"}},buttonVariant:{defaultValue:null,description:"",name:"buttonVariant",required:!1,type:{name:'"text" | "fill" | "ghost" | undefined'}},onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((event: FileUploadEvent) => void) | undefined"}}}}}catch{}try{F.displayName="MemoFlxFileUpload",F.__docgenInfo={description:"",displayName:"MemoFlxFileUpload",props:{dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},accept:{defaultValue:{value:"*/*"},description:"",name:"accept",required:!1,type:{name:"string | undefined"}},maxFileSize:{defaultValue:null,description:"",name:"maxFileSize",required:!1,type:{name:"number | undefined"}},buttonVariant:{defaultValue:null,description:"",name:"buttonVariant",required:!1,type:{name:'"text" | "fill" | "ghost" | undefined'}},onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((event: FileUploadEvent) => void) | undefined"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null | undefined"}}}}}catch{}const j=({label:t,buttonVariant:e,disabled:a,width:l,fontFamily:f})=>{var d,u;const[o,r]=m.useState({errors:{}});return n.jsxs("div",{className:"flx-default-theme",children:[n.jsx(i,{className:"custom-class",buttonVariant:e,disabled:a,style:{width:l&&l>0?`${l}px`:"auto","--flxTheme-button-fontFamily":f},label:t,onFileSelect:s=>r(s)}),n.jsx("hr",{}),n.jsxs("p",{children:["Uploaded file: ",(d=o.file)==null?void 0:d.name," (size: ",(u=o.file)==null?void 0:u.size," kb)"]})]})},B={title:"FileUpload",component:i,argTypes:{asChild:{table:{disable:!0}},iconComponent:{table:{disable:!0}},buttonVariant:{options:["fill","ghost","text"],mapping:{none:null,fill:"fill",ghost:"ghost",text:"text"},control:{type:"select"}},fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:j,parameters:{design:{type:"figma",url:"https://www.figma.com/file/2n2umsSLJbNigLx43nseml/FlowX-Design-System?node-id=5599%3A5879"}}},N={args:{label:"Upload",buttonVariant:"ghost",fontFamily:"Open Sans",width:0,disabled:!1,maxFileSize:0,accept:""}},c={...N};var y,g,b;c.parameters={...c.parameters,docs:{...(y=c.parameters)==null?void 0:y.docs,source:{originalSource:`{
  ...FileUploadTemplate
} satisfies Story`,...(b=(g=c.parameters)==null?void 0:g.docs)==null?void 0:b.source}}};const k=["FileUpload"];export{c as FileUpload,k as __namedExportsOrder,B as default};
