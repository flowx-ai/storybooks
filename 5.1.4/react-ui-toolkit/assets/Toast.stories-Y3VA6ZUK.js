import{j as p}from"./jsx-runtime-DztICxWZ.js";import{c as Ke}from"./clsx-B-dksMZM.js";import{r as t}from"./index-Bv9Y92EF.js";import{l as We}from"./lodash-BeRlbo2W.js";import{M as fe}from"./Icon-D7WurJMX.js";import{M as pe}from"./Button-CsQ05Hxl.js";import{e as ge,f as Je,o as Qe,g as Ze}from"./owner-CUO6ebsU.js";import{i as et}from"./inertValue-B83C-BnE.js";import{b as tt,u as ce,c as we}from"./floating-ui.utils.dom-BFiwr5bk.js";import{f as Me,u as Y}from"./useRenderElement-IQYmzFOi.js";import{u as nt,t as st}from"./useOpenChangeComplete-vwLYIK8G.js";import{a as De}from"./useButton-BU0a48-b.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";const ot=t.createContext(void 0);function Re(){const e=t.useContext(ot);if(!e)throw new Error(Me(73));return e}const Se=t.createContext(void 0);function O(){const e=t.useContext(Se);if(!e)throw new Error(Me(66));return e}let _=(function(e){return e.index="--toast-index",e.offsetY="--toast-offset-y",e.height="--toast-height",e.swipeMovementX="--toast-swipe-movement-x",e.swipeMovementY="--toast-swipe-movement-y",e})({});const rt={...st,swipeDirection(e){return e?{"data-swipe-direction":e}:null}},F=40,it=10,E=.5,at=1;function he(e,c,f){switch(e){case"up":return-f;case"down":return f;case"left":return-c;case"right":return c;default:return 0}}function ct(e){const f=window.getComputedStyle(e).transform;let o=0,C=0,d=1;if(f&&f!=="none"){const h=f.match(/matrix(?:3d)?\(([^)]+)\)/);if(h){const i=h[1].split(", ").map(parseFloat);i.length===6?(o=i[4],C=i[5],d=Math.sqrt(i[0]*i[0]+i[1]*i[1])):i.length===16&&(o=i[12],C=i[13],d=i[0])}}return{x:o,y:C,scale:d}}const lt=t.forwardRef(function(c,f){var me;const{toast:o,render:C,className:d,swipeDirection:h=["down","right"],...i}=c,u=((me=o.positionerProps)==null?void 0:me.anchor)!==void 0;let s=[];u||(s=Array.isArray(h)?h:[h]);const a=s.length>0,{toasts:l,focused:x,close:T,remove:b,setToasts:H,pauseTimers:Ce,expanded:B,setHovering:be}=Re(),[le,j]=t.useState(void 0),[P,ue]=t.useState(!1),[Ie,K]=t.useState(!1),[Ee,Pe]=t.useState(!1),[I,X]=t.useState({x:0,y:0}),[M,_e]=t.useState({x:0,y:0,scale:1}),[W,Ne]=t.useState(),[J,Le]=t.useState(),[A,Q]=t.useState(null),v=t.useRef(null),k=t.useRef({x:0,y:0}),Z=t.useRef({x:0,y:0,scale:1}),$=t.useRef(void 0),ee=t.useRef(0),z=t.useRef(!1),D=t.useRef({x:0,y:0}),te=t.useRef(!1),ne=t.useMemo(()=>l.indexOf(o),[o,l]),se=t.useMemo(()=>l.filter(n=>n.transitionStatus!=="ending").indexOf(o),[o,l]),Oe=t.useMemo(()=>l.slice(0,l.indexOf(o)).reduce((n,r)=>n+(r.height||0),0),[l,o]);nt({open:o.transitionStatus!=="ending",ref:v,onComplete(){o.transitionStatus==="ending"&&b(o.id)}});const U=tt(()=>{const n=v.current;if(!n)return;const r=n.style.height;n.style.height="auto";const m=n.offsetHeight;n.style.height=r,H(y=>y.map(g=>g.id===o.id?{...g,ref:v,height:m,transitionStatus:void 0}:g))});ce(U,[U]);function je(n,r){let m=n,y=r;return!s.includes("left")&&!s.includes("right")?m=n>0?n**E:-(Math.abs(n)**E):(!s.includes("right")&&n>0&&(m=n**E),!s.includes("left")&&n<0&&(m=-(Math.abs(n)**E))),!s.includes("up")&&!s.includes("down")?y=r>0?r**E:-(Math.abs(r)**E):(!s.includes("down")&&r>0&&(y=r**E),!s.includes("up")&&r<0&&(y=-(Math.abs(r)**E))),{x:m,y}}function Ae(n){var y;if(n.button!==0)return;n.pointerType==="touch"&&Ce();const r=Ze(n.nativeEvent);if(!(r&&r.closest('button,a,input,textarea,[role="button"],[data-swipe-ignore]'))){if(z.current=!1,$.current=void 0,ee.current=0,k.current={x:n.clientX,y:n.clientY},D.current=k.current,v.current){const g=ct(v.current);Z.current=g,_e(g),X({x:g.x,y:g.y})}be(!0),ue(!0),K(!1),Q(null),te.current=!0,(y=v.current)==null||y.setPointerCapture(n.pointerId)}}function ke(n){if(!P)return;n.preventDefault(),te.current&&(k.current={x:n.clientX,y:n.clientY},te.current=!1);const{clientY:r,clientX:m,movementX:y,movementY:g}=n;(g<0&&r>D.current.y||g>0&&r<D.current.y)&&(D.current={x:D.current.x,y:r}),(y<0&&m>D.current.x||y>0&&m<D.current.x)&&(D.current={x:m,y:D.current.y});const w=m-k.current.x,R=r-k.current.y,ze=r-D.current.y,Ue=m-D.current.x;if(!Ie&&Math.sqrt(w*w+R*R)>=at&&(K(!0),A===null)){const V=s.includes("left")||s.includes("right"),qe=s.includes("up")||s.includes("down");if(V&&qe){const Ve=Math.abs(w),Ge=Math.abs(R);Q(Ve>Ge?"horizontal":"vertical")}}let S;if(!$.current)A==="vertical"?R>0?S="down":R<0&&(S="up"):A==="horizontal"?w>0?S="right":w<0&&(S="left"):Math.abs(w)>=Math.abs(R)?S=w>0?"right":"left":S=R>0?"down":"up",S&&s.includes(S)&&($.current=S,ee.current=he(S,w,R),j(S));else{const ie=$.current,V=he(ie,Ue,ze);V>F?(z.current=!1,j(ie)):ee.current-V>=it&&(z.current=!0)}const q=je(w,R);let oe=Z.current.x,re=Z.current.y;A==="horizontal"?(s.includes("left")||s.includes("right"))&&(oe+=q.x):(A==="vertical"||(s.includes("left")||s.includes("right"))&&(oe+=q.x),(s.includes("up")||s.includes("down"))&&(re+=q.y)),X({x:oe,y:re})}function Fe(n){var w;if(!P)return;if(ue(!1),K(!1),Q(null),(w=v.current)==null||w.releasePointerCapture(n.pointerId),z.current){X({x:M.x,y:M.y}),j(void 0);return}let r=!1;const m=I.x-M.x,y=I.y-M.y;let g;for(const R of s){switch(R){case"right":m>F&&(r=!0,g="right");break;case"left":m<-F&&(r=!0,g="left");break;case"down":y>F&&(r=!0,g="down");break;case"up":y<-F&&(r=!0,g="up");break}if(r)break}r?(j(g),Pe(!0),T(o.id)):(X({x:M.x,y:M.y}),j(void 0))}function Ye(n){if(n.key==="Escape"){if(!v.current||!ge(v.current,Je(Qe(v.current))))return;T(o.id)}}t.useEffect(()=>{if(!a)return;const n=v.current;if(!n)return;function r(m){ge(n,m.target)&&m.preventDefault()}return n.addEventListener("touchmove",r,{passive:!1}),()=>{n.removeEventListener("touchmove",r)}},[a]);function He(){if(!P&&I.x===M.x&&I.y===M.y&&!Ee)return{[_.swipeMovementX]:"0px",[_.swipeMovementY]:"0px"};const n=I.x-M.x,r=I.y-M.y;return{transition:P?"none":void 0,transform:P?`translateX(${I.x}px) translateY(${I.y}px) scale(${M.scale})`:void 0,[_.swipeMovementX]:`${n}px`,[_.swipeMovementY]:`${r}px`}}const de=o.priority==="high",Be={role:de?"alertdialog":"dialog",tabIndex:0,"aria-modal":!1,"aria-labelledby":W,"aria-describedby":J,"aria-hidden":de&&!x?!0:void 0,onPointerDown:a?Ae:void 0,onPointerMove:a?ke:void 0,onPointerUp:a?Fe:void 0,onKeyDown:Ye,inert:et(o.limited),style:{...He(),[_.index]:o.transitionStatus==="ending"?ne:se,[_.offsetY]:`${Oe}px`,[_.height]:o.height?`${o.height}px`:void 0}},N=t.useMemo(()=>({rootRef:v,toast:o,titleId:W,setTitleId:Ne,descriptionId:J,setDescriptionId:Le,swiping:P,swipeDirection:le,recalculateHeight:U,index:ne,visibleIndex:se,expanded:B}),[o,W,J,P,le,U,ne,se,B]),Xe=t.useMemo(()=>({transitionStatus:o.transitionStatus,expanded:B,limited:o.limited||!1,type:o.type,swiping:N.swiping,swipeDirection:N.swipeDirection}),[B,o.transitionStatus,o.limited,o.type,N.swiping,N.swipeDirection]),$e=Y("div",c,{ref:[f,N.rootRef],state:Xe,stateAttributesMapping:rt,props:[Be,i]});return p.jsx(Se.Provider,{value:N,children:$e})}),ut=t.forwardRef(function(c,f){const{render:o,className:C,id:d,children:h,...i}=c,{toast:u}=O(),s=h??u.description,a=!!s,l=we(d),{setDescriptionId:x}=O();ce(()=>{if(a)return x(l),()=>{x(void 0)}},[a,l,x]);const T=t.useMemo(()=>({type:u.type}),[u.type]),b=Y("p",c,{ref:f,state:T,props:{...i,id:l,children:s}});return a?b:null}),dt=t.forwardRef(function(c,f){const{render:o,className:C,id:d,children:h,...i}=c,{toast:u}=O(),s=h??u.title,a=!!s,l=we(d),{setTitleId:x}=O();ce(()=>{if(a)return x(l),()=>{x(void 0)}},[a,l,x]);const T=t.useMemo(()=>({type:u.type}),[u.type]),b=Y("h2",c,{ref:f,state:T,props:{...i,id:l,children:s}});return a?b:null}),mt=t.forwardRef(function(c,f){const{render:o,className:C,disabled:d,nativeButton:h=!0,...i}=c,{close:u,expanded:s}=Re(),{toast:a}=O(),{getButtonProps:l,buttonRef:x}=De({disabled:d,native:h}),T=t.useMemo(()=>({type:a.type}),[a.type]);return Y("button",c,{ref:[f,x],state:T,props:[{"aria-hidden":!s,onClick(){u(a.id)}},i,l]})}),ft=t.forwardRef(function(c,f){var H;const{render:o,className:C,disabled:d,nativeButton:h=!0,...i}=c,{toast:u}=O(),s=((H=u.actionProps)==null?void 0:H.children)??i.children,a=!!s,{getButtonProps:l,buttonRef:x}=De({disabled:d,native:h}),T=t.useMemo(()=>({type:u.type}),[u.type]),b=Y("button",c,{ref:[f,x],state:T,props:[i,u.actionProps,l,{children:s}]});return a?b:null}),pt=2e3,gt=We.memoize(e=>({error:3e3,warning:3e3,info:3e3,success:2e3})[e]||pt),xe=1e4,ht=50,L=({data:e,onCloseToast:c,className:f,...o})=>{var s;const C=t.useId(),d=t.useCallback(()=>{c==null||c(e)},[c,e]),h=t.useCallback(a=>{a.event(),d()},[d]),i=t.useMemo(()=>{var x,T;if(e!=null&&e.closeInterval)return e==null?void 0:e.closeInterval;const a=((((x=e.title)==null?void 0:x.length)||0)+(((T=e.message)==null?void 0:T.length)||0))*ht,l=gt(e.messageType);return a<l?l:a>xe?xe:a},[e.closeInterval,e.messageType,e.title,e.message]),u=t.useRef(null);return t.useEffect(()=>(u.current=setTimeout(()=>{d()},i),()=>{u.current&&clearTimeout(u.current)}),[d,i]),p.jsx(lt,{...o,role:"alert",className:Ke("container",e.messageType,f),swipeDirection:"down",toast:{id:C,title:e.title,description:e.message,onClose:d},"data-testid":`messageType-${e.messageType}`,children:p.jsxs("div",{className:"content",children:[p.jsx(fe,{name:e.icon||e.messageType,className:"type-icon"}),p.jsxs("div",{children:[e.title?p.jsx(dt,{className:"title",children:e.title}):null,e.message?p.jsx(ut,{className:"message",children:e.message}):null,e.action?p.jsx(ft,{render:p.jsx(pe,{variant:"text",className:"action",onClick:()=>h(e.action),children:(s=e.action)==null?void 0:s.name})}):null]}),p.jsx(mt,{render:p.jsx(pe,{variant:"text",className:"close",onClick:()=>d(),children:p.jsx(fe,{name:"dismiss",className:"close-icon"})})})]})})},ae=t.memo(L);ae.displayName="MemoFlxToast";try{ae.displayName="MemoFlxToast",ae.__docgenInfo={description:"",displayName:"MemoFlxToast",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ToastData"}},onCloseToast:{defaultValue:null,description:"",name:"onCloseToast",required:!1,type:{name:"((data: ToastData) => void) | undefined"}}}}}catch{}const Nt={component:L,title:"Toast"},G={render:()=>p.jsxs(p.Fragment,{children:[p.jsx(L,{data:{messageType:"success",title:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),p.jsx(L,{data:{messageType:"info",message:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),p.jsx(L,{data:{messageType:"warning",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet"},onCloseToast:e=>console.log("onCloseToast",e)}),p.jsx(L,{data:{messageType:"error",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. "},onCloseToast:e=>console.log("onCloseToast",e)})]})};var ye,Te,ve;G.parameters={...G.parameters,docs:{...(ye=G.parameters)==null?void 0:ye.docs,source:{originalSource:`{
  render: () => <>
      <FlxToast data={{
      messageType: 'success',
      title: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'info',
      message: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'warning',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'error',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. '
    }} onCloseToast={data => console.log('onCloseToast', data)} />
    </>
}`,...(ve=(Te=G.parameters)==null?void 0:Te.docs)==null?void 0:ve.source}}};const Lt=["Toast"];export{G as Toast,Lt as __namedExportsOrder,Nt as default};
