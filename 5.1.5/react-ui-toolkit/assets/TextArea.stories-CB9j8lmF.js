import{j as r}from"./jsx-runtime-DztICxWZ.js";import{r as a}from"./index-Bv9Y92EF.js";import{u as H,F as M,a as S,b as L,C as B,c as $,d as O,e as P,f as J}from"./InfoTooltip-BAaygyQq.js";import{c as w}from"./clsx-B-dksMZM.js";import{u as U}from"./useComputedClearIcon-C5NeiXK9.js";import{F as X}from"./Icon-BmuLvzFr.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./useRenderElement-IQYmzFOi.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";import"./ReactStore-BIANnnUv.js";import"./useOpenChangeComplete-vwLYIK8G.js";import"./floating-ui.utils.dom-BFiwr5bk.js";import"./owner-CUO6ebsU.js";import"./createBaseUIEventDetails-C1JAek35.js";import"./event-BYna9Hj-.js";import"./DirectionContext-C0NX5zCF.js";import"./useTransitionStatus-DQ3yU_0a.js";const g=a.forwardRef(({disabled:l=!1,hasError:e=!1,filled:i=!1,placeholder:d,minRows:n=2,maxRows:t,heightType:s,value:u,...c},p)=>{const[m,h]=a.useState("auto"),[q,y]=a.useState(n),F=a.useRef(24),o=a.useRef(null),T=a.useRef(0);a.useImperativeHandle(p,()=>o.current),a.useEffect(()=>{if(o.current){const f=window.getComputedStyle(o.current),I=parseInt(f.lineHeight,10),N=parseInt(f.paddingTop,10),v=parseInt(f.paddingBottom,10);F.current=I,T.current=N+v}},[]);const b=a.useCallback(()=>{if(!o.current)return;o.current.rows=n;const f=Math.floor((o.current.scrollHeight-T.current)/F.current);if(f>n){const I=t?Math.min(f,t):f;o.current.style.height=`${F.current*I+T.current}px`,h(`${F.current*I+T.current}px`),y(I)}else h("auto"),y(n)},[n,t]);return a.useEffect(()=>{u!==void 0&&s!=="fixed"&&(o.current.style.height="auto",b())},[b,s,u]),a.useEffect(()=>{o.current&&!i&&(o.current.rows=n,h("auto"),y(n))},[i,n]),r.jsx("textarea",{...c,className:w(["flx-textarea",{error:e},{disabled:l},{filled:i}]),disabled:l,placeholder:d,ref:o,rows:n,value:u,style:{height:m,overflowY:t&&q>=t||s==="fixed"?"scroll":"hidden",maxHeight:t?`${(F.current+T.current)*t}px`:void 0,...c.style}})});g.displayName="FlxTextAreaInput";const E=a.memo(g);E.displayName="MemoFlxTextAreaInput";const x=a.forwardRef(({error:l,name:e,placeholder:i="",clearFn:d,onChange:n,value:t,clearIcon:s,hasClear:u,disabled:c=!1,onBlur:p,clearIconAriaLabel:m,...h},q)=>{const{clearIconComponent:y}=U({filled:!!t,hasClear:u,resetFieldFn:d,clearIcon:s,className:"flx-textarea-clear",inputRef:q,disabled:c,clearIconAriaLabel:m});return r.jsxs("div",{className:"flx-textarea-wrapper",children:[r.jsx(E,{...h,ref:q,name:e,disabled:c,onChange:n,onBlur:p,placeholder:i,filled:!!t,value:t,hasError:!!l}),y]})});x.displayName="FlxTextArea";const C=a.forwardRef(({children:l,dataUniqueid:e,dataTestId:i,className:d},n)=>r.jsx("div",{ref:n,"data-uniqueid":e,"data-testid":i,className:w(["flx-textarea-control",d]),children:l}));C.displayName="FlxTextAreaContainer";const V=a.memo(x);V.displayName="MemoFlxTextArea";try{x.displayName="FlxTextArea",x.__docgenInfo={description:"",displayName:"FlxTextArea",props:{error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"boolean | undefined"}},placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string | undefined"}},clearIcon:{defaultValue:null,description:"",name:"clearIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},clearFn:{defaultValue:null,description:"",name:"clearFn",required:!1,type:{name:"(() => void) | undefined"}},hasClear:{defaultValue:null,description:"",name:"hasClear",required:!1,type:{name:"boolean | undefined"}},clearIconAriaLabel:{defaultValue:null,description:"",name:"clearIconAriaLabel",required:!1,type:{name:"string | undefined"}},minRows:{defaultValue:{value:"2"},description:"",name:"minRows",required:!1,type:{name:"number | undefined"}},maxRows:{defaultValue:null,description:"",name:"maxRows",required:!1,type:{name:"number | undefined"}},heightType:{defaultValue:null,description:"",name:"heightType",required:!1,type:{name:'"fixed" | "auto" | undefined'}}}}}catch{}try{C.displayName="FlxTextAreaContainer",C.__docgenInfo={description:"",displayName:"FlxTextAreaContainer",props:{dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},dataUniqueid:{defaultValue:null,description:"",name:"dataUniqueid",required:!1,type:{name:"string | undefined"}}}}}catch{}try{V.displayName="MemoFlxTextArea",V.__docgenInfo={description:"",displayName:"MemoFlxTextArea",props:{error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"boolean | undefined"}},placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string | undefined"}},clearIcon:{defaultValue:null,description:"",name:"clearIcon",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},clearFn:{defaultValue:null,description:"",name:"clearFn",required:!1,type:{name:"(() => void) | undefined"}},hasClear:{defaultValue:null,description:"",name:"hasClear",required:!1,type:{name:"boolean | undefined"}},clearIconAriaLabel:{defaultValue:null,description:"",name:"clearIconAriaLabel",required:!1,type:{name:"string | undefined"}},minRows:{defaultValue:{value:"2"},description:"",name:"minRows",required:!1,type:{name:"number | undefined"}},maxRows:{defaultValue:null,description:"",name:"maxRows",required:!1,type:{name:"number | undefined"}},heightType:{defaultValue:null,description:"",name:"heightType",required:!1,type:{name:'"fixed" | "auto" | undefined'}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLTextAreaElement | null) => void) | RefObject<HTMLTextAreaElement> | null | undefined"}}}}}catch{}try{g.displayName="FlxTextAreaInput",g.__docgenInfo={description:"",displayName:"FlxTextAreaInput",props:{placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string | undefined"}},filled:{defaultValue:{value:"false"},description:"",name:"filled",required:!1,type:{name:"boolean | undefined"}},minRows:{defaultValue:{value:"2"},description:"",name:"minRows",required:!1,type:{name:"number | undefined"}},maxRows:{defaultValue:null,description:"",name:"maxRows",required:!1,type:{name:"number | undefined"}},heightType:{defaultValue:null,description:"",name:"heightType",required:!1,type:{name:'"fixed" | "auto" | undefined'}},hasError:{defaultValue:{value:"false"},description:"",name:"hasError",required:!1,type:{name:"boolean | undefined"}}}}}catch{}const ue={title:"Text entry",component:x,decorators:[l=>{const e=P({mode:"onTouched",defaultValues:{textarea:""}});return r.jsx(J,{...e,children:r.jsx(l,{})})}],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:function(e){const i=a.useId(),d=`${i}-form-item`,n=`${i}-form-item-description`,t="textarea",s=e.requiredError?{required:"This field is required"}:{},{control:u,resetField:c}=H();return r.jsx("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:r.jsxs(C,{children:[r.jsxs(M,{children:[r.jsx(S,{htmlFor:d,disabled:e.disabled,children:e.label}),e.infoTooltip?r.jsx(L,{children:e.helper}):null]}),r.jsx(B,{name:t,control:u,rules:s,render:({field:p,fieldState:m})=>r.jsxs(r.Fragment,{children:[r.jsx(x,{value:p.value,name:t,onChange:p.onChange,onBlur:p.onBlur,error:!!m.error,placeholder:e.placeholder,disabled:e.disabled,hasClear:e.hasClear,clearFn:()=>c(t),clearIcon:e.hasCustomClearIcon?r.jsx(X,{name:"trash"}):null,minRows:e.minRows,maxRows:e.maxRows}),!e.infoTooltip&&!m.error?r.jsx($,{id:n,children:e.helper}):null,r.jsx(O,{error:m.error})]})})]})})}},k={args:{label:"Input label",fontFamily:"Open Sans",hasClear:!1,disabled:!1,placeholder:"Placeholder",helper:"",infoTooltip:!1,requiredError:!1,hasCustomClearIcon:!1,minRows:3,maxRows:6}},_={...k};var A,j,R;_.parameters={..._.parameters,docs:{...(A=_.parameters)==null?void 0:A.docs,source:{originalSource:`{
  ...TextareaTemplate
} satisfies Story`,...(R=(j=_.parameters)==null?void 0:j.docs)==null?void 0:R.source}}};const ce=["Textarea"];export{_ as Textarea,ce as __namedExportsOrder,ue as default};
