import{r as a}from"./index-Bv9Y92EF.js";import{r as o}from"./index-DZfHsFkt.js";import{u as c}from"./floating-ui.utils.dom-BFiwr5bk.js";import{A as n}from"./useOpenChangeComplete-vwLYIK8G.js";function y(r,u=!1,f=!1){const[i,s]=a.useState(r&&u?"idle":void 0),[t,m]=a.useState(r);return r&&!t&&(m(!0),s("starting")),!r&&t&&i!=="ending"&&!f&&s("ending"),!r&&!t&&i==="ending"&&s(void 0),c(()=>{if(!r&&t&&i!=="ending"&&f){const e=n.request(()=>{s("ending")});return()=>{n.cancel(e)}}},[r,t,i,f]),c(()=>{if(!r||u)return;const e=n.request(()=>{o.flushSync(()=>{s(void 0)})});return()=>{n.cancel(e)}},[u,r]),c(()=>{if(!r||!u)return;r&&t&&i!=="idle"&&s("starting");const e=n.request(()=>{s("idle")});return()=>{n.cancel(e)}},[u,r,t,s,i]),a.useMemo(()=>({mounted:t,setMounted:m,transitionStatus:i}),[t,i])}export{y as u};
