import{r as o}from"./index-Bv9Y92EF.js";import{E as ae,d as te,u as ne,N as j,c as se,m as me}from"./useRenderElement-CQQ5I8lv.js";import{u as $,c as G}from"./floating-ui.utils.dom-cLmtQo3s.js";import{v as ie}from"./useInteractions-DwvY_w4P.js";import{c as he}from"./createBaseUIEventDetails-2goIIMRX.js";import{t as ve}from"./useOpenChangeComplete-DtBfQTi2.js";import{f as de,a as ue,u as le,b as Ce,c as ge,d as ye}from"./useField-CjkaMQbR.js";import{u as ce}from"./useBaseUiId-BJFIvnQ9.js";import{u as Pe,A as Ve,C as be}from"./CompositeRoot-T9Fbzyy1.js";import{u as xe}from"./FieldItemContext-FDB5z_De.js";import{u as ke}from"./useLabelableId-BsVdah0E.js";import{j as P}from"./jsx-runtime-DztICxWZ.js";import{a as Re}from"./useButton-BpCaeLYm.js";import{u as Ie}from"./useControlled-bC22fXfP.js";import{S as Ee}from"./composite-DpKW5ESM.js";import{e as Me}from"./owner-BLNona6N.js";let oe=(function(e){return e.checked="data-checked",e.unchecked="data-unchecked",e.disabled="data-disabled",e.readonly="data-readonly",e.required="data-required",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const re={checked(e){return e?{[oe.checked]:""}:{[oe.unchecked]:""}},...ve,...de};function Te(e){const{render:V,className:B,state:b=ae,props:x=te,refs:k=te,metadata:u,stateAttributesMapping:l,tag:c="div",...R}=e,{compositeProps:I,compositeRef:E}=Pe({metadata:u});return ne(c,e,{state:b,ref:[...k,E],props:[I,...x,R],stateAttributesMapping:l})}const fe=o.createContext({disabled:void 0,readOnly:void 0,required:void 0,name:void 0,checkedValue:"",setCheckedValue:j,onValueChange:j,touched:!1,setTouched:j,registerControlRef:j});function Oe(){return o.useContext(fe)}const Fe=o.createContext(void 0),Qe=o.forwardRef(function(V,B){const{render:b,className:x,disabled:k=!1,readOnly:u=!1,required:l=!1,value:c,inputRef:R,nativeButton:I=!0,id:E,...Y}=V,{disabled:H,readOnly:L,required:N,checkedValue:M,setCheckedValue:g,touched:J,setTouched:U,fieldControlValidation:m,registerControlRef:z}=Oe(),{setDirty:a,validityData:T,setTouched:f,setFilled:d,state:O,disabled:t}=ue(),W=xe(),{getDescriptionProps:F}=le(),n=t||W.disabled||H||k,s=L||u,h=N||l,p=M===c,q=o.useRef(null),v=o.useRef(null),w=se(R,v);$(()=>{var i;(i=v.current)!=null&&i.checked&&d(!0)},[d]);const D=ke({id:E,implicit:!0,controlRef:q}),K={role:"radio","aria-checked":p,"aria-required":h||void 0,"aria-disabled":n||void 0,"aria-readonly":s||void 0,[Ve]:p?"":void 0,id:D??void 0,disabled:n,onKeyDown(i){i.key==="Enter"&&i.preventDefault()},onClick(i){var C;i.defaultPrevented||n||s||(i.preventDefault(),(C=v.current)==null||C.click())},onFocus(i){var C;i.defaultPrevented||n||s||!J||((C=v.current)==null||C.click(),U(!1))}},{getButtonProps:Q,buttonRef:X}=Re({disabled:n,native:I}),_=ce(),Z=o.useMemo(()=>({type:"radio",ref:w,id:_,tabIndex:-1,style:ie,"aria-hidden":!0,disabled:n,checked:p,required:h,readOnly:s,onChange(i){if(i.nativeEvent.defaultPrevented||n||s||c===void 0)return;const C=he("none",i.nativeEvent);C.isCanceled||(f(!0),a(c!==T.initialValue),d(!0),g(c,C))}}),[p,n,_,w,s,h,g,a,f,d,T.initialValue,c]),y=o.useMemo(()=>({...O,required:h,disabled:n,readOnly:s,checked:p}),[O,n,s,p,h]),r=o.useMemo(()=>y,[y]),S=g!==j,A=[B,z,q,X],ee=[K,F,(m==null?void 0:m.getValidationProps)??ae,Y,Q],pe=ne("button",V,{enabled:!S,state:y,ref:A,props:ee,stateAttributesMapping:re});return P.jsxs(Fe.Provider,{value:r,children:[S?P.jsx(Te,{tag:"button",render:b,className:x,state:y,refs:A,props:ee,stateAttributesMapping:re}):pe,P.jsx("input",{...Z})]})}),qe=[Ee],Xe=o.forwardRef(function(V,B){const{render:b,className:x,disabled:k,readOnly:u,required:l,onValueChange:c,value:R,defaultValue:I,name:E,inputRef:Y,id:H,...L}=V,{setTouched:N,setFocused:M,validationMode:g,name:J,disabled:U,state:m}=ue(),{labelId:z}=le(),a=Ce(),{clearErrors:T}=ge(),f=U||k,d=J??E,O=ce(H),[t,W]=Ie({controlled:R,default:I,name:"RadioGroup",state:"value"}),F=G(c),n=G((r,S)=>{F(r,S),!S.isCanceled&&W(r)}),s=o.useRef(null),h=G(r=>{s.current==null&&r!=null&&(s.current=r)});ye({id:O,commitValidation:a.commitValidation,value:t,controlRef:s,name:d,getValue:()=>t??null});const p=o.useRef(t);$(()=>{p.current!==t&&(T(d),g==="onChange"?a.commitValidation(t):a.commitValidation(t,!0))},[d,T,g,t,a]),$(()=>{p.current=t},[t]);const[q,v]=o.useState(!1),w=G(r=>{Me(r.currentTarget,r.relatedTarget)||(N(!0),M(!1),g==="onBlur"&&a.commitValidation(t))}),D=G(r=>{r.key.startsWith("Arrow")&&(N(!0),v(!0),M(!0))}),K=o.useMemo(()=>t==null?"":typeof t=="string"?t:JSON.stringify(t),[t]),Q=se(a.inputRef,Y),X=me({value:K,ref:Q,id:O,name:K?d:void 0,disabled:f,readOnly:u,required:l,"aria-hidden":!0,tabIndex:-1,style:ie,onFocus(){var r;(r=s.current)==null||r.focus()}},a.getInputValidationProps),_=o.useMemo(()=>({...m,disabled:f??!1,required:l??!1,readOnly:u??!1}),[m,f,u,l]),Z=o.useMemo(()=>({...m,checkedValue:t,disabled:f,fieldControlValidation:a,name:d,onValueChange:F,readOnly:u,registerControlRef:h,required:l,setCheckedValue:n,setTouched:v,touched:q}),[t,f,a,m,d,F,u,h,l,n,v,q]),y={role:"radiogroup","aria-required":l||void 0,"aria-disabled":f||void 0,"aria-readonly":u||void 0,"aria-labelledby":z,onFocus(){M(!0)},onBlur:w,onKeyDownCapture:D};return P.jsxs(fe.Provider,{value:Z,children:[P.jsx(be,{render:b,className:x,state:_,props:[y,a.getValidationProps,L],refs:[B],stateAttributesMapping:de,enableHomeAndEndKeys:!1,modifierKeys:qe}),P.jsx("input",{...X})]})});export{Qe as R,Xe as a};
