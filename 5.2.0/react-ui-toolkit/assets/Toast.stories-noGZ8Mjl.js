import{j as f}from"./jsx-runtime-DztICxWZ.js";import{c as qe}from"./clsx-B-dksMZM.js";import{r as t}from"./index-Bv9Y92EF.js";import{l as Ve}from"./lodash-BeRlbo2W.js";import{M as me}from"./Icon-DavT6JvV.js";import{M as de}from"./Button-0EAosVNw.js";import{e as fe,f as Ge,o as Ke,g as We}from"./owner-BLNona6N.js";import{i as Je}from"./inertValue-BGgNEdMY.js";import{c as Qe,u as ae,a as Te}from"./floating-ui.utils.dom-cLmtQo3s.js";import{f as we,u as H}from"./useRenderElement-CQQ5I8lv.js";import{a as Ze,t as et}from"./useOpenChangeComplete-DtBfQTi2.js";import{a as ve}from"./useButton-BpCaeLYm.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";const tt=t.createContext(void 0);function Me(){const e=t.useContext(tt);if(!e)throw new Error(we(6));return e}const De=t.createContext(void 0);function j(){const e=t.useContext(De);if(!e)throw new Error(we(66));return e}let N=(function(e){return e.index="--toast-index",e.offsetY="--toast-offset-y",e.height="--toast-height",e.swipeMovementX="--toast-swipe-movement-x",e.swipeMovementY="--toast-swipe-movement-y",e})({});const nt={...et,swipeDirection(e){return e?{"data-swipe-direction":e}:null}},Y=40,st=10,E=.5,ot=1;function pe(e,a,d){switch(e){case"up":return-d;case"down":return d;case"left":return-a;case"right":return a;default:return 0}}function rt(e){const d=window.getComputedStyle(e).transform;let o=0,C=0,u=1;if(d&&d!=="none"){const x=d.match(/matrix(?:3d)?\(([^)]+)\)/);if(x){const i=x[1].split(", ").map(parseFloat);i.length===6?(o=i[4],C=i[5],u=Math.sqrt(i[0]*i[0]+i[1]*i[1])):i.length===16&&(o=i[12],C=i[13],u=i[0])}}return{x:o,y:C,scale:u}}const it=t.forwardRef(function(a,d){const{toast:o,render:C,className:u,swipeDirection:x=["down","right"],...i}=a,n=Array.isArray(x)?x:[x],{toasts:c,focused:l,close:p,remove:h,setToasts:T,pauseTimers:I,expanded:P,setHovering:Re}=Me(),[ce,k]=t.useState(void 0),[_,le]=t.useState(!1),[Se,G]=t.useState(!1),[Ce,Ie]=t.useState(!1),[b,B]=t.useState({x:0,y:0}),[M,be]=t.useState({x:0,y:0,scale:1}),[K,Ee]=t.useState(),[W,Pe]=t.useState(),[A,J]=t.useState(null),w=t.useRef(null),F=t.useRef({x:0,y:0}),Q=t.useRef({x:0,y:0,scale:1}),X=t.useRef(void 0),Z=t.useRef(0),$=t.useRef(!1),D=t.useRef({x:0,y:0}),ee=t.useRef(!1),te=t.useMemo(()=>c.indexOf(o),[o,c]),ne=t.useMemo(()=>c.filter(s=>s.transitionStatus!=="ending").indexOf(o),[o,c]),_e=t.useMemo(()=>c.slice(0,c.indexOf(o)).reduce((s,r)=>s+(r.height||0),0),[c,o]);Ze({open:o.transitionStatus!=="ending",ref:w,onComplete(){o.transitionStatus==="ending"&&h(o.id)}});const z=Qe(()=>{const s=w.current;if(!s)return;const r=s.style.height;s.style.height="auto";const m=s.offsetHeight;s.style.height=r,T(y=>y.map(g=>g.id===o.id?{...g,ref:w,height:m,transitionStatus:void 0}:g))});ae(z,[z]);function Ne(s,r){let m=s,y=r;return!n.includes("left")&&!n.includes("right")?m=s>0?s**E:-(Math.abs(s)**E):(!n.includes("right")&&s>0&&(m=s**E),!n.includes("left")&&s<0&&(m=-(Math.abs(s)**E))),!n.includes("up")&&!n.includes("down")?y=r>0?r**E:-(Math.abs(r)**E):(!n.includes("down")&&r>0&&(y=r**E),!n.includes("up")&&r<0&&(y=-(Math.abs(r)**E))),{x:m,y}}function Le(s){var y;if(s.button!==0)return;s.pointerType==="touch"&&I();const r=We(s.nativeEvent);if(!(r&&r.closest('button,a,input,textarea,[role="button"],[data-swipe-ignore]'))){if($.current=!1,X.current=void 0,Z.current=0,F.current={x:s.clientX,y:s.clientY},D.current=F.current,w.current){const g=rt(w.current);Q.current=g,be(g),B({x:g.x,y:g.y})}Re(!0),le(!0),G(!1),J(null),ee.current=!0,(y=w.current)==null||y.setPointerCapture(s.pointerId)}}function Oe(s){if(!_)return;s.preventDefault(),ee.current&&(F.current={x:s.clientX,y:s.clientY},ee.current=!1);const{clientY:r,clientX:m,movementX:y,movementY:g}=s;(g<0&&r>D.current.y||g>0&&r<D.current.y)&&(D.current={x:D.current.x,y:r}),(y<0&&m>D.current.x||y>0&&m<D.current.x)&&(D.current={x:m,y:D.current.y});const v=m-F.current.x,R=r-F.current.y,Be=r-D.current.y,Xe=m-D.current.x;if(!Se&&Math.sqrt(v*v+R*R)>=ot&&(G(!0),A===null)){const q=n.includes("left")||n.includes("right"),$e=n.includes("up")||n.includes("down");if(q&&$e){const ze=Math.abs(v),Ue=Math.abs(R);J(ze>Ue?"horizontal":"vertical")}}let S;if(!X.current)A==="vertical"?R>0?S="down":R<0&&(S="up"):A==="horizontal"?v>0?S="right":v<0&&(S="left"):Math.abs(v)>=Math.abs(R)?S=v>0?"right":"left":S=R>0?"down":"up",S&&n.includes(S)&&(X.current=S,Z.current=pe(S,v,R),k(S));else{const re=X.current,q=pe(re,Xe,Be);q>Y?($.current=!1,k(re)):Z.current-q>=st&&($.current=!0)}const U=Ne(v,R);let se=Q.current.x,oe=Q.current.y;A==="horizontal"?(n.includes("left")||n.includes("right"))&&(se+=U.x):(A==="vertical"||(n.includes("left")||n.includes("right"))&&(se+=U.x),(n.includes("up")||n.includes("down"))&&(oe+=U.y)),B({x:se,y:oe})}function je(s){var v;if(!_)return;if(le(!1),G(!1),J(null),(v=w.current)==null||v.releasePointerCapture(s.pointerId),$.current){B({x:M.x,y:M.y}),k(void 0);return}let r=!1;const m=b.x-M.x,y=b.y-M.y;let g;for(const R of n){switch(R){case"right":m>Y&&(r=!0,g="right");break;case"left":m<-Y&&(r=!0,g="left");break;case"down":y>Y&&(r=!0,g="down");break;case"up":y<-Y&&(r=!0,g="up");break}if(r)break}r?(k(g),Ie(!0),p(o.id)):(B({x:M.x,y:M.y}),k(void 0))}function ke(s){if(s.key==="Escape"){if(!w.current||!fe(w.current,Ge(Ke(w.current))))return;p(o.id)}}t.useEffect(()=>{const s=w.current;if(!s)return;function r(m){fe(s,m.target)&&m.preventDefault()}return s.addEventListener("touchmove",r,{passive:!1}),()=>{s.removeEventListener("touchmove",r)}},[]);function Ae(){if(!_&&b.x===M.x&&b.y===M.y&&!Ce)return{[N.swipeMovementX]:"0px",[N.swipeMovementY]:"0px"};const s=b.x-M.x,r=b.y-M.y;return{transition:_?"none":void 0,transform:_?`translateX(${b.x}px) translateY(${b.y}px) scale(${M.scale})`:void 0,[N.swipeMovementX]:`${s}px`,[N.swipeMovementY]:`${r}px`}}const ue=o.priority==="high",Fe={role:ue?"alertdialog":"dialog",tabIndex:0,"aria-modal":!1,"aria-labelledby":K,"aria-describedby":W,"aria-hidden":ue&&!l?!0:void 0,onPointerDown:Le,onPointerMove:Oe,onPointerUp:je,onKeyDown:ke,inert:Je(o.limited),style:{...Ae(),[N.index]:o.transitionStatus==="ending"?te:ne,[N.offsetY]:`${_e}px`,[N.height]:o.height?`${o.height}px`:void 0}},L=t.useMemo(()=>({rootRef:w,toast:o,titleId:K,setTitleId:Ee,descriptionId:W,setDescriptionId:Pe,swiping:_,swipeDirection:ce,recalculateHeight:z,index:te,visibleIndex:ne,expanded:P}),[o,K,W,_,ce,z,te,ne,P]),Ye=t.useMemo(()=>({transitionStatus:o.transitionStatus,expanded:P,limited:o.limited||!1,type:o.type,swiping:L.swiping,swipeDirection:L.swipeDirection}),[P,o.transitionStatus,o.limited,o.type,L.swiping,L.swipeDirection]),He=H("div",a,{ref:[d,L.rootRef],state:Ye,stateAttributesMapping:nt,props:[Fe,i]});return f.jsx(De.Provider,{value:L,children:He})}),at=t.forwardRef(function(a,d){const{render:o,className:C,id:u,children:x,...i}=a,{toast:n}=j(),c=x??n.description,l=!!c,p=Te(u),{setDescriptionId:h}=j();ae(()=>{if(l)return h(p),()=>{h(void 0)}},[l,p,h]);const T=t.useMemo(()=>({type:n.type}),[n.type]),I=H("p",a,{ref:d,state:T,props:{...i,id:p,children:c}});return l?I:null}),ct=t.forwardRef(function(a,d){const{render:o,className:C,id:u,children:x,...i}=a,{toast:n}=j(),c=x??n.title,l=!!c,p=Te(u),{setTitleId:h}=j();ae(()=>{if(l)return h(p),()=>{h(void 0)}},[l,p,h]);const T=t.useMemo(()=>({type:n.type}),[n.type]),I=H("h2",a,{ref:d,state:T,props:{...i,id:p,children:c}});return l?I:null}),lt=t.forwardRef(function(a,d){const{render:o,className:C,disabled:u,nativeButton:x=!0,...i}=a,{close:n,expanded:c}=Me(),{toast:l}=j(),{getButtonProps:p,buttonRef:h}=ve({disabled:u,native:x}),T=t.useMemo(()=>({type:l.type}),[l.type]);return H("button",a,{ref:[d,h],state:T,props:[{"aria-hidden":!c,onClick(){n(l.id)}},i,p]})}),ut=t.forwardRef(function(a,d){var P;const{render:o,className:C,disabled:u,nativeButton:x=!0,...i}=a,{toast:n}=j(),c=((P=n.actionProps)==null?void 0:P.children)??i.children,l=!!c,{getButtonProps:p,buttonRef:h}=ve({disabled:u,native:x}),T=t.useMemo(()=>({type:n.type}),[n.type]),I=H("button",a,{ref:[d,h],state:T,props:[i,n.actionProps,p,{children:c}]});return l?I:null}),mt=2e3,dt=Ve.memoize(e=>({error:3e3,warning:3e3,info:3e3,success:2e3})[e]||mt),ge=1e4,ft=50,O=({data:e,onCloseToast:a,className:d,...o})=>{var c;const C=t.useId(),u=t.useCallback(()=>{a==null||a(e)},[a,e]),x=t.useCallback(l=>{l.event(),u()},[u]),i=t.useMemo(()=>{var h,T;if(e!=null&&e.closeInterval)return e==null?void 0:e.closeInterval;const l=((((h=e.title)==null?void 0:h.length)||0)+(((T=e.message)==null?void 0:T.length)||0))*ft,p=dt(e.messageType);return l<p?p:l>ge?ge:l},[e.closeInterval,e.messageType,e.title,e.message]),n=t.useRef(null);return t.useEffect(()=>(n.current=setTimeout(()=>{u()},i),()=>{n.current&&clearTimeout(n.current)}),[u,i]),f.jsx(it,{...o,role:"alert",className:qe("container",e.messageType,d),swipeDirection:"down",toast:{id:C,title:e.title,description:e.message,onClose:u},"data-testid":`messageType-${e.messageType}`,children:f.jsxs("div",{className:"content",children:[f.jsx(me,{name:e.icon||e.messageType,className:"type-icon"}),f.jsxs("div",{children:[e.title?f.jsx(ct,{className:"title",children:e.title}):null,e.message?f.jsx(at,{className:"message",children:e.message}):null,e.action?f.jsx(ut,{render:f.jsx(de,{variant:"text",className:"action",onClick:()=>x(e.action),children:(c=e.action)==null?void 0:c.name})}):null]}),f.jsx(lt,{render:f.jsx(de,{variant:"text",className:"close",onClick:()=>u(),children:f.jsx(me,{name:"dismiss",className:"close-icon"})})})]})})},ie=t.memo(O);ie.displayName="MemoFlxToast";try{ie.displayName="MemoFlxToast",ie.__docgenInfo={description:"",displayName:"MemoFlxToast",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ToastData"}},onCloseToast:{defaultValue:null,description:"",name:"onCloseToast",required:!1,type:{name:"((data: ToastData) => void) | undefined"}}}}}catch{}const Et={component:O,title:"Toast"},V={render:()=>f.jsxs(f.Fragment,{children:[f.jsx(O,{data:{messageType:"success",title:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(O,{data:{messageType:"info",message:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(O,{data:{messageType:"warning",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(O,{data:{messageType:"error",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. "},onCloseToast:e=>console.log("onCloseToast",e)})]})};var xe,he,ye;V.parameters={...V.parameters,docs:{...(xe=V.parameters)==null?void 0:xe.docs,source:{originalSource:`{
  render: () => <>
      <FlxToast data={{
      messageType: 'success',
      title: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'info',
      message: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'warning',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'error',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. '
    }} onCloseToast={data => console.log('onCloseToast', data)} />
    </>
}`,...(ye=(he=V.parameters)==null?void 0:he.docs)==null?void 0:ye.source}}};const Pt=["Toast"];export{V as Toast,Pt as __namedExportsOrder,Et as default};
