import{j as o}from"./jsx-runtime-DztICxWZ.js";import{r}from"./index-Bv9Y92EF.js";import{u as Ue,F as We,a as Ke,b as ze,C as Qe,c as Ze,d as De,f as et,e as tt}from"./InfoTooltip-Dv4GrHSn.js";import{c as xe}from"./clsx-B-dksMZM.js";import{F as nt}from"./Icon-VZws6Zev.js";import{F as ot,a as rt}from"./ChoiceGroup-DFl-5DaW.js";import{u as Ve}from"./useControlled-bC22fXfP.js";import{b as ie,u as be}from"./floating-ui.utils.dom-BFiwr5bk.js";import{u as Q,c as at,n as lt}from"./createBaseUIEventDetails-C1JAek35.js";import{f as st,N as it,c as ct,m as dt,E as ut,u as Pe,d as Ce}from"./useRenderElement-IQYmzFOi.js";import{f as Ee,b as Re,a as Se,u as je,c as Ie,d as _e}from"./useValueChanged-CWY3wgwM.js";import{v as pt}from"./ReactStore-BIANnnUv.js";import{a as mt}from"./useButton-BU0a48-b.js";import{u as ft}from"./FieldItemContext-FDB5z_De.js";import{a as ht}from"./areArraysEqual-DHGtHcjb.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";import"./DirectionContext-C0NX5zCF.js";import"./owner-CUO6ebsU.js";import"./useOpenChangeComplete-vwLYIK8G.js";import"./useTransitionStatus-DQ3yU_0a.js";import"./event-BYna9Hj-.js";let ke=(function(t){return t.checked="data-checked",t.unchecked="data-unchecked",t.disabled="data-disabled",t.readonly="data-readonly",t.required="data-required",t.valid="data-valid",t.invalid="data-invalid",t.touched="data-touched",t.dirty="data-dirty",t.filled="data-filled",t.focused="data-focused",t})({});function xt(t){return r.useMemo(()=>({checked(e){return t.indeterminate?{}:e?{[ke.checked]:""}:{[ke.unchecked]:""}},...Ee}),[t.indeterminate])}const Ne=r.createContext(void 0);function bt(t=!0){const e=r.useContext(Ne);if(e===void 0&&!t)throw new Error(st(3));return e}const Ct=r.createContext(void 0),we="data-parent",kt=r.forwardRef(function(e,i){const{checked:k,className:E,defaultChecked:f=!1,disabled:y=!1,id:p,indeterminate:s=!1,inputRef:d,name:x,onCheckedChange:l,parent:c=!1,readOnly:m=!1,render:h,required:a=!1,value:u,nativeButton:g=!1,...R}=e,{clearErrors:q}=Re(),{disabled:F,name:Z,setDirty:w,setFilled:P,setFocused:J,setTouched:X,state:O,validationMode:D,validityData:B,shouldValidateOnChange:Y,validation:j}=Se(),ee=ft(),{registerLabelableControlRef:te,labelId:ne,controlId:V,setControlId:I,getDescriptionProps:ce}=je(),n=bt(),T=n==null?void 0:n.parent,U=T&&n.allValues,_=F||ee.disabled||(n==null?void 0:n.disabled)||y,G=Z??x,C=u??G,de=Q(),Me=Q();let L=V;U?L=c?Me:`${T.id}-${C}`:p&&(L=p);let oe={};U&&(c?oe=n.parent.getParentProps():C&&(oe=n.parent.getChildProps(C)));const qe=ie(l),{checked:ue=k,indeterminate:W=s,onCheckedChange:re,...Oe}=oe,M=n==null?void 0:n.value,pe=n==null?void 0:n.setValue,me=n==null?void 0:n.defaultValue,ae=r.useRef(null),{getButtonProps:Be,buttonRef:Te}=mt({disabled:_,native:g}),S=(n==null?void 0:n.validation)??j,[b,Le]=Ve({controlled:C&&M&&!c?M.includes(C):ue,default:C&&me&&!c?me.includes(C):f,name:"Checkbox",state:"checked"});be(()=>{if(I!==it)return I(L),()=>{I(void 0)}},[L,n,I,c]),Ie({enabled:!n,id:de,commit:S.commit,value:b,controlRef:ae,name:G,getValue:()=>b});const H=r.useRef(null),He=ct(d,H,S.inputRef);be(()=>{H.current&&(H.current.indeterminate=W,b&&P(!0))},[b,W,P]),_e(b,()=>{n&&!c||(q(G),P(b),w(b!==B.initialValue),Y()?S.commit(b):S.commit(b,!0))});const $e=dt({checked:b,disabled:_,name:c?void 0:G,id:L??void 0,required:a,ref:He,style:pt,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(v){if(v.nativeEvent.defaultPrevented)return;const N=v.target.checked,K=at(lt,v.nativeEvent);if(re==null||re(N,K),qe(N,K),!K.isCanceled&&(Le(N),C&&M&&pe&&!c)){const Xe=N?[...M,C]:M.filter(Ye=>Ye!==C);pe(Xe,K)}},onFocus(){var v;(v=ae.current)==null||v.focus()}},u!==void 0?{value:(n?b&&u:u)||""}:ut,ce,n?S.getValidationProps:S.getInputValidationProps),fe=U?!!ue:b,he=U&&W||s;r.useEffect(()=>{T&&C&&T.disabledStatesRef.current.set(C,_)},[T,_,C]);const le=r.useMemo(()=>({...O,checked:fe,disabled:_,readOnly:m,required:a,indeterminate:he}),[O,fe,_,m,a,he]),Ae=xt(le),Je=Pe("span",e,{state:le,ref:[Te,ae,i,n==null?void 0:n.registerControlRef,te],props:[{id:de,role:"checkbox","aria-checked":W?"mixed":b,"aria-readonly":m||void 0,"aria-required":a||void 0,"aria-labelledby":ne,[we]:c?"":void 0,onFocus(){J(!0)},onBlur(){const v=H.current;v&&(X(!0),J(!1),D==="onBlur"&&S.commit(n?M:v.checked))},onClick(v){var N;m||_||(v.preventDefault(),(N=H.current)==null||N.click())}},ce,S.getValidationProps,R,Oe,Be],stateAttributesMapping:Ae});return o.jsxs(Ct.Provider,{value:le,children:[Je,!b&&!n&&G&&!c&&o.jsx("input",{type:"hidden",name:G,value:"off"}),o.jsx("input",{...$e})]})}),ye=[];function yt(t){const{allValues:e=ye,value:i=ye,onValueChange:k}=t,E=r.useRef(i),f=r.useRef(new Map),[y,p]=r.useState("mixed"),s=Q(),d=i.length===e.length,x=i.length!==e.length&&i.length>0,l=ie(k),c=r.useCallback(()=>({id:s,indeterminate:x,checked:d,"aria-controls":e.map(h=>`${s}-${h}`).join(" "),onCheckedChange(h,a){const u=E.current,g=e.filter(F=>f.current.get(F)&&u.includes(F)),R=e.filter(F=>!f.current.get(F)||f.current.get(F)&&u.includes(F));if(u.length===R.length||u.length===0){i.length===R.length?l(g,a):l(R,a);return}y==="mixed"?(l(R,a),p("on")):y==="on"?(l(g,a),p("off")):y==="off"&&(l(u,a),p("mixed"))}}),[e,d,s,x,l,y,i.length]),m=r.useCallback(h=>({checked:i.includes(h),onCheckedChange(a,u){const g=i.slice();a?g.push(h):g.splice(g.indexOf(h),1),E.current=g,l(g,u),p("mixed")}}),[l,i]);return r.useMemo(()=>({id:s,indeterminate:x,getParentProps:c,getChildProps:m,disabledStatesRef:f}),[s,x,c,m])}const gt=r.forwardRef(function(e,i){const{allValues:k,className:E,defaultValue:f,disabled:y=!1,id:p,onValueChange:s,render:d,value:x,...l}=e,{disabled:c,name:m,state:h,validation:a,setFilled:u,setDirty:g,shouldValidateOnChange:R,validityData:q}=Se(),{labelId:F}=je(),{clearErrors:Z}=Re(),w=c||y,[P,J]=Ve({controlled:x,default:f,name:"CheckboxGroup",state:"value"}),X=ie((V,I)=>{s==null||s(V,I),!I.isCanceled&&J(V)}),O=yt({allValues:k,value:x,onValueChange:s}),D=Q(p),B=r.useRef(null),Y=r.useCallback(V=>{B.current==null&&V!=null&&!V.hasAttribute(we)&&(B.current=V)},[]);Ie({enabled:!!m,id:D,commit:a.commit,value:P,controlRef:B,name:m,getValue:()=>P});const j=P??Ce;_e(j,()=>{m&&Z(m);const V=Array.isArray(q.initialValue)?q.initialValue:Ce;u(j.length>0),g(!ht(j,V)),R()?a.commit(j):a.commit(j,!0)});const ee=r.useMemo(()=>({...h,disabled:w}),[h,w]),te=r.useMemo(()=>({allValues:k,value:P,defaultValue:f,setValue:X,parent:O,disabled:w,validation:a,registerControlRef:Y}),[k,P,f,X,O,w,a,Y]),ne=Pe("div",e,{state:ee,ref:i,props:[{role:"group","aria-labelledby":F},l],stateAttributesMapping:Ee});return o.jsx(Ne.Provider,{value:te,children:ne})}),Ge=r.createContext({}),vt=()=>r.useContext(Ge),$=r.forwardRef(({label:t,choiceIconSelected:e=null,choiceIconUnselected:i=null,disabled:k,reversedLabel:E=!1,value:f="on",className:y,checked:p,onBlur:s,...d},x)=>{const l=r.useId(),{noBorder:c}=vt(),[m,h]=r.useState(!1),a=r.useMemo(()=>p?e:i,[p,e,i]);return o.jsx(kt,{...d,id:l,"aria-labelledby":l,className:xe(["flx-checkbox",{"flx-checkbox-reversed":E},{"flx-checkbox-clear":c},y]),ref:x,disabled:k,checked:p,value:f,onFocus:()=>{h(!0)},onBlur:u=>{h(!1),s==null||s(u)},children:o.jsxs("label",{htmlFor:l,className:xe(["flx-checkbox-label",{disabled:k},{checked:p},{focused:m},{empty:!p}]),children:[o.jsx("div",{className:"flx-checkbox-icons",children:a?o.jsx("div",{className:"flx-checkbox-icon",children:a}):o.jsx("div",{className:"flx-checkbox-container",children:o.jsx(nt,{name:"check"})})}),o.jsx("div",{className:"flx-checkbox-text",children:t})]})})});$.displayName="FlxCheckbox";const A=({noBorder:t=!1,...e})=>o.jsx(Ge.Provider,{value:{noBorder:t},children:o.jsx(gt,{...e,render:o.jsx(ot,{})})});A.displayName="FlxCheckboxGroup";const se=r.memo(A);se.displayName="MemoFlxCheckboxGroup";try{$.displayName="FlxCheckbox",$.__docgenInfo={description:"",displayName:"FlxCheckbox",props:{choiceIconSelected:{defaultValue:{value:"null"},description:"",name:"choiceIconSelected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},choiceIconUnselected:{defaultValue:{value:"null"},description:"",name:"choiceIconUnselected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},reversedLabel:{defaultValue:{value:"false"},description:"",name:"reversedLabel",required:!1,type:{name:"boolean | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"Whether the component should ignore user interaction.",name:"disabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxRootState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxRootState> | undefined"}}}}}catch{}try{A.displayName="FlxCheckboxGroup",A.__docgenInfo={description:"",displayName:"FlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}try{se.displayName="MemoFlxCheckboxGroup",se.__docgenInfo={description:"",displayName:"MemoFlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}const Ft=["Option 1","Option 2","Option 3"],Ut={component:$,title:"Choices",decorators:[t=>o.jsx(et,{...tt({mode:"onChange",defaultValues:{checkbox:[]}}),children:o.jsx(t,{})})],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}},disabledFirstOption:{control:{type:"boolean"}},groupDirection:{options:["row","column"],control:{type:"select"}}},render:function(e){const i=r.useId(),k=`${i}-form-item`,E=`${i}-form-item-description`,f="checkbox",y=e.requiredError?{validate:{required:d=>d.length>0||"This field is required"}}:{},{control:p,watch:s}=Ue();return o.jsxs("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:[o.jsxs(rt,{direction:e.groupDirection,children:[o.jsxs(We,{children:[o.jsx(Ke,{htmlFor:k,disabled:e.disabled,children:e.label}),e.infoTooltip?o.jsx(ze,{children:e.helper}):null]}),o.jsx(Qe,{disabled:e.disabled,control:p,name:f,rules:e.requiredError?y:{},render:({field:d,fieldState:x})=>o.jsxs(o.Fragment,{children:[o.jsx(A,{noBorder:e.noBorder,style:{width:e.width?`${e.width}px`:"100%"},children:Ft.map((l,c)=>{var m;return o.jsx($,{name:d.name,label:l,reversedLabel:e.reversedLabel,disabled:d.disabled||e.disabledFirstOption&&c===0,checked:(m=d.value)==null?void 0:m.includes(l),onBlur:d.onBlur,onCheckedChange:h=>{var a;return h?d.onChange([...d.value,l]):d.onChange((a=d.value)==null?void 0:a.filter(u=>u!==l))}},l)})}),!e.infoTooltip&&!x.error?o.jsx(Ze,{id:E,children:e.helper}):null,o.jsx(De,{error:x.error})]})})]}),o.jsxs("p",{children:["Selected options: ",s(f).join(",")]})]})}},z={args:{disabled:!1,label:"Checkbox label",helper:"Helper text",infoTooltip:!1,requiredError:!1,reversedLabel:!1,disabledFirstOption:!1,groupDirection:"row",noBorder:!1}};var ge,ve,Fe;z.parameters={...z.parameters,docs:{...(ge=z.parameters)==null?void 0:ge.docs,source:{originalSource:`{
  args: {
    disabled: false,
    label: 'Checkbox label',
    helper: 'Helper text',
    infoTooltip: false,
    requiredError: false,
    reversedLabel: false,
    disabledFirstOption: false,
    groupDirection: 'row',
    noBorder: false
  }
}`,...(Fe=(ve=z.parameters)==null?void 0:ve.docs)==null?void 0:Fe.source}}};const Wt=["Checkbox"];export{z as Checkbox,Wt as __namedExportsOrder,Ut as default};
