var vt=Object.defineProperty;var Rt=(e,t,n)=>t in e?vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>Rt(e,typeof t!="symbol"?t+"":t,n);import{j as D}from"./jsx-runtime-DztICxWZ.js";import{c as Et}from"./clsx-B-dksMZM.js";import{r as l}from"./index-Bv9Y92EF.js";import{M as xt}from"./Icon-VZws6Zev.js";import{f as rt,u as de,c as _e,E as he,N as St,b as Ct}from"./useRenderElement-IQYmzFOi.js";import{g as st,b as ne,a as ue,u as oe,e as Re,c as Tt,f as it}from"./floating-ui.utils.dom-BFiwr5bk.js";import{h as K,j as He,k as Ie,f as ce,e as B,g as ye,o as Ee,l as kt,m as wt}from"./owner-CUO6ebsU.js";import{p as at,u as It,a as Pt,b as Ge,t as lt,g as Fe,c as $e,d as Ye,v as Ft,e as Ue,F as Xe,i as Ke,f as Mt,h as Ot,j as ut,C as Dt,k as Nt,l as Lt,m as pe,n as At,T as ze,o as Vt,q as qt,r as jt,R as Bt,s as F,w as Wt}from"./ReactStore-BIANnnUv.js";import{t as ct,d as me,b as _t,r as ie,u as dt,A as Ht}from"./useOpenChangeComplete-vwLYIK8G.js";import{u as Gt}from"./useTransitionStatus-DQ3yU_0a.js";import{c as Me,e as $t,u as ft,f as Yt,o as Ut,g as Xt,h as Kt}from"./createBaseUIEventDetails-C1JAek35.js";import{i as zt}from"./inertValue-B83C-BnE.js";import{C as Jt}from"./composite-BcX4eBbW.js";import{i as Qt,a as Zt,s as en}from"./event-BYna9Hj-.js";import{a as tn}from"./useButton-BU0a48-b.js";const pt=l.createContext(void 0);function re(e){const t=l.useContext(pt);if(e===!1&&t===void 0)throw new Error(rt(27));return t}const nn={...at,...ct},on=l.forwardRef(function(t,n){const{render:o,className:i,forceRender:r=!1,...a}=t,{store:c}=re(),s=c.useState("open"),p=c.useState("nested"),f=c.useState("mounted"),P=c.useState("transitionStatus"),y=l.useMemo(()=>({open:s,transitionStatus:P}),[s,P]);return de("div",t,{state:y,ref:[c.context.backdropRef,n],stateAttributesMapping:nn,props:[{role:"presentation",hidden:!f,style:{userSelect:"none",WebkitUserSelect:"none"}},a],enabled:r||!p})}),rn=l.forwardRef(function(t,n){const{render:o,className:i,disabled:r=!1,nativeButton:a=!0,...c}=t,{store:s}=re(),p=s.useState("open");function f(d){p&&s.setOpen(!1,Me($t,d.nativeEvent))}const{getButtonProps:P,buttonRef:y}=tn({disabled:r,native:a}),m=l.useMemo(()=>({disabled:r}),[r]);return de("button",t,{state:m,ref:[n,y],props:[{onClick:f},c,P]})}),sn=l.forwardRef(function(t,n){const{render:o,className:i,id:r,...a}=t,{store:c}=re(),s=ft(r);return c.useSyncedValueWithCleanup("descriptionElementId",s),de("p",t,{ref:n,props:[{id:s},a]})});let Je=0;function Te(e,t={}){const{preventScroll:n=!1,cancelPrevious:o=!0,sync:i=!1}=t;o&&cancelAnimationFrame(Je);const r=()=>e==null?void 0:e.focus({preventScroll:n});i?r():Je=requestAnimationFrame(r)}const ae={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function Qe(e){return e==="inert"?ae.inert:e==="aria-hidden"?ae["aria-hidden"]:ae.none}let ge=new WeakSet,be={},ke=0;const mt=e=>e&&(e.host||mt(e.parentNode)),an=(e,t)=>t.map(n=>{if(e.contains(n))return n;const o=mt(n);return e.contains(o)?o:null}).filter(n=>n!=null);function ln(e,t,n,o){const i="data-base-ui-inert",r=o?"inert":n?"aria-hidden":null,a=an(t,e),c=new Set,s=new Set(a),p=[];be[i]||(be[i]=new WeakMap);const f=be[i];a.forEach(P),y(t),c.clear();function P(m){!m||c.has(m)||(c.add(m),m.parentNode&&P(m.parentNode))}function y(m){!m||s.has(m)||[].forEach.call(m.children,d=>{if(st(d)!=="script")if(c.has(d))y(d);else{const k=r?d.getAttribute(r):null,S=k!==null&&k!=="false",w=Qe(r),I=(w.get(d)||0)+1,M=(f.get(d)||0)+1;w.set(d,I),f.set(d,M),p.push(d),I===1&&S&&ge.add(d),M===1&&d.setAttribute(i,""),!S&&r&&d.setAttribute(r,r==="inert"?"":"true")}})}return ke+=1,()=>{p.forEach(m=>{const d=Qe(r),S=(d.get(m)||0)-1,w=(f.get(m)||0)-1;d.set(m,S),f.set(m,w),S||(!ge.has(m)&&r&&m.removeAttribute(r),ge.delete(m)),w||m.removeAttribute(i)}),ke-=1,ke||(ae.inert=new WeakMap,ae["aria-hidden"]=new WeakMap,ae.none=new WeakMap,ge=new WeakSet,be={})}}function un(e,t=!1,n=!1){const o=K(e[0]).body;return ln(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}function cn(e,t){const n=Re(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Ze=20;let ee=[];function Oe(){ee=ee.filter(e=>e.isConnected)}function dn(e){Oe(),e&&st(e)!=="body"&&(ee.push(e),ee.length>Ze&&(ee=ee.slice(-Ze)))}function we(){return Oe(),ee[ee.length-1]}function fn(e){if(!e)return null;const t=Fe();return ut(e,t)?e:lt(e,t)[0]||e}function et(e,t){var a;if(!t.current.includes("floating")&&!((a=e.getAttribute("role"))!=null&&a.includes("dialog")))return;const n=Fe(),i=Nt(e,n).filter(c=>{const s=c.getAttribute("data-tabindex")||"";return ut(c,n)||c.hasAttribute("data-tabindex")&&!s.startsWith("-")}),r=e.getAttribute("tabindex");t.current.includes("floating")||i.length===0?r!=="0"&&e.setAttribute("tabindex","0"):(r!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function pn(e){const{context:t,children:n,disabled:o=!1,order:i=["content"],initialFocus:r=!0,returnFocus:a=!0,restoreFocus:c=!1,modal:s=!0,closeOnFocusOut:p=!0,openInteractionType:f="",getInsideElements:P=()=>[],nextFocusableElement:y,previousFocusableElement:m,beforeContentFocusGuardRef:d,externalTree:k}=e,{open:S,onOpenChange:w,events:I,dataRef:M,elements:{domReference:R,floating:C,triggers:q}}=t,A=ne(()=>{var g;return(g=M.current.floatingContext)==null?void 0:g.nodeId}),W=ne(P),_=r===!1,V=He(R)&&_,O=me(i),z=me(r),se=me(a),fe=me(f),j=It(k),u=Pt(),Y=l.useRef(null),J=l.useRef(null),H=l.useRef(!1),xe=l.useRef(!1),De=l.useRef(-1),Ne=l.useRef(""),Se=l.useRef(""),Le=Ge(),Ae=Ge(),Ve=_t(),Ce=u!=null,h=Ie(C),te=ne((g=h)=>g?lt(g,Fe()):[]),le=ne(g=>{const x=te(g);return O.current.map(()=>x).filter(Boolean).flat()});l.useEffect(()=>{if(o||!s)return;function g(v){v.key==="Tab"&&B(h,ce(K(h)))&&te().length===0&&!V&&en(v)}const x=K(h);return x.addEventListener("keydown",g),()=>{x.removeEventListener("keydown",g)}},[o,R,h,s,O,V,te,le]),l.useEffect(()=>{if(o||!C)return;function g(x){const v=ye(x),N=te().indexOf(v);N!==-1&&(De.current=N)}return C.addEventListener("focusin",g),()=>{C.removeEventListener("focusin",g)}},[o,C,te]),l.useEffect(()=>{if(o||!S)return;const g=K(h);function x(T){Se.current=T.pointerType||"keyboard"}function v(){Se.current="keyboard"}return g.addEventListener("pointerdown",x,!0),g.addEventListener("keydown",v,!0),()=>{g.removeEventListener("pointerdown",x,!0),g.removeEventListener("keydown",v,!0)}},[o,C,R,h,S]),l.useEffect(()=>{if(o||!p)return;function g(){xe.current=!0,Ae.start(0,()=>{xe.current=!1})}function x(b){const E=b.relatedTarget,U=b.currentTarget,L=ye(b);queueMicrotask(()=>{const G=A(),yt=!(B(R,E)||B(C,E)||B(E,C)||B(u==null?void 0:u.portalNode,E)||q!=null&&q.some($=>B($,E))||E!=null&&E.hasAttribute($e("focus-guard"))||j&&(Ue(j.nodesRef.current,G).find($=>{var X,Q;return B((X=$.context)==null?void 0:X.elements.floating,E)||B((Q=$.context)==null?void 0:Q.elements.domReference,E)})||Ye(j.nodesRef.current,G).find($=>{var X,Q,We;return[(X=$.context)==null?void 0:X.elements.floating,Ie((Q=$.context)==null?void 0:Q.elements.floating)].includes(E)||((We=$.context)==null?void 0:We.elements.domReference)===E})));if(U===R&&h&&et(h,O),c&&U!==R&&!(L!=null&&L.isConnected)&&ce(K(h))===K(h).body){if(ue(h)&&(h.focus(),c==="popup")){Ve.request(()=>{h.focus()});return}const $=De.current,X=te(),Q=X[$]||X[X.length-1]||h;ue(Q)&&Q.focus()}if(M.current.insideReactTree){M.current.insideReactTree=!1;return}(V||!s)&&E&&yt&&(V||E!==we())&&(H.current=!0,w(!1,Me(Xt,b)))})}function v(){M.current.insideReactTree=!0,Le.start(0,()=>{M.current.insideReactTree=!1})}const T=ue(R)?R:null,N=[];if(!(!C&&!T))return T&&(T.addEventListener("focusout",x),T.addEventListener("pointerdown",g),N.push(()=>{T.removeEventListener("focusout",x),T.removeEventListener("pointerdown",g)})),C&&(C.addEventListener("focusout",x),u&&(C.addEventListener("focusout",v,!0),N.push(()=>{C.removeEventListener("focusout",v,!0)})),N.push(()=>{C.removeEventListener("focusout",x)})),()=>{N.forEach(b=>{b()})}},[o,R,C,h,s,j,u,w,p,c,te,V,A,O,M,Le,Ae,Ve,q]);const qe=l.useRef(null),je=l.useRef(null),bt=_e(qe,d,u==null?void 0:u.beforeInsideRef),ht=_e(je,u==null?void 0:u.afterInsideRef);l.useEffect(()=>{var b,E,U;if(o||!C||!S)return;const g=Array.from(((b=u==null?void 0:u.portalNode)==null?void 0:b.querySelectorAll(`[${$e("portal")}]`))||[]),v=(U=(E=(j?Ye(j.nodesRef.current,A()):[]).find(L=>{var G;return He(((G=L.context)==null?void 0:G.elements.domReference)||null)}))==null?void 0:E.context)==null?void 0:U.elements.domReference,T=[C,v,...g,...W(),Y.current,J.current,qe.current,je.current,u==null?void 0:u.beforeOutsideRef.current,u==null?void 0:u.afterOutsideRef.current,ie(m),ie(y),V?R:null].filter(L=>L!=null),N=un(T,s||V);return()=>{N()}},[S,o,R,C,s,O,u,V,j,A,W,y,m]),oe(()=>{if(!S||o||!ue(h))return;const g=K(h),x=ce(g);queueMicrotask(()=>{const v=le(h),T=z.current,N=typeof T=="function"?T(fe.current||""):T;if(N===void 0||N===!1)return;let b;N===!0||N===null?b=v[0]||h:b=ie(N),b=b||v[0]||h,!B(h,x)&&Te(b,{preventScroll:b===h})})},[o,S,h,_,le,z,fe]),oe(()=>{if(o||!h)return;const g=K(h),x=ce(g);dn(x);function v(b){if(b.open||(Ne.current=cn(b.nativeEvent,Se.current)),b.reason===Yt&&b.nativeEvent.type==="mouseleave"&&(H.current=!0),b.reason===Ut)if(b.nested)H.current=!1;else if(Qt(b.nativeEvent)||Zt(b.nativeEvent))H.current=!1;else{let E=!1;document.createElement("div").focus({get preventScroll(){return E=!0,!1}}),E?H.current=!1:H.current=!0}}I.on("openchange",v);const T=g.createElement("span");T.setAttribute("tabindex","-1"),T.setAttribute("aria-hidden","true"),Object.assign(T.style,Ft),Ce&&R&&R.insertAdjacentElement("afterend",T);function N(){const b=se.current;let E=typeof b=="function"?b(Ne.current):b;if(E===void 0||E===!1)return null;if(E===null&&(E=!0),typeof E=="boolean"){const L=R||we();return L&&L.isConnected?L:T}const U=R||we()||T;return ie(E)||U}return()=>{I.off("openchange",v);const b=ce(g),E=B(C,b)||j&&Ue(j.nodesRef.current,A(),!1).some(L=>{var G;return B((G=L.context)==null?void 0:G.elements.floating,b)}),U=N();queueMicrotask(()=>{const L=fn(U),G=typeof se.current!="boolean";se.current&&!H.current&&ue(L)&&(!(!G&&L!==b&&b!==g.body)||E)&&L.focus({preventScroll:!0}),T.remove()})}},[o,C,h,se,M,I,j,Ce,R,A]),l.useEffect(()=>{queueMicrotask(()=>{H.current=!1})},[o]),l.useEffect(()=>{if(o||!S)return;function g(v){const T=ye(v);T!=null&&T.closest(`[${Dt}]`)&&(xe.current=!0)}const x=K(h);return x.addEventListener("pointerdown",g,!0),()=>{x.removeEventListener("pointerdown",g,!0)}},[o,S,h]),oe(()=>{if(!o&&u)return u.setFocusManagerState({modal:s,closeOnFocusOut:p,open:S,onOpenChange:w,domReference:R}),()=>{u.setFocusManagerState(null)}},[o,u,s,S,w,p,R]),oe(()=>{if(!(o||!h))return et(h,O),()=>{queueMicrotask(Oe)}},[o,h,O]);const Be=!o&&(s?!V:!0)&&(Ce||s);return D.jsxs(l.Fragment,{children:[Be&&D.jsx(Xe,{"data-type":"inside",ref:bt,onFocus:g=>{var x;if(s){const v=le();Te(v[v.length-1])}else if(u!=null&&u.portalNode)if(H.current=!1,Ke(g,u.portalNode)){const v=Mt(R);v==null||v.focus()}else(x=ie(m??u.beforeOutsideRef))==null||x.focus()}}),n,Be&&D.jsx(Xe,{"data-type":"inside",ref:ht,onFocus:g=>{var x;if(s)Te(le()[0]);else if(u!=null&&u.portalNode)if(p&&(H.current=!0),Ke(g,u.portalNode)){const v=Ot(R);v==null||v.focus()}else(x=ie(y??u.afterOutsideRef))==null||x.focus()}})]})}const mn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function gn(e,t={}){var w;const{open:n,elements:o,floatingId:i}=e,{enabled:r=!0,role:a="dialog"}=t,c=Tt(),s=((w=o.domReference)==null?void 0:w.id)||c,p=l.useMemo(()=>{var I;return((I=Ie(o.floating))==null?void 0:I.id)||i},[o.floating,i]),f=mn.get(a)??a,y=Lt()!=null,m=l.useMemo(()=>f==="tooltip"||a==="label"?he:{"aria-haspopup":f==="alertdialog"?"dialog":f,"aria-expanded":"false",...f==="listbox"&&{role:"combobox"},...f==="menu"&&y&&{role:"menuitem"},...a==="select"&&{"aria-autocomplete":"none"},...a==="combobox"&&{"aria-autocomplete":"list"}},[f,y,a]),d=l.useMemo(()=>f==="tooltip"||a==="label"?{[`aria-${a==="label"?"labelledby":"describedby"}`]:n?p:void 0}:{...m,"aria-expanded":n?"true":"false","aria-controls":n?p:void 0,...f==="menu"&&{id:s}},[f,p,n,s,a,m]),k=l.useMemo(()=>{const I={id:p,...f&&{role:f}};return f==="tooltip"||a==="label"?I:{...I,...f==="menu"&&{"aria-labelledby":s}}},[f,p,s,a]),S=l.useCallback(({active:I,selected:M})=>{const R={role:"option",...I&&{id:`${p}-fui-option`}};switch(a){case"select":case"combobox":return{...R,"aria-selected":M}}return{}},[p,a]);return l.useMemo(()=>r?{reference:d,floating:k,item:S,trigger:m}:{},[r,d,k,m,S])}let bn=(function(e){return e.nestedDialogs="--nested-dialogs",e})({}),hn=(function(e){return e[e.open=pe.open]="open",e[e.closed=pe.closed]="closed",e[e.startingStyle=pe.startingStyle]="startingStyle",e[e.endingStyle=pe.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e})({});const gt=l.createContext(void 0);function yn(){const e=l.useContext(gt);if(e===void 0)throw new Error(rt(26));return e}const vn={...at,...ct,nestedDialogOpen(e){return e?{[hn.nestedDialogOpen]:""}:null}},Rn=l.forwardRef(function(t,n){const{className:o,finalFocus:i,initialFocus:r,render:a,...c}=t,{store:s}=re(),p=s.useState("descriptionElementId"),f=s.useState("disablePointerDismissal"),P=s.useState("floatingRootContext"),y=s.useState("popupProps"),m=s.useState("modal"),d=s.useState("mounted"),k=s.useState("nested"),S=s.useState("nestedOpenDialogCount"),w=s.useState("open"),I=s.useState("openMethod"),M=s.useState("titleElementId"),R=s.useState("transitionStatus"),C=s.useState("role");yn(),dt({open:w,ref:s.context.popupRef,onComplete(){var O,z;w&&((z=(O=s.context).onOpenChangeComplete)==null||z.call(O,!0))}});function q(O){return O==="touch"?s.context.popupRef.current:!0}const A=r===void 0?q:r,W=S>0,_=l.useMemo(()=>({open:w,nested:k,transitionStatus:R,nestedDialogOpen:W}),[w,k,R,W]),V=de("div",t,{state:_,props:[y,{"aria-labelledby":M??void 0,"aria-describedby":p??void 0,role:C,tabIndex:-1,hidden:!d,onKeyDown(O){Jt.has(O.key)&&O.stopPropagation()},style:{[bn.nestedDialogs]:S}},c],ref:[n,s.context.popupRef,s.useStateSetter("popupElement")],stateAttributesMapping:vn});return D.jsx(pn,{context:P,openInteractionType:I,disabled:!d,closeOnFocusOut:!f,initialFocus:A,returnFocus:i,modal:m!==!1,restoreFocus:"popup",children:V})}),En=l.forwardRef(function(t,n){const{cutout:o,...i}=t;let r;if(o){const a=o==null?void 0:o.getBoundingClientRect();r=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${a.left}px ${a.top}px,
      ${a.left}px ${a.bottom}px,
      ${a.right}px ${a.bottom}px,
      ${a.right}px ${a.top}px,
      ${a.left}px ${a.top}px
    )`}return D.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...i,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:r}})}),xn=l.forwardRef(function(t,n){const{keepMounted:o=!1,...i}=t,{store:r}=re(),a=r.useState("mounted"),c=r.useState("modal");return a||o?D.jsx(gt.Provider,{value:o,children:D.jsxs(At,{ref:n,...i,children:[a&&c===!0&&D.jsx(En,{ref:r.context.internalBackdropRef,inert:zt(!open)}),t.children]})}):null});let tt={},nt={},ot="";function Sn(e){if(typeof document>"u")return!1;const t=Ee(e);return Re(t).innerWidth-t.documentElement.clientWidth>0}function Cn(e){const t=Ee(e),n=t.documentElement,o=t.body,i=it(n)?n:o,r=i.style.overflow;return i.style.overflow="hidden",()=>{i.style.overflow=r}}function Tn(e){var y,m;const t=Ee(e),n=t.documentElement,o=t.body,i=Re(n);let r=0,a=0;const c=Ht.create(),s=typeof CSS<"u"&&((y=CSS.supports)==null?void 0:y.call(CSS,"scrollbar-gutter","stable"));if(wt&&(((m=i.visualViewport)==null?void 0:m.scale)??1)!==1)return()=>{};function p(){const d=i.getComputedStyle(n),k=i.getComputedStyle(o),I=(d.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";r=n.scrollTop,a=n.scrollLeft,tt={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},ot=n.style.scrollBehavior,nt={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const M=n.scrollHeight>n.clientHeight,R=n.scrollWidth>n.clientWidth,C=d.overflowY==="scroll"||k.overflowY==="scroll",q=d.overflowX==="scroll"||k.overflowX==="scroll",A=Math.max(0,i.innerWidth-n.clientWidth),W=Math.max(0,i.innerHeight-n.clientHeight),_=parseFloat(k.marginTop)+parseFloat(k.marginBottom),V=parseFloat(k.marginLeft)+parseFloat(k.marginRight),O=it(n)?n:o;if(s){n.style.scrollbarGutter=I,O.style.overflowY="hidden",O.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:I,overflowY:"hidden",overflowX:"hidden"}),(M||C)&&(n.style.overflowY="scroll"),(R||q)&&(n.style.overflowX="scroll"),Object.assign(o.style,{position:"relative",height:_||W?`calc(100dvh - ${_+W}px)`:"100dvh",width:V||A?`calc(100vw - ${V+A}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=r,o.scrollLeft=a,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function f(){Object.assign(n.style,tt),Object.assign(o.style,nt),s||(n.scrollTop=r,n.scrollLeft=a,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=ot)}function P(){f(),c.request(p)}return p(),i.addEventListener("resize",P),()=>{c.cancel(),f(),i.removeEventListener&&i.removeEventListener("resize",P)}}class kn{constructor(){Z(this,"lockCount",0);Z(this,"restore",null);Z(this,"timeoutLock",ze.create());Z(this,"timeoutUnlock",ze.create());Z(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});Z(this,"unlock",()=>{var t;this.lockCount===0&&this.restore&&((t=this.restore)==null||t.call(this),this.restore=null)})}acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}lock(t){if(this.lockCount===0||this.restore!==null)return;const o=Ee(t).documentElement,i=Re(o).getComputedStyle(o).overflowY;if(i==="hidden"||i==="clip"){this.restore=St;return}const r=kt||!Sn(t);this.restore=r?Cn(t):Tn(t)}}const wn=new kn;function In(e=!0,t=null){oe(()=>{if(e)return wn.acquire(t)},[e,t])}function Pn(e){const t=l.useRef(""),n=l.useCallback(i=>{i.defaultPrevented||(t.current=i.pointerType,e(i,i.pointerType))},[e]);return{onClick:l.useCallback(i=>{if(i.detail===0){e(i,"keyboard");return}"pointerType"in i&&e(i,i.pointerType),e(i,t.current),t.current=""},[e]),onPointerDown:n}}function Fn(e){const[t,n]=l.useState(null),o=ne((c,s)=>{e||n(s)}),i=l.useCallback(()=>{n(null)},[]),{onClick:r,onPointerDown:a}=Pn(o);return l.useMemo(()=>({openMethod:t,reset:i,triggerProps:{onClick:r,onPointerDown:a}}),[t,i,r,a])}function Mn(e){const{store:t,parentContext:n,actionsRef:o,triggerIdProp:i}=e,r=t.useState("open"),a=t.useState("disablePointerDismissal"),c=t.useState("modal"),s=t.useState("activeTriggerElement"),p=t.useState("popupElement"),f=t.useState("triggers"),P=t.useState("activeTriggerId"),{mounted:y,setMounted:m,transitionStatus:d}=Gt(r);let k=null;y===!0&&i===void 0&&f.size===1?k=f.keys().next().value||null:k=P??null,oe(()=>{t.set("mounted",y),y||(t.set("activeTriggerId",null),t.set("payload",void 0))},[t,y]),oe(()=>{r&&t.set("activeTriggerId",k)},[t,k,r]);const{openMethod:S,triggerProps:w,reset:I}=Fn(r),M=ne(()=>{var u,Y;m(!1),t.update({open:!1,mounted:!1,activeTriggerId:null}),(Y=(u=t.context).onOpenChangeComplete)==null||Y.call(u,!1),I()}),R=ne(u=>{const Y=Me(u);return Y.preventUnmountOnClose=()=>{t.context.preventUnmountingOnCloseRef.current=!0},Y}),C=l.useCallback(()=>{t.setOpen(!1,R(Kt))},[t,R]);dt({enabled:!t.context.preventUnmountingOnCloseRef.current,open:r,ref:t.context.popupRef,onComplete(){r||M()}}),l.useImperativeHandle(o,()=>({unmount:M,close:C}),[M,C]);const q=Vt({elements:{reference:s,floating:p,triggers:Array.from(f.values())},open:r,onOpenChange:t.setOpen,noEmit:!0}),[A,W]=l.useState(0),_=A===0,V=gn(q),O=qt(q,{outsidePressEvent(){return t.context.internalBackdropRef.current||t.context.backdropRef.current?"intentional":{mouse:c==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}},outsidePress(u){if("button"in u&&u.button!==0||"touches"in u&&u.touches.length!==1)return!1;const Y=ye(u);if(_&&!a){const J=Y;return c&&(t.context.internalBackdropRef.current||t.context.backdropRef.current)?t.context.internalBackdropRef.current===J||t.context.backdropRef.current===J||B(J,p)&&!(J!=null&&J.hasAttribute("data-base-ui-portal")):!0}return!1},escapeKey:_});In(r&&c===!0,p);const{getReferenceProps:z,getFloatingProps:se,getTriggerProps:fe}=jt([V,O]);t.useContextCallback("onNestedDialogOpen",u=>{W(u+1)}),t.useContextCallback("onNestedDialogClose",()=>{W(0)}),l.useEffect(()=>(n!=null&&n.onNestedDialogOpen&&r&&n.onNestedDialogOpen(A),n!=null&&n.onNestedDialogClose&&!r&&n.onNestedDialogClose(),()=>{n!=null&&n.onNestedDialogClose&&r&&n.onNestedDialogClose()}),[r,n,A]);const j=l.useMemo(()=>z(w),[z,w]);t.useSyncedValues({openMethod:S,transitionStatus:d,activeTriggerProps:j,inactiveTriggerProps:fe(w),popupProps:se(),floatingRootContext:q,nestedOpenDialogCount:A})}const On={open:F(e=>e.open),modal:F(e=>e.modal),nested:F(e=>e.nested),nestedOpenDialogCount:F(e=>e.nestedOpenDialogCount),disablePointerDismissal:F(e=>e.disablePointerDismissal),openMethod:F(e=>e.openMethod),descriptionElementId:F(e=>e.descriptionElementId),titleElementId:F(e=>e.titleElementId),mounted:F(e=>e.mounted),transitionStatus:F(e=>e.transitionStatus),popupProps:F(e=>e.popupProps),floatingRootContext:F(e=>e.floatingRootContext),activeTriggerId:F(e=>e.activeTriggerId),activeTriggerElement:F(e=>e.mounted&&e.activeTriggerId!=null?e.triggers.get(e.activeTriggerId)??null:null),triggers:F(e=>e.triggers),popupElement:F(e=>e.popupElement),viewportElement:F(e=>e.viewportElement),payload:F(e=>e.payload),activeTriggerProps:F(e=>e.activeTriggerProps),inactiveTriggerProps:F(e=>e.inactiveTriggerProps),role:F(e=>e.role)};class Dn extends Bt{constructor(n){super(Nn(n),{popupRef:l.createRef(),backdropRef:l.createRef(),internalBackdropRef:l.createRef(),preventUnmountingOnCloseRef:{current:!1}},On);Z(this,"setOpen",(n,o)=>{var a,c,s,p;if(o.preventUnmountOnClose=()=>{this.context.preventUnmountingOnCloseRef.current=!0},!n&&o.trigger==null&&this.state.activeTriggerId!=null&&(o.trigger=this.state.triggers.get(this.state.activeTriggerId)),(c=(a=this.context).onOpenChange)==null||c.call(a,n,o),o.isCanceled)return;const i={open:n,nativeEvent:o.event,reason:o.reason,nested:this.state.nested};(s=this.state.floatingRootContext.events)==null||s.emit("openchange",i),this.set("open",n);const r=((p=o.trigger)==null?void 0:p.id)??null;(r||n)&&this.set("activeTriggerId",r)})}}function Nn(e={}){return{disablePointerDismissal:!1,modal:!0,open:!1,nested:!1,popupElement:null,viewportElement:null,activeTriggerId:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,mounted:!1,transitionStatus:"idle",nestedOpenDialogCount:0,triggers:new Map,floatingRootContext:Wt(),payload:void 0,activeTriggerProps:he,inactiveTriggerProps:he,popupProps:he,role:"dialog",...e}}function Ln(e){const{children:t,open:n,defaultOpen:o=!1,onOpenChange:i,onOpenChangeComplete:r,disablePointerDismissal:a=!1,modal:c=!0,actionsRef:s,handle:p,triggerId:f,defaultTriggerId:P=null}=e,y=re(!0),m=!!y,d=Ct(()=>(p==null?void 0:p.store)??new Dn).current;d.useControlledProp("open",n,o),d.useControlledProp("activeTriggerId",f,P),d.useSyncedValues({disablePointerDismissal:a,nested:m,modal:c}),d.useContextCallback("onOpenChange",i),d.useContextCallback("onOpenChangeComplete",r);const k=d.useState("payload");Mn({store:d,actionsRef:s,parentContext:y==null?void 0:y.store.context,triggerIdProp:f});const S=l.useMemo(()=>({store:d}),[d]);return D.jsx(pt.Provider,{value:S,children:typeof t=="function"?t({payload:k}):t})}const An=l.forwardRef(function(t,n){const{render:o,className:i,id:r,...a}=t,{store:c}=re(),s=ft(r);return c.useSyncedValueWithCleanup("titleElementId",s),de("h2",t,{ref:n,props:[{id:s},a]})}),ve=l.forwardRef(({title:e,onBackdropClick:t,subTitle:n,dismissible:o=!1,open:i=!1,onOpenChange:r,className:a,style:c,children:s,alertDialog:p,closeIconAriaLabel:f},P)=>D.jsx(Ln,{open:i,onOpenChange:r,children:D.jsxs(xn,{children:[D.jsx(on,{className:"flx-modal-overlay-container",children:D.jsx("div",{onClick:()=>{t==null||t()},className:"flx-modal-overlay-backdrop"})}),D.jsxs(Rn,{ref:P,className:Et([a,"flx-modal"]),style:c,children:[o&&D.jsx(rn,{render:D.jsx(xt,{name:"cross",className:"flx-modal-close",onKeyDown:y=>{(y.key==="Enter"||y.key===" ")&&(r==null||r(!1))},"aria-label":f})}),e||n?D.jsxs("div",{className:"flx-modal-header",children:[e?D.jsx(An,{className:"flx-modal-title",children:e}):null,n?D.jsx(sn,{className:"flx-modal-subtitle",children:n}):null]}):null,D.jsx("div",{className:"flx-modal-content",children:s})]}),p]})}));ve.displayName="FlxModal";const Pe=l.memo(ve);Pe.displayName="MemoFlxModal";try{ve.displayName="FlxModal",ve.__docgenInfo={description:"",displayName:"FlxModal",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},dismissible:{defaultValue:{value:"false"},description:"",name:"dismissible",required:!1,type:{name:"boolean | undefined"}},onOpenChange:{defaultValue:null,description:"",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void) | undefined"}},onBackdropClick:{defaultValue:null,description:"",name:"onBackdropClick",required:!1,type:{name:"(() => void) | undefined"}},alertDialog:{defaultValue:null,description:"",name:"alertDialog",required:!1,type:{name:"ReactNode"}},closeIconAriaLabel:{defaultValue:null,description:"",name:"closeIconAriaLabel",required:!1,type:{name:"string | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: DialogPopupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, DialogPopupState> | undefined"}}}}}catch{}try{Pe.displayName="MemoFlxModal",Pe.__docgenInfo={description:"",displayName:"MemoFlxModal",props:{className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: DialogPopupState) => string | undefined) | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, DialogPopupState> | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},closeIconAriaLabel:{defaultValue:null,description:"",name:"closeIconAriaLabel",required:!1,type:{name:"string | undefined"}},onOpenChange:{defaultValue:null,description:"",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void) | undefined"}},onBackdropClick:{defaultValue:null,description:"",name:"onBackdropClick",required:!1,type:{name:"(() => void) | undefined"}},dismissible:{defaultValue:{value:"false"},description:"",name:"dismissible",required:!1,type:{name:"boolean | undefined"}},alertDialog:{defaultValue:null,description:"",name:"alertDialog",required:!1,type:{name:"ReactNode"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined"}}}}}catch{}export{ve as F,Pe as M};
