import{j as f}from"./jsx-runtime-DztICxWZ.js";import{c as Ke}from"./clsx-B-dksMZM.js";import{r as t}from"./index-Bv9Y92EF.js";import{l as Je}from"./lodash-BeRlbo2W.js";import{M as fe}from"./Icon-VZws6Zev.js";import{M as pe}from"./Button-CsQ05Hxl.js";import{e as ge,f as We,o as Qe,g as Ze}from"./owner-CUO6ebsU.js";import{i as et}from"./inertValue-B83C-BnE.js";import{b as tt,u as ce,c as we}from"./floating-ui.utils.dom-BFiwr5bk.js";import{f as Me,u as Y}from"./useRenderElement-IQYmzFOi.js";import{u as nt,t as st}from"./useOpenChangeComplete-vwLYIK8G.js";import{a as Ce}from"./useButton-BU0a48-b.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZfHsFkt.js";import"./index-CJSLNY_5.js";const ot=t.createContext(void 0);function De(){const e=t.useContext(ot);if(!e)throw new Error(Me(73));return e}const Re=t.createContext(void 0);function O(){const e=t.useContext(Re);if(!e)throw new Error(Me(66));return e}let _=(function(e){return e.index="--toast-index",e.offsetY="--toast-offset-y",e.height="--toast-height",e.swipeMovementX="--toast-swipe-movement-x",e.swipeMovementY="--toast-swipe-movement-y",e})({});const rt={...st,swipeDirection(e){return e?{"data-swipe-direction":e}:null}},k=40,it=10,I=.5,at=1;function he(e,c,p){switch(e){case"up":return-p;case"down":return p;case"left":return-c;case"right":return c;default:return 0}}function ct(e){const p=window.getComputedStyle(e).transform;let o=0,b=0,y=1;if(p&&p!=="none"){const u=p.match(/matrix(?:3d)?\(([^)]+)\)/);if(u){const a=u[1].split(", ").map(parseFloat);a.length===6?(o=a[4],b=a[5],y=Math.sqrt(a[0]*a[0]+a[1]*a[1])):a.length===16&&(o=a[12],b=a[13],y=a[0])}}return{x:o,y:b,scale:y}}const lt=t.forwardRef(function(c,p){var me;const{toast:o,render:b,className:y,swipeDirection:u=["down","right"],...a}=c,d=((me=o.positionerProps)==null?void 0:me.anchor)!==void 0;let s=[];d||(s=Array.isArray(u)?u:[u]);const l=s.length>0,{toasts:i,focused:h,close:T,remove:M,setToasts:B,pauseTimers:Se,expanded:H,setHovering:be}=De(),[le,j]=t.useState(void 0),[P,ue]=t.useState(!1),[Ee,K]=t.useState(!1),[Ie,Pe]=t.useState(!1),[E,X]=t.useState({x:0,y:0}),[C,_e]=t.useState({x:0,y:0,scale:1}),[J,Ne]=t.useState(),[W,Le]=t.useState(),[A,Q]=t.useState(null),v=t.useRef(null),F=t.useRef({x:0,y:0}),Z=t.useRef({x:0,y:0,scale:1}),$=t.useRef(void 0),ee=t.useRef(0),q=t.useRef(!1),D=t.useRef({x:0,y:0}),te=t.useRef(!1),ne=t.useMemo(()=>i.indexOf(o),[o,i]),se=t.useMemo(()=>i.filter(n=>n.transitionStatus!=="ending").indexOf(o),[o,i]),Oe=t.useMemo(()=>i.slice(0,i.indexOf(o)).reduce((n,r)=>n+(r.height||0),0),[i,o]);nt({open:o.transitionStatus!=="ending",ref:v,onComplete(){o.transitionStatus==="ending"&&M(o.id)}});const z=tt(()=>{const n=v.current;if(!n)return;const r=n.style.height;n.style.height="auto";const m=n.offsetHeight;n.style.height=r,B(x=>x.map(g=>g.id===o.id?{...g,ref:v,height:m,transitionStatus:void 0}:g))});ce(z,[z]);function je(n,r){let m=n,x=r;return!s.includes("left")&&!s.includes("right")?m=n>0?n**I:-(Math.abs(n)**I):(!s.includes("right")&&n>0&&(m=n**I),!s.includes("left")&&n<0&&(m=-(Math.abs(n)**I))),!s.includes("up")&&!s.includes("down")?x=r>0?r**I:-(Math.abs(r)**I):(!s.includes("down")&&r>0&&(x=r**I),!s.includes("up")&&r<0&&(x=-(Math.abs(r)**I))),{x:m,y:x}}function Ae(n){var x;if(n.button!==0)return;n.pointerType==="touch"&&Se();const r=Ze(n.nativeEvent);if(!(r&&r.closest('button,a,input,textarea,[role="button"],[data-swipe-ignore]'))){if(q.current=!1,$.current=void 0,ee.current=0,F.current={x:n.clientX,y:n.clientY},D.current=F.current,v.current){const g=ct(v.current);Z.current=g,_e(g),X({x:g.x,y:g.y})}be(!0),ue(!0),K(!1),Q(null),te.current=!0,(x=v.current)==null||x.setPointerCapture(n.pointerId)}}function Fe(n){if(!P)return;n.preventDefault(),te.current&&(F.current={x:n.clientX,y:n.clientY},te.current=!1);const{clientY:r,clientX:m,movementX:x,movementY:g}=n;(g<0&&r>D.current.y||g>0&&r<D.current.y)&&(D.current={x:D.current.x,y:r}),(x<0&&m>D.current.x||x>0&&m<D.current.x)&&(D.current={x:m,y:D.current.y});const w=m-F.current.x,R=r-F.current.y,qe=r-D.current.y,ze=m-D.current.x;if(!Ee&&Math.sqrt(w*w+R*R)>=at&&(K(!0),A===null)){const V=s.includes("left")||s.includes("right"),Ue=s.includes("up")||s.includes("down");if(V&&Ue){const Ve=Math.abs(w),Ge=Math.abs(R);Q(Ve>Ge?"horizontal":"vertical")}}let S;if(!$.current)A==="vertical"?R>0?S="down":R<0&&(S="up"):A==="horizontal"?w>0?S="right":w<0&&(S="left"):Math.abs(w)>=Math.abs(R)?S=w>0?"right":"left":S=R>0?"down":"up",S&&s.includes(S)&&($.current=S,ee.current=he(S,w,R),j(S));else{const ie=$.current,V=he(ie,ze,qe);V>k?(q.current=!1,j(ie)):ee.current-V>=it&&(q.current=!0)}const U=je(w,R);let oe=Z.current.x,re=Z.current.y;A==="horizontal"?(s.includes("left")||s.includes("right"))&&(oe+=U.x):(A==="vertical"||(s.includes("left")||s.includes("right"))&&(oe+=U.x),(s.includes("up")||s.includes("down"))&&(re+=U.y)),X({x:oe,y:re})}function ke(n){var w;if(!P)return;if(ue(!1),K(!1),Q(null),(w=v.current)==null||w.releasePointerCapture(n.pointerId),q.current){X({x:C.x,y:C.y}),j(void 0);return}let r=!1;const m=E.x-C.x,x=E.y-C.y;let g;for(const R of s){switch(R){case"right":m>k&&(r=!0,g="right");break;case"left":m<-k&&(r=!0,g="left");break;case"down":x>k&&(r=!0,g="down");break;case"up":x<-k&&(r=!0,g="up");break}if(r)break}r?(j(g),Pe(!0),T(o.id)):(X({x:C.x,y:C.y}),j(void 0))}function Ye(n){if(n.key==="Escape"){if(!v.current||!ge(v.current,We(Qe(v.current))))return;T(o.id)}}t.useEffect(()=>{if(!l)return;const n=v.current;if(!n)return;function r(m){ge(n,m.target)&&m.preventDefault()}return n.addEventListener("touchmove",r,{passive:!1}),()=>{n.removeEventListener("touchmove",r)}},[l]);function Be(){if(!P&&E.x===C.x&&E.y===C.y&&!Ie)return{[_.swipeMovementX]:"0px",[_.swipeMovementY]:"0px"};const n=E.x-C.x,r=E.y-C.y;return{transition:P?"none":void 0,transform:P?`translateX(${E.x}px) translateY(${E.y}px) scale(${C.scale})`:void 0,[_.swipeMovementX]:`${n}px`,[_.swipeMovementY]:`${r}px`}}const de=o.priority==="high",He={role:de?"alertdialog":"dialog",tabIndex:0,"aria-modal":!1,"aria-labelledby":J,"aria-describedby":W,"aria-hidden":de&&!h?!0:void 0,onPointerDown:l?Ae:void 0,onPointerMove:l?Fe:void 0,onPointerUp:l?ke:void 0,onKeyDown:Ye,inert:et(o.limited),style:{...Be(),[_.index]:o.transitionStatus==="ending"?ne:se,[_.offsetY]:`${Oe}px`,[_.height]:o.height?`${o.height}px`:void 0}},N=t.useMemo(()=>({rootRef:v,toast:o,titleId:J,setTitleId:Ne,descriptionId:W,setDescriptionId:Le,swiping:P,swipeDirection:le,recalculateHeight:z,index:ne,visibleIndex:se,expanded:H}),[o,J,W,P,le,z,ne,se,H]),Xe=t.useMemo(()=>({transitionStatus:o.transitionStatus,expanded:H,limited:o.limited||!1,type:o.type,swiping:N.swiping,swipeDirection:N.swipeDirection}),[H,o.transitionStatus,o.limited,o.type,N.swiping,N.swipeDirection]),$e=Y("div",c,{ref:[p,N.rootRef],state:Xe,stateAttributesMapping:rt,props:[He,a]});return f.jsx(Re.Provider,{value:N,children:$e})}),ut=t.forwardRef(function(c,p){const{render:o,className:b,id:y,children:u,...a}=c,{toast:d}=O(),s=u??d.description,l=!!s,i=we(y),{setDescriptionId:h}=O();ce(()=>{if(l)return h(i),()=>{h(void 0)}},[l,i,h]);const T=t.useMemo(()=>({type:d.type}),[d.type]),M=Y("p",c,{ref:p,state:T,props:{...a,id:i,children:s}});return l?M:null}),dt=t.forwardRef(function(c,p){const{render:o,className:b,id:y,children:u,...a}=c,{toast:d}=O(),s=u??d.title,l=!!s,i=we(y),{setTitleId:h}=O();ce(()=>{if(l)return h(i),()=>{h(void 0)}},[l,i,h]);const T=t.useMemo(()=>({type:d.type}),[d.type]),M=Y("h2",c,{ref:p,state:T,props:{...a,id:i,children:s}});return l?M:null}),mt=t.forwardRef(function(c,p){const{render:o,className:b,disabled:y,nativeButton:u=!0,...a}=c,{close:d,expanded:s}=De(),{toast:l}=O(),{getButtonProps:i,buttonRef:h}=Ce({disabled:y,native:u}),T=t.useMemo(()=>({type:l.type}),[l.type]);return Y("button",c,{ref:[p,h],state:T,props:[{"aria-hidden":!s,onClick(){d(l.id)}},a,i]})}),ft=t.forwardRef(function(c,p){var B;const{render:o,className:b,disabled:y,nativeButton:u=!0,...a}=c,{toast:d}=O(),s=((B=d.actionProps)==null?void 0:B.children)??a.children,l=!!s,{getButtonProps:i,buttonRef:h}=Ce({disabled:y,native:u}),T=t.useMemo(()=>({type:d.type}),[d.type]),M=Y("button",c,{ref:[p,h],state:T,props:[a,d.actionProps,i,{children:s}]});return l?M:null}),pt=2e3,gt=Je.memoize(e=>({error:3e3,warning:3e3,info:3e3,success:2e3})[e]||pt),xe=1e4,ht=50,L=({data:e,onCloseToast:c,className:p,iconComponent:o,...b})=>{var l;const y=t.useId(),u=t.useCallback(()=>{c==null||c(e)},[c,e]),a=t.useCallback(i=>{i.event(),u()},[u]),d=t.useMemo(()=>{var T,M;if(e!=null&&e.closeInterval)return e==null?void 0:e.closeInterval;const i=((((T=e.title)==null?void 0:T.length)||0)+(((M=e.message)==null?void 0:M.length)||0))*ht,h=gt(e.messageType);return i<h?h:i>xe?xe:i},[e.closeInterval,e.messageType,e.title,e.message]),s=t.useRef(null);return t.useEffect(()=>(s.current=setTimeout(()=>{u()},d),()=>{s.current&&clearTimeout(s.current)}),[u,d]),f.jsx(lt,{...b,role:"alert",className:Ke("flx-toast-container",e.messageType,p),swipeDirection:"down",toast:{id:y,title:e.title,description:e.message,onClose:u},"data-testid":`messageType-${e.messageType}`,children:f.jsxs("div",{className:"content",children:[f.jsx("div",{className:"type-icon-container",children:o||f.jsx(fe,{name:e.icon||e.messageType,className:"type-icon"})}),f.jsxs("div",{children:[e.title?f.jsx(dt,{className:"title",children:e.title}):null,e.message?f.jsx(ut,{className:"message",children:e.message}):null,e.action?f.jsx(ft,{render:f.jsx(pe,{variant:"text",className:"action",onClick:()=>a(e.action),children:(l=e.action)==null?void 0:l.name})}):null]}),e.hideCloseButton?null:f.jsx(mt,{render:f.jsx(pe,{variant:"text",className:"close",onClick:()=>u(),children:f.jsx(fe,{name:"dismiss",className:"close-icon"})})})]})})},ae=t.memo(L);ae.displayName="MemoFlxToast";try{ae.displayName="MemoFlxToast",ae.__docgenInfo={description:"",displayName:"MemoFlxToast",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ToastData"}},onCloseToast:{defaultValue:null,description:"",name:"onCloseToast",required:!1,type:{name:"((data: ToastData) => void) | undefined"}},iconComponent:{defaultValue:null,description:"",name:"iconComponent",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}}}}}catch{}const Nt={component:L,title:"Toast"},G={render:()=>f.jsxs(f.Fragment,{children:[f.jsx(L,{data:{messageType:"success",title:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"info",message:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"warning",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"error",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. "},onCloseToast:e=>console.log("onCloseToast",e)})]})};var ye,Te,ve;G.parameters={...G.parameters,docs:{...(ye=G.parameters)==null?void 0:ye.docs,source:{originalSource:`{
  render: () => <>
      <FlxToast data={{
      messageType: 'success',
      title: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'info',
      message: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'warning',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'error',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. '
    }} onCloseToast={data => console.log('onCloseToast', data)} />
    </>
}`,...(ve=(Te=G.parameters)==null?void 0:Te.docs)==null?void 0:ve.source}}};const Lt=["Toast"];export{G as Toast,Lt as __namedExportsOrder,Nt as default};
