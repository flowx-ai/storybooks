var S=Object.defineProperty;var A=(t,e,n)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var r=(t,e,n)=>A(t,typeof e!="symbol"?e+"":e,n);import{r as m}from"./index-Bv9Y92EF.js";import{b as p,u as b}from"./floating-ui.utils.dom-BFiwr5bk.js";import{b as I}from"./useRenderElement-IQYmzFOi.js";import{r as d}from"./index-DZfHsFkt.js";const k=[];function C(t){m.useEffect(t,k)}const o=null;class x{constructor(){r(this,"callbacks",[]);r(this,"callbacksCount",0);r(this,"nextId",1);r(this,"startId",1);r(this,"isScheduled",!1);r(this,"tick",e=>{var a;this.isScheduled=!1;const n=this.callbacks,i=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,i>0)for(let s=0;s<n.length;s+=1)(a=n[s])==null||a.call(n,e)})}request(e){const n=this.nextId;return this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1,(!this.isScheduled||!1)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(e){const n=e-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const f=new x;class h{constructor(){r(this,"currentId",o);r(this,"cancel",()=>{this.currentId!==o&&(f.cancel(this.currentId),this.currentId=o)});r(this,"disposeEffect",()=>this.cancel)}static create(){return new h}static request(e){return f.request(e)}static cancel(e){return f.cancel(e)}request(e){this.cancel(),this.currentId=f.request(()=>{this.currentId=o,e()})}}function E(){const t=I(h.create).current;return C(t.disposeEffect),t}function q(t){return t==null?t:"current"in t?t.current:t}function O(t,e=!1,n=!0){const i=E();return p((a,s=null)=>{i.cancel();const c=q(t);c!=null&&(typeof c.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?a():i.request(()=>{function u(){c&&Promise.all(c.getAnimations().map(l=>l.finished)).then(()=>{s!=null&&s.aborted||d.flushSync(a)}).catch(()=>{if(n){if(s!=null&&s.aborted)return;d.flushSync(a)}else c.getAnimations().length>0&&c.getAnimations().some(l=>l.pending||l.playState!=="finished")&&u()})}e?i.request(u):u()}))})}let g=(function(t){return t.startingStyle="data-starting-style",t.endingStyle="data-ending-style",t})({});const y={[g.startingStyle]:""},F={[g.endingStyle]:""},L={transitionStatus(t){return t==="starting"?y:t==="ending"?F:null}};function M(t){const e=I(N,t).current;return e.next=t,b(e.effect),e}function N(t){const e={current:t,next:t,effect:()=>{e.current=e.next}};return e}function w(t){const{enabled:e=!0,open:n,ref:i,onComplete:a}=t,s=M(n),c=p(a),u=O(i,n);m.useEffect(()=>{e&&u(()=>{n===s.current&&c()})},[e,n,c,u,s])}export{h as A,g as T,O as a,E as b,C as c,M as d,q as r,L as t,w as u};
