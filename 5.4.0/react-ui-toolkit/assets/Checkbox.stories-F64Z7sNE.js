import{j as n}from"./jsx-runtime-NtR90vs_.js";import{r as o}from"./iframe-DMgJMfTy.js";import{u as Je,F as Xe,a as Ye,b as Ue,C as We,c as Ke,d as ze,f as Qe,e as Ze}from"./InfoTooltip-9eMNjWVh.js";import{c as he}from"./clsx-B-dksMZM.js";import{F as De}from"./Icon-BPlfcXXP.js";import{F as et,a as tt}from"./ChoiceGroup-DaVZLJ9O.js";import{u as ke}from"./useControlled-DPoCxAFN.js";import{b as se,u as xe}from"./floating-ui.utils.dom-BiKb4_oH.js";import{u as Q,c as nt,n as ot}from"./createBaseUIEventDetails-DyI0pd9j.js";import{f as rt,N as at,c as lt,m as st,E as it,b as ye,d as be}from"./useRenderElement-BDAcc6QV.js";import{f as ve,b as Fe,a as Ve,u as Pe,c as Ee,d as Re}from"./useValueChanged-XjYeMUBg.js";import{v as ct}from"./ReactStore-BbW3xTW3.js";import{a as dt}from"./useButton-By0iWj5u.js";import{u as ut}from"./FieldItemContext-BZl_S0aU.js";import{a as pt}from"./areArraysEqual-DHGtHcjb.js";import"./index-BuszbRwq.js";import"./index-z-sgVaVj.js";import"./DirectionContext-P2oSrbZt.js";import"./owner-CwWlm1ZE.js";import"./useOpenChangeComplete-CKh5LlvE.js";import"./useTransitionStatus-iJ_cH9EC.js";import"./event-BuaqxoFo.js";import"./index-CwmSl8QK.js";let Ce=(function(t){return t.checked="data-checked",t.unchecked="data-unchecked",t.disabled="data-disabled",t.readonly="data-readonly",t.required="data-required",t.valid="data-valid",t.invalid="data-invalid",t.touched="data-touched",t.dirty="data-dirty",t.filled="data-filled",t.focused="data-focused",t})({});function mt(t){return o.useMemo(()=>({checked(e){return t.indeterminate?{}:e?{[Ce.checked]:""}:{[Ce.unchecked]:""}},...ve}),[t.indeterminate])}const Se=o.createContext(void 0);function ft(t=!0){const e=o.useContext(Se);if(e===void 0&&!t)throw new Error(rt(3));return e}const ht=o.createContext(void 0),je="data-parent",xt=o.forwardRef(function(e,l){const{checked:g,className:P,defaultChecked:f=!1,disabled:k=!1,id:c,indeterminate:u=!1,inputRef:i,name:x,onCheckedChange:r,parent:s=!1,readOnly:p=!1,render:h,required:a=!1,value:m,nativeButton:y=!1,...E}=e,{clearErrors:M}=Fe(),{disabled:v,name:Z,setDirty:N,setFilled:V,setFocused:A,setTouched:J,state:q,validationMode:D,validityData:O,shouldValidateOnChange:X,validation:j}=Ve(),ee=ut(),{registerLabelableControlRef:te,labelId:ne,controlId:F,setControlId:I,getDescriptionProps:ie}=Pe(),d=ft(),B=d?.parent,Y=B&&d.allValues,_=v||ee.disabled||d?.disabled||k,w=Z??x,C=m??w,ce=Q(),_e=Q();let T=F;Y?T=s?_e:`${B.id}-${C}`:c&&(T=c);let oe={};Y&&(s?oe=d.parent.getParentProps():C&&(oe=d.parent.getChildProps(C)));const Ne=se(r),{checked:de=g,indeterminate:U=u,onCheckedChange:we,...Ge}=oe,G=d?.value,ue=d?.setValue,pe=d?.defaultValue,re=o.useRef(null),{getButtonProps:Me,buttonRef:qe}=dt({disabled:_,native:y}),R=d?.validation??j,[b,Oe]=ke({controlled:C&&G&&!s?G.includes(C):de,default:C&&pe&&!s?pe.includes(C):f,name:"Checkbox",state:"checked"});xe(()=>{if(I!==at)return I(T),()=>{I(void 0)}},[T,d,I,s]),Ee({enabled:!d,id:ce,commit:R.commit,value:b,controlRef:re,name:w,getValue:()=>b});const L=o.useRef(null),Be=lt(i,L,R.inputRef);xe(()=>{L.current&&(L.current.indeterminate=U,b&&V(!0))},[b,U,V]),Re(b,()=>{d&&!s||(M(w),V(b),N(b!==O.initialValue),X()?R.commit(b):R.commit(b,!0))});const Te=st({checked:b,disabled:_,name:s?void 0:w,id:T??void 0,required:a,ref:Be,style:ct,tabIndex:-1,type:"checkbox","aria-hidden":!0,onChange(S){if(S.nativeEvent.defaultPrevented)return;const W=S.target.checked,K=nt(ot,S.nativeEvent);if(we?.(W,K),Ne(W,K),!K.isCanceled&&(Oe(W),C&&G&&ue&&!s)){const $e=W?[...G,C]:G.filter(Ae=>Ae!==C);ue($e,K)}},onFocus(){re.current?.focus()}},m!==void 0?{value:(d?b&&m:m)||""}:it,ie,d?R.getValidationProps:R.getInputValidationProps),me=Y?!!de:b,fe=Y&&U||u;o.useEffect(()=>{B&&C&&B.disabledStatesRef.current.set(C,_)},[B,_,C]);const ae=o.useMemo(()=>({...q,checked:me,disabled:_,readOnly:p,required:a,indeterminate:fe}),[q,me,_,p,a,fe]),Le=mt(ae),He=ye("span",e,{state:ae,ref:[qe,re,l,d?.registerControlRef,te],props:[{id:ce,role:"checkbox","aria-checked":U?"mixed":b,"aria-readonly":p||void 0,"aria-required":a||void 0,"aria-labelledby":ne,[je]:s?"":void 0,onFocus(){A(!0)},onBlur(){const S=L.current;S&&(J(!0),A(!1),D==="onBlur"&&R.commit(d?G:S.checked))},onClick(S){p||_||(S.preventDefault(),L.current?.click())}},ie,R.getValidationProps,E,Ge,Me],stateAttributesMapping:Le});return n.jsxs(ht.Provider,{value:ae,children:[He,!b&&!d&&w&&!s&&n.jsx("input",{type:"hidden",name:w,value:"off"}),n.jsx("input",{...Te})]})}),ge=[];function bt(t){const{allValues:e=ge,value:l=ge,onValueChange:g}=t,P=o.useRef(l),f=o.useRef(new Map),[k,c]=o.useState("mixed"),u=Q(),i=l.length===e.length,x=l.length!==e.length&&l.length>0,r=se(g),s=o.useCallback(()=>({id:u,indeterminate:x,checked:i,"aria-controls":e.map(h=>`${u}-${h}`).join(" "),onCheckedChange(h,a){const m=P.current,y=e.filter(v=>f.current.get(v)&&m.includes(v)),E=e.filter(v=>!f.current.get(v)||f.current.get(v)&&m.includes(v));if(m.length===E.length||m.length===0){l.length===E.length?r(y,a):r(E,a);return}k==="mixed"?(r(E,a),c("on")):k==="on"?(r(y,a),c("off")):k==="off"&&(r(m,a),c("mixed"))}}),[e,i,u,x,r,k,l.length]),p=o.useCallback(h=>({checked:l.includes(h),onCheckedChange(a,m){const y=l.slice();a?y.push(h):y.splice(y.indexOf(h),1),P.current=y,r(y,m),c("mixed")}}),[r,l]);return o.useMemo(()=>({id:u,indeterminate:x,getParentProps:s,getChildProps:p,disabledStatesRef:f}),[u,x,s,p])}const Ct=o.forwardRef(function(e,l){const{allValues:g,className:P,defaultValue:f,disabled:k=!1,id:c,onValueChange:u,render:i,value:x,...r}=e,{disabled:s,name:p,state:h,validation:a,setFilled:m,setDirty:y,shouldValidateOnChange:E,validityData:M}=Ve(),{labelId:v}=Pe(),{clearErrors:Z}=Fe(),N=s||k,[V,A]=ke({controlled:x,default:f,name:"CheckboxGroup",state:"value"}),J=se((F,I)=>{u?.(F,I),!I.isCanceled&&A(F)}),q=bt({allValues:g,value:x,onValueChange:u}),D=Q(c),O=o.useRef(null),X=o.useCallback(F=>{O.current==null&&F!=null&&!F.hasAttribute(je)&&(O.current=F)},[]);Ee({enabled:!!p,id:D,commit:a.commit,value:V,controlRef:O,name:p,getValue:()=>V});const j=V??be;Re(j,()=>{p&&Z(p);const F=Array.isArray(M.initialValue)?M.initialValue:be;m(j.length>0),y(!pt(j,F)),E()?a.commit(j):a.commit(j,!0)});const ee=o.useMemo(()=>({...h,disabled:N}),[h,N]),te=o.useMemo(()=>({allValues:g,value:V,defaultValue:f,setValue:J,parent:q,disabled:N,validation:a,registerControlRef:X}),[g,V,f,J,q,N,a,X]),ne=ye("div",e,{state:ee,ref:l,props:[{role:"group","aria-labelledby":v},r],stateAttributesMapping:ve});return n.jsx(Se.Provider,{value:te,children:ne})}),Ie=o.createContext({}),gt=()=>o.useContext(Ie),H=o.forwardRef(({label:t,choiceIconSelected:e=null,choiceIconUnselected:l=null,disabled:g,reversedLabel:P=!1,value:f="on",className:k,checked:c,onBlur:u,...i},x)=>{const r=o.useId(),{noBorder:s}=gt(),[p,h]=o.useState(!1),a=o.useMemo(()=>c?e:l,[c,e,l]);return n.jsx(xt,{...i,id:r,"aria-labelledby":r,className:he(["flx-checkbox",{"flx-checkbox-reversed":P},{"flx-checkbox-clear":s},k]),ref:x,disabled:g,checked:c,value:f,onFocus:()=>{h(!0)},onBlur:m=>{h(!1),u?.(m)},children:n.jsxs("label",{htmlFor:r,className:he(["flx-checkbox-label",{disabled:g},{checked:c},{focused:p},{empty:!c}]),children:[n.jsx("div",{className:"flx-checkbox-icons",children:a?n.jsx("div",{className:"flx-checkbox-icon",children:a}):n.jsx("div",{className:"flx-checkbox-container",children:n.jsx(De,{name:"check"})})}),n.jsx("div",{className:"flx-checkbox-text",children:t})]})})});H.displayName="FlxCheckbox";const $=({noBorder:t=!1,...e})=>n.jsx(Ie.Provider,{value:{noBorder:t},children:n.jsx(Ct,{...e,render:n.jsx(et,{})})});$.displayName="FlxCheckboxGroup";const le=o.memo($);le.displayName="MemoFlxCheckboxGroup";try{H.displayName="FlxCheckbox",H.__docgenInfo={description:"",displayName:"FlxCheckbox",props:{choiceIconSelected:{defaultValue:{value:"null"},description:"",name:"choiceIconSelected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},choiceIconUnselected:{defaultValue:{value:"null"},description:"",name:"choiceIconUnselected",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}},reversedLabel:{defaultValue:{value:"false"},description:"",name:"reversedLabel",required:!1,type:{name:"boolean | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"Whether the component should ignore user interaction.",name:"disabled",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxRootState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxRootState> | undefined"}}}}}catch{}try{$.displayName="FlxCheckboxGroup",$.__docgenInfo={description:"",displayName:"FlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}try{le.displayName="MemoFlxCheckboxGroup",le.__docgenInfo={description:"",displayName:"MemoFlxCheckboxGroup",props:{noBorder:{defaultValue:{value:"false"},description:"",name:"noBorder",required:!1,type:{name:"boolean | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: CheckboxGroupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, CheckboxGroupState> | undefined"}}}}}catch{}const kt=["Option 1","Option 2","Option 3"],Jt={component:H,title:"Choices",decorators:[t=>n.jsx(Qe,{...Ze({mode:"onChange",defaultValues:{checkbox:[]}}),children:n.jsx(t,{})})],argTypes:{fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}},disabledFirstOption:{control:{type:"boolean"}},groupDirection:{options:["row","column"],control:{type:"select"}}},render:function(e){const l=o.useId(),g=`${l}-form-item`,P=`${l}-form-item-description`,f="checkbox",k=e.requiredError?{validate:{required:i=>i.length>0||"This field is required"}}:{},{control:c,watch:u}=Je();return n.jsxs("div",{style:{fontFamily:e.fontFamily},className:"flx-default-theme",children:[n.jsxs(tt,{direction:e.groupDirection,children:[n.jsxs(Xe,{children:[n.jsx(Ye,{htmlFor:g,disabled:e.disabled,children:e.label}),e.infoTooltip?n.jsx(Ue,{children:e.helper}):null]}),n.jsx(We,{disabled:e.disabled,control:c,name:f,rules:e.requiredError?k:{},render:({field:i,fieldState:x})=>n.jsxs(n.Fragment,{children:[n.jsx($,{noBorder:e.noBorder,style:{width:e.width?`${e.width}px`:"100%"},children:kt.map((r,s)=>n.jsx(H,{name:i.name,label:r,reversedLabel:e.reversedLabel,disabled:i.disabled||e.disabledFirstOption&&s===0,checked:i.value?.includes(r),onBlur:i.onBlur,onCheckedChange:p=>p?i.onChange([...i.value,r]):i.onChange(i.value?.filter(h=>h!==r))},r))}),!e.infoTooltip&&!x.error?n.jsx(Ke,{id:P,children:e.helper}):null,n.jsx(ze,{error:x.error})]})})]}),n.jsxs("p",{children:["Selected options: ",u(f).join(",")]})]})}},z={args:{disabled:!1,label:"Checkbox label",helper:"Helper text",infoTooltip:!1,requiredError:!1,reversedLabel:!1,disabledFirstOption:!1,groupDirection:"row",noBorder:!1}};z.parameters={...z.parameters,docs:{...z.parameters?.docs,source:{originalSource:`{
  args: {
    disabled: false,
    label: 'Checkbox label',
    helper: 'Helper text',
    infoTooltip: false,
    requiredError: false,
    reversedLabel: false,
    disabledFirstOption: false,
    groupDirection: 'row',
    noBorder: false
  }
}`,...z.parameters?.docs?.source}}};const Xt=["Checkbox"];export{z as Checkbox,Xt as __namedExportsOrder,Jt as default};
