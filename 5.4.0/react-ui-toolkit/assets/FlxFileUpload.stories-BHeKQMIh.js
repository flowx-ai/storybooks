import{j as n}from"./jsx-runtime-NtR90vs_.js";import{r as d}from"./iframe-DMgJMfTy.js";import{c as h}from"./clsx-B-dksMZM.js";import{M as V}from"./Button-BXeyTgse.js";import"./useRenderElement-BDAcc6QV.js";const S=(t,e)=>e&&t.size>e?{fileSizeExceeded:"File size exceeded"}:{},U=(t,e)=>{if(!e||e==="*/*")return{};const a=e.split(",").map(l=>l.trim());for(const l of a){if(l===t.type)return{};if(l.includes("*")&&l.split("/")[0]===t.type.split("/")[0])return{};if(t.name.endsWith(l))return{}}return{invalidFileType:"File type is invalid"}},_=t=>!t||t==="*/*"?t:t.split(",").map(e=>(e=e.trim(),e.startsWith(".")||e.includes("/")||e.includes("*")?e:`.${e}`)).join(","),i=d.forwardRef(({className:t,label:e,accept:a="*/*",maxFileSize:l,dataTestId:u,buttonVariant:r,onFileSelect:p,...c},F)=>{const m=d.useRef(null),x=_(a),y=()=>{m.current&&m.current.click()},g=b=>{const s=b.currentTarget.files?.[0];s&&p?.({file:s,errors:{...S(s,l),...U(s,a)}})};return n.jsxs(n.Fragment,{children:[n.jsx(V,{"data-testid":u,className:h("flx-fileupload-button",t),ref:F,onClick:y,variant:r,...c,children:e}),n.jsx("input",{type:"file",accept:x,ref:m,onChange:g})]})});i.displayName="FlxFileUpload";const f=d.memo(i);f.displayName="MemoFlxFileUpload";try{i.displayName="FlxFileUpload",i.__docgenInfo={description:"",displayName:"FlxFileUpload",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},accept:{defaultValue:{value:"*/*"},description:"",name:"accept",required:!1,type:{name:"string | undefined"}},maxFileSize:{defaultValue:null,description:"",name:"maxFileSize",required:!1,type:{name:"number | undefined"}},buttonVariant:{defaultValue:null,description:"",name:"buttonVariant",required:!1,type:{name:'"text" | "fill" | "ghost" | undefined'}},onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((event: FileUploadEvent) => void) | undefined"}}}}}catch{}try{f.displayName="MemoFlxFileUpload",f.__docgenInfo={description:"",displayName:"MemoFlxFileUpload",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},dataTestId:{defaultValue:null,description:"",name:"dataTestId",required:!1,type:{name:"string | undefined"}},accept:{defaultValue:{value:"*/*"},description:"",name:"accept",required:!1,type:{name:"string | undefined"}},maxFileSize:{defaultValue:null,description:"",name:"maxFileSize",required:!1,type:{name:"number | undefined"}},buttonVariant:{defaultValue:null,description:"",name:"buttonVariant",required:!1,type:{name:'"text" | "fill" | "ghost" | undefined'}},onFileSelect:{defaultValue:null,description:"",name:"onFileSelect",required:!1,type:{name:"((event: FileUploadEvent) => void) | undefined"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLButtonElement | null) => void) | RefObject<HTMLButtonElement> | null | undefined"}}}}}catch{}const T=({label:t,buttonVariant:e,disabled:a,width:l,fontFamily:u})=>{const[r,p]=d.useState({errors:{}});return n.jsxs("div",{className:"flx-default-theme",children:[n.jsx(i,{className:"custom-class",buttonVariant:e,disabled:a,style:{width:l&&l>0?`${l}px`:"auto","--flxTheme-button-fontFamily":u},label:t,onFileSelect:c=>p(c)}),n.jsx("hr",{}),n.jsxs("p",{children:["Uploaded file: ",r.file?.name," (size: ",r.file?.size," kb)"]})]})},M={title:"FileUpload",component:i,argTypes:{asChild:{table:{disable:!0}},iconComponent:{table:{disable:!0}},buttonVariant:{options:["fill","ghost","text"],mapping:{none:null,fill:"fill",ghost:"ghost",text:"text"},control:{type:"select"}},fontFamily:{options:["Open Sans","Source Code Pro","Bitter"],control:{type:"select"}}},render:T,parameters:{design:{type:"figma",url:"https://www.figma.com/file/2n2umsSLJbNigLx43nseml/FlowX-Design-System?node-id=5599%3A5879"}}},q={args:{label:"Upload",buttonVariant:"ghost",fontFamily:"Open Sans",width:0,disabled:!1,maxFileSize:0,accept:""}},o={...q};o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:`{
  ...FileUploadTemplate
} satisfies Story`,...o.parameters?.docs?.source}}};const C=["FileUpload"];export{o as FileUpload,C as __namedExportsOrder,M as default};
