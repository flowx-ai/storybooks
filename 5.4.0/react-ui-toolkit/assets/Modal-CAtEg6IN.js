import{j as P}from"./jsx-runtime-NtR90vs_.js";import{c as ht}from"./clsx-B-dksMZM.js";import{r as i}from"./iframe-DMgJMfTy.js";import{M as vt}from"./Icon-BPlfcXXP.js";import{f as nt,b as le,c as je,E as me,N as yt,u as xt}from"./useRenderElement-BDAcc6QV.js";import{g as ot,b as X,a as se,u as K,e as he,c as Ct,f as rt}from"./floating-ui.utils.dom-BiKb4_oH.js";import{h as $,j as We,k as ke,f as ae,e as B,g as ge,o as ve,l as Rt,m as Et}from"./owner-CwWlm1ZE.js";import{p as st,u as St,a as Tt,b as _e,t as at,g as Ie,c as He,d as Ge,v as kt,e as $e,F as Ye,i as Ue,f as wt,h as It,j as lt,C as Ot,k as Pt,l as Ft,m as ue,n as Mt,T as Xe,o as Dt,q as Nt,r as Lt,R as At,s as w,w as Vt}from"./ReactStore-BbW3xTW3.js";import{t as it,d as de,b as Bt,r as te,u as ct,A as qt}from"./useOpenChangeComplete-CKh5LlvE.js";import{u as jt}from"./useTransitionStatus-iJ_cH9EC.js";import{c as Oe,e as Wt,u as ut,f as _t,o as Ht,g as Gt,h as $t}from"./createBaseUIEventDetails-DyI0pd9j.js";import{i as Yt}from"./inertValue-heD8jRfE.js";import{C as Ut}from"./composite-C45KQDT5.js";import{i as Xt,a as Kt,s as zt}from"./event-BuaqxoFo.js";import{a as Jt}from"./useButton-By0iWj5u.js";const dt=i.createContext(void 0);function z(e){const t=i.useContext(dt);if(e===!1&&t===void 0)throw new Error(nt(27));return t}const Qt={...st,...it},Zt=i.forwardRef(function(t,n){const{render:o,className:s,forceRender:r=!1,...l}=t,{store:u}=z(),a=u.useState("open"),g=u.useState("nested"),d=u.useState("mounted"),k=u.useState("transitionStatus"),h=i.useMemo(()=>({open:a,transitionStatus:k}),[a,k]);return le("div",t,{state:h,ref:[u.context.backdropRef,n],stateAttributesMapping:Qt,props:[{role:"presentation",hidden:!d,style:{userSelect:"none",WebkitUserSelect:"none"}},l],enabled:r||!g})}),en=i.forwardRef(function(t,n){const{render:o,className:s,disabled:r=!1,nativeButton:l=!0,...u}=t,{store:a}=z(),g=a.useState("open");function d(f){g&&a.setOpen(!1,Oe(Wt,f.nativeEvent))}const{getButtonProps:k,buttonRef:h}=Jt({disabled:r,native:l}),c=i.useMemo(()=>({disabled:r}),[r]);return le("button",t,{state:c,ref:[n,h],props:[{onClick:d},u,k]})}),tn=i.forwardRef(function(t,n){const{render:o,className:s,id:r,...l}=t,{store:u}=z(),a=ut(r);return u.useSyncedValueWithCleanup("descriptionElementId",a),le("p",t,{ref:n,props:[{id:a},l]})});let Ke=0;function Ee(e,t={}){const{preventScroll:n=!1,cancelPrevious:o=!0,sync:s=!1}=t;o&&cancelAnimationFrame(Ke);const r=()=>e?.focus({preventScroll:n});s?r():Ke=requestAnimationFrame(r)}const ne={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function ze(e){return e==="inert"?ne.inert:e==="aria-hidden"?ne["aria-hidden"]:ne.none}let fe=new WeakSet,pe={},Se=0;const ft=e=>e&&(e.host||ft(e.parentNode)),nn=(e,t)=>t.map(n=>{if(e.contains(n))return n;const o=ft(n);return e.contains(o)?o:null}).filter(n=>n!=null);function on(e,t,n,o){const s="data-base-ui-inert",r=o?"inert":n?"aria-hidden":null,l=nn(t,e),u=new Set,a=new Set(l),g=[];pe[s]||(pe[s]=new WeakMap);const d=pe[s];l.forEach(k),h(t),u.clear();function k(c){!c||u.has(c)||(u.add(c),c.parentNode&&k(c.parentNode))}function h(c){!c||a.has(c)||[].forEach.call(c.children,f=>{if(ot(f)!=="script")if(u.has(f))h(f);else{const F=r?f.getAttribute(r):null,y=F!==null&&F!=="false",R=ze(r),N=(R.get(f)||0)+1,I=(d.get(f)||0)+1;R.set(f,N),d.set(f,I),g.push(f),N===1&&y&&fe.add(f),I===1&&f.setAttribute(s,""),!y&&r&&f.setAttribute(r,r==="inert"?"":"true")}})}return Se+=1,()=>{g.forEach(c=>{const f=ze(r),y=(f.get(c)||0)-1,R=(d.get(c)||0)-1;f.set(c,y),d.set(c,R),y||(!fe.has(c)&&r&&c.removeAttribute(r),fe.delete(c)),R||c.removeAttribute(s)}),Se-=1,Se||(ne.inert=new WeakMap,ne["aria-hidden"]=new WeakMap,ne.none=new WeakMap,fe=new WeakSet,pe={})}}function rn(e,t=!1,n=!1){const o=$(e[0]).body;return on(e.concat(Array.from(o.querySelectorAll("[aria-live]"))),o,t,n)}function sn(e,t){const n=he(e.target);return e instanceof n.KeyboardEvent?"keyboard":e instanceof n.FocusEvent?t||"keyboard":"pointerType"in e?e.pointerType||"keyboard":"touches"in e?"touch":e instanceof n.MouseEvent?t||(e.detail===0?"keyboard":"mouse"):""}const Je=20;let Y=[];function Pe(){Y=Y.filter(e=>e.isConnected)}function an(e){Pe(),e&&ot(e)!=="body"&&(Y.push(e),Y.length>Je&&(Y=Y.slice(-Je)))}function Te(){return Pe(),Y[Y.length-1]}function ln(e){if(!e)return null;const t=Ie();return lt(e,t)?e:at(e,t)[0]||e}function Qe(e,t){if(!t.current.includes("floating")&&!e.getAttribute("role")?.includes("dialog"))return;const n=Ie(),s=Pt(e,n).filter(l=>{const u=l.getAttribute("data-tabindex")||"";return lt(l,n)||l.hasAttribute("data-tabindex")&&!u.startsWith("-")}),r=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?r!=="0"&&e.setAttribute("tabindex","0"):(r!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}function cn(e){const{context:t,children:n,disabled:o=!1,order:s=["content"],initialFocus:r=!0,returnFocus:l=!0,restoreFocus:u=!1,modal:a=!0,closeOnFocusOut:g=!0,openInteractionType:d="",getInsideElements:k=()=>[],nextFocusableElement:h,previousFocusableElement:c,beforeContentFocusGuardRef:f,externalTree:F}=e,{open:y,onOpenChange:R,events:N,dataRef:I,elements:{domReference:x,floating:C,triggers:q}}=t,D=X(()=>I.current.floatingContext?.nodeId),j=X(k),_=r===!1,A=We(x)&&_,L=de(s),oe=de(r),J=de(l),ie=de(d),V=St(F),v=Tt(),Q=i.useRef(null),Z=i.useRef(null),H=i.useRef(!1),ye=i.useRef(!1),Fe=i.useRef(-1),Me=i.useRef(""),xe=i.useRef(""),De=_e(),Ne=_e(),Le=Bt(),Ce=v!=null,b=ke(C),U=X((m=b)=>m?at(m,Ie()):[]),re=X(m=>{const E=U(m);return L.current.map(()=>E).filter(Boolean).flat()});i.useEffect(()=>{if(o||!a)return;function m(O){O.key==="Tab"&&B(b,ae($(b)))&&U().length===0&&!A&&zt(O)}const E=$(b);return E.addEventListener("keydown",m),()=>{E.removeEventListener("keydown",m)}},[o,x,b,a,L,A,U,re]),i.useEffect(()=>{if(o||!C)return;function m(E){const O=ge(E),M=U().indexOf(O);M!==-1&&(Fe.current=M)}return C.addEventListener("focusin",m),()=>{C.removeEventListener("focusin",m)}},[o,C,U]),i.useEffect(()=>{if(o||!y)return;const m=$(b);function E(T){xe.current=T.pointerType||"keyboard"}function O(){xe.current="keyboard"}return m.addEventListener("pointerdown",E,!0),m.addEventListener("keydown",O,!0),()=>{m.removeEventListener("pointerdown",E,!0),m.removeEventListener("keydown",O,!0)}},[o,C,x,b,y]),i.useEffect(()=>{if(o||!g)return;function m(){ye.current=!0,Ne.start(0,()=>{ye.current=!1})}function E(p){const S=p.relatedTarget,ee=p.currentTarget,W=ge(p);queueMicrotask(()=>{const ce=D(),bt=!(B(x,S)||B(C,S)||B(S,C)||B(v?.portalNode,S)||q?.some(G=>B(G,S))||S?.hasAttribute(He("focus-guard"))||V&&($e(V.nodesRef.current,ce).find(G=>B(G.context?.elements.floating,S)||B(G.context?.elements.domReference,S))||Ge(V.nodesRef.current,ce).find(G=>[G.context?.elements.floating,ke(G.context?.elements.floating)].includes(S)||G.context?.elements.domReference===S)));if(ee===x&&b&&Qe(b,L),u&&ee!==x&&!W?.isConnected&&ae($(b))===$(b).body){if(se(b)&&(b.focus(),u==="popup")){Le.request(()=>{b.focus()});return}const G=Fe.current,Re=U(),qe=Re[G]||Re[Re.length-1]||b;se(qe)&&qe.focus()}if(I.current.insideReactTree){I.current.insideReactTree=!1;return}(A||!a)&&S&&bt&&(A||S!==Te())&&(H.current=!0,R(!1,Oe(Gt,p)))})}function O(){I.current.insideReactTree=!0,De.start(0,()=>{I.current.insideReactTree=!1})}const T=se(x)?x:null,M=[];if(!(!C&&!T))return T&&(T.addEventListener("focusout",E),T.addEventListener("pointerdown",m),M.push(()=>{T.removeEventListener("focusout",E),T.removeEventListener("pointerdown",m)})),C&&(C.addEventListener("focusout",E),v&&(C.addEventListener("focusout",O,!0),M.push(()=>{C.removeEventListener("focusout",O,!0)})),M.push(()=>{C.removeEventListener("focusout",E)})),()=>{M.forEach(p=>{p()})}},[o,x,C,b,a,V,v,R,g,u,U,A,D,L,I,De,Ne,Le,q]);const Ae=i.useRef(null),Ve=i.useRef(null),mt=je(Ae,f,v?.beforeInsideRef),gt=je(Ve,v?.afterInsideRef);i.useEffect(()=>{if(o||!C||!y)return;const m=Array.from(v?.portalNode?.querySelectorAll(`[${He("portal")}]`)||[]),O=(V?Ge(V.nodesRef.current,D()):[]).find(p=>We(p.context?.elements.domReference||null))?.context?.elements.domReference,T=[C,O,...m,...j(),Q.current,Z.current,Ae.current,Ve.current,v?.beforeOutsideRef.current,v?.afterOutsideRef.current,te(c),te(h),A?x:null].filter(p=>p!=null),M=rn(T,a||A);return()=>{M()}},[y,o,x,C,a,L,v,A,V,D,j,h,c]),K(()=>{if(!y||o||!se(b))return;const m=$(b),E=ae(m);queueMicrotask(()=>{const O=re(b),T=oe.current,M=typeof T=="function"?T(ie.current||""):T;if(M===void 0||M===!1)return;let p;M===!0||M===null?p=O[0]||b:p=te(M),p=p||O[0]||b,!B(b,E)&&Ee(p,{preventScroll:p===b})})},[o,y,b,_,re,oe,ie]),K(()=>{if(o||!b)return;const m=$(b),E=ae(m);an(E);function O(p){if(p.open||(Me.current=sn(p.nativeEvent,xe.current)),p.reason===_t&&p.nativeEvent.type==="mouseleave"&&(H.current=!0),p.reason===Ht)if(p.nested)H.current=!1;else if(Xt(p.nativeEvent)||Kt(p.nativeEvent))H.current=!1;else{let S=!1;document.createElement("div").focus({get preventScroll(){return S=!0,!1}}),S?H.current=!1:H.current=!0}}N.on("openchange",O);const T=m.createElement("span");T.setAttribute("tabindex","-1"),T.setAttribute("aria-hidden","true"),Object.assign(T.style,kt),Ce&&x&&x.insertAdjacentElement("afterend",T);function M(){const p=J.current;let S=typeof p=="function"?p(Me.current):p;if(S===void 0||S===!1)return null;if(S===null&&(S=!0),typeof S=="boolean"){const W=x||Te();return W&&W.isConnected?W:T}const ee=x||Te()||T;return te(S)||ee}return()=>{N.off("openchange",O);const p=ae(m),S=B(C,p)||V&&$e(V.nodesRef.current,D(),!1).some(W=>B(W.context?.elements.floating,p)),ee=M();queueMicrotask(()=>{const W=ln(ee),ce=typeof J.current!="boolean";J.current&&!H.current&&se(W)&&(!(!ce&&W!==p&&p!==m.body)||S)&&W.focus({preventScroll:!0}),T.remove()})}},[o,C,b,J,I,N,V,Ce,x,D]),i.useEffect(()=>{queueMicrotask(()=>{H.current=!1})},[o]),i.useEffect(()=>{if(o||!y)return;function m(O){ge(O)?.closest(`[${Ot}]`)&&(ye.current=!0)}const E=$(b);return E.addEventListener("pointerdown",m,!0),()=>{E.removeEventListener("pointerdown",m,!0)}},[o,y,b]),K(()=>{if(!o&&v)return v.setFocusManagerState({modal:a,closeOnFocusOut:g,open:y,onOpenChange:R,domReference:x}),()=>{v.setFocusManagerState(null)}},[o,v,a,y,R,g,x]),K(()=>{if(!(o||!b))return Qe(b,L),()=>{queueMicrotask(Pe)}},[o,b,L]);const Be=!o&&(a?!A:!0)&&(Ce||a);return P.jsxs(i.Fragment,{children:[Be&&P.jsx(Ye,{"data-type":"inside",ref:mt,onFocus:m=>{if(a){const E=re();Ee(E[E.length-1])}else v?.portalNode&&(H.current=!1,Ue(m,v.portalNode)?wt(x)?.focus():te(c??v.beforeOutsideRef)?.focus())}}),n,Be&&P.jsx(Ye,{"data-type":"inside",ref:gt,onFocus:m=>{a?Ee(re()[0]):v?.portalNode&&(g&&(H.current=!0),Ue(m,v.portalNode)?It(x)?.focus():te(h??v.afterOutsideRef)?.focus())}})]})}const un=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function dn(e,t={}){const{open:n,elements:o,floatingId:s}=e,{enabled:r=!0,role:l="dialog"}=t,u=Ct(),a=o.domReference?.id||u,g=i.useMemo(()=>ke(o.floating)?.id||s,[o.floating,s]),d=un.get(l)??l,h=Ft()!=null,c=i.useMemo(()=>d==="tooltip"||l==="label"?me:{"aria-haspopup":d==="alertdialog"?"dialog":d,"aria-expanded":"false",...d==="listbox"&&{role:"combobox"},...d==="menu"&&h&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[d,h,l]),f=i.useMemo(()=>d==="tooltip"||l==="label"?{[`aria-${l==="label"?"labelledby":"describedby"}`]:n?g:void 0}:{...c,"aria-expanded":n?"true":"false","aria-controls":n?g:void 0,...d==="menu"&&{id:a}},[d,g,n,a,l,c]),F=i.useMemo(()=>{const R={id:g,...d&&{role:d}};return d==="tooltip"||l==="label"?R:{...R,...d==="menu"&&{"aria-labelledby":a}}},[d,g,a,l]),y=i.useCallback(({active:R,selected:N})=>{const I={role:"option",...R&&{id:`${g}-fui-option`}};switch(l){case"select":case"combobox":return{...I,"aria-selected":N}}return{}},[g,l]);return i.useMemo(()=>r?{reference:f,floating:F,item:y,trigger:c}:{},[r,f,F,c,y])}let fn=(function(e){return e.nestedDialogs="--nested-dialogs",e})({}),pn=(function(e){return e[e.open=ue.open]="open",e[e.closed=ue.closed]="closed",e[e.startingStyle=ue.startingStyle]="startingStyle",e[e.endingStyle=ue.endingStyle]="endingStyle",e.nested="data-nested",e.nestedDialogOpen="data-nested-dialog-open",e})({});const pt=i.createContext(void 0);function mn(){const e=i.useContext(pt);if(e===void 0)throw new Error(nt(26));return e}const gn={...st,...it,nestedDialogOpen(e){return e?{[pn.nestedDialogOpen]:""}:null}},bn=i.forwardRef(function(t,n){const{className:o,finalFocus:s,initialFocus:r,render:l,...u}=t,{store:a}=z(),g=a.useState("descriptionElementId"),d=a.useState("disablePointerDismissal"),k=a.useState("floatingRootContext"),h=a.useState("popupProps"),c=a.useState("modal"),f=a.useState("mounted"),F=a.useState("nested"),y=a.useState("nestedOpenDialogCount"),R=a.useState("open"),N=a.useState("openMethod"),I=a.useState("titleElementId"),x=a.useState("transitionStatus"),C=a.useState("role");mn(),ct({open:R,ref:a.context.popupRef,onComplete(){R&&a.context.onOpenChangeComplete?.(!0)}});function q(L){return L==="touch"?a.context.popupRef.current:!0}const D=r===void 0?q:r,j=y>0,_=i.useMemo(()=>({open:R,nested:F,transitionStatus:x,nestedDialogOpen:j}),[R,F,x,j]),A=le("div",t,{state:_,props:[h,{"aria-labelledby":I??void 0,"aria-describedby":g??void 0,role:C,tabIndex:-1,hidden:!f,onKeyDown(L){Ut.has(L.key)&&L.stopPropagation()},style:{[fn.nestedDialogs]:y}},u],ref:[n,a.context.popupRef,a.useStateSetter("popupElement")],stateAttributesMapping:gn});return P.jsx(cn,{context:k,openInteractionType:N,disabled:!f,closeOnFocusOut:!d,initialFocus:D,returnFocus:s,modal:c!==!1,restoreFocus:"popup",children:A})}),hn=i.forwardRef(function(t,n){const{cutout:o,...s}=t;let r;if(o){const l=o?.getBoundingClientRect();r=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${l.left}px ${l.top}px,
      ${l.left}px ${l.bottom}px,
      ${l.right}px ${l.bottom}px,
      ${l.right}px ${l.top}px,
      ${l.left}px ${l.top}px
    )`}return P.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...s,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:r}})}),vn=i.forwardRef(function(t,n){const{keepMounted:o=!1,...s}=t,{store:r}=z(),l=r.useState("mounted"),u=r.useState("modal");return l||o?P.jsx(pt.Provider,{value:o,children:P.jsxs(Mt,{ref:n,...s,children:[l&&u===!0&&P.jsx(hn,{ref:r.context.internalBackdropRef,inert:Yt(!open)}),t.children]})}):null});let Ze={},et={},tt="";function yn(e){if(typeof document>"u")return!1;const t=ve(e);return he(t).innerWidth-t.documentElement.clientWidth>0}function xn(e){const t=ve(e),n=t.documentElement,o=t.body,s=rt(n)?n:o,r=s.style.overflow;return s.style.overflow="hidden",()=>{s.style.overflow=r}}function Cn(e){const t=ve(e),n=t.documentElement,o=t.body,s=he(n);let r=0,l=0;const u=qt.create(),a=typeof CSS<"u"&&CSS.supports?.("scrollbar-gutter","stable");if(Et&&(s.visualViewport?.scale??1)!==1)return()=>{};function g(){const h=s.getComputedStyle(n),c=s.getComputedStyle(o),y=(h.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";r=n.scrollTop,l=n.scrollLeft,Ze={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},tt=n.style.scrollBehavior,et={position:o.style.position,height:o.style.height,width:o.style.width,boxSizing:o.style.boxSizing,overflowY:o.style.overflowY,overflowX:o.style.overflowX,scrollBehavior:o.style.scrollBehavior};const R=n.scrollHeight>n.clientHeight,N=n.scrollWidth>n.clientWidth,I=h.overflowY==="scroll"||c.overflowY==="scroll",x=h.overflowX==="scroll"||c.overflowX==="scroll",C=Math.max(0,s.innerWidth-n.clientWidth),q=Math.max(0,s.innerHeight-n.clientHeight),D=parseFloat(c.marginTop)+parseFloat(c.marginBottom),j=parseFloat(c.marginLeft)+parseFloat(c.marginRight),_=rt(n)?n:o;if(a){n.style.scrollbarGutter=y,_.style.overflowY="hidden",_.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:y,overflowY:"hidden",overflowX:"hidden"}),(R||I)&&(n.style.overflowY="scroll"),(N||x)&&(n.style.overflowX="scroll"),Object.assign(o.style,{position:"relative",height:D||q?`calc(100dvh - ${D+q}px)`:"100dvh",width:j||C?`calc(100vw - ${j+C}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),o.scrollTop=r,o.scrollLeft=l,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function d(){Object.assign(n.style,Ze),Object.assign(o.style,et),a||(n.scrollTop=r,n.scrollLeft=l,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=tt)}function k(){d(),u.request(g)}return g(),s.addEventListener("resize",k),()=>{u.cancel(),d(),s.removeEventListener&&s.removeEventListener("resize",k)}}class Rn{lockCount=0;restore=null;timeoutLock=Xe.create();timeoutUnlock=Xe.create();acquire(t){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(t)),this.release}release=()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)};unlock=()=>{this.lockCount===0&&this.restore&&(this.restore?.(),this.restore=null)};lock(t){if(this.lockCount===0||this.restore!==null)return;const o=ve(t).documentElement,s=he(o).getComputedStyle(o).overflowY;if(s==="hidden"||s==="clip"){this.restore=yt;return}const r=Rt||!yn(t);this.restore=r?xn(t):Cn(t)}}const En=new Rn;function Sn(e=!0,t=null){K(()=>{if(e)return En.acquire(t)},[e,t])}function Tn(e){const t=i.useRef(""),n=i.useCallback(s=>{s.defaultPrevented||(t.current=s.pointerType,e(s,s.pointerType))},[e]);return{onClick:i.useCallback(s=>{if(s.detail===0){e(s,"keyboard");return}"pointerType"in s&&e(s,s.pointerType),e(s,t.current),t.current=""},[e]),onPointerDown:n}}function kn(e){const[t,n]=i.useState(null),o=X((u,a)=>{e||n(a)}),s=i.useCallback(()=>{n(null)},[]),{onClick:r,onPointerDown:l}=Tn(o);return i.useMemo(()=>({openMethod:t,reset:s,triggerProps:{onClick:r,onPointerDown:l}}),[t,s,r,l])}function wn(e){const{store:t,parentContext:n,actionsRef:o,triggerIdProp:s}=e,r=t.useState("open"),l=t.useState("disablePointerDismissal"),u=t.useState("modal"),a=t.useState("activeTriggerElement"),g=t.useState("popupElement"),d=t.useState("triggers"),k=t.useState("activeTriggerId"),{mounted:h,setMounted:c,transitionStatus:f}=jt(r);let F=null;h===!0&&s===void 0&&d.size===1?F=d.keys().next().value||null:F=k??null,K(()=>{t.set("mounted",h),h||(t.set("activeTriggerId",null),t.set("payload",void 0))},[t,h]),K(()=>{r&&t.set("activeTriggerId",F)},[t,F,r]);const{openMethod:y,triggerProps:R,reset:N}=kn(r),I=X(()=>{c(!1),t.update({open:!1,mounted:!1,activeTriggerId:null}),t.context.onOpenChangeComplete?.(!1),N()}),x=X(v=>{const Q=Oe(v);return Q.preventUnmountOnClose=()=>{t.context.preventUnmountingOnCloseRef.current=!0},Q}),C=i.useCallback(()=>{t.setOpen(!1,x($t))},[t,x]);ct({enabled:!t.context.preventUnmountingOnCloseRef.current,open:r,ref:t.context.popupRef,onComplete(){r||I()}}),i.useImperativeHandle(o,()=>({unmount:I,close:C}),[I,C]);const q=Dt({elements:{reference:a,floating:g,triggers:Array.from(d.values())},open:r,onOpenChange:t.setOpen,noEmit:!0}),[D,j]=i.useState(0),_=D===0,A=dn(q),L=Nt(q,{outsidePressEvent(){return t.context.internalBackdropRef.current||t.context.backdropRef.current?"intentional":{mouse:u==="trap-focus"?"sloppy":"intentional",touch:"sloppy"}},outsidePress(v){if("button"in v&&v.button!==0||"touches"in v&&v.touches.length!==1)return!1;const Q=ge(v);if(_&&!l){const Z=Q;return u&&(t.context.internalBackdropRef.current||t.context.backdropRef.current)?t.context.internalBackdropRef.current===Z||t.context.backdropRef.current===Z||B(Z,g)&&!Z?.hasAttribute("data-base-ui-portal"):!0}return!1},escapeKey:_});Sn(r&&u===!0,g);const{getReferenceProps:oe,getFloatingProps:J,getTriggerProps:ie}=Lt([A,L]);t.useContextCallback("onNestedDialogOpen",v=>{j(v+1)}),t.useContextCallback("onNestedDialogClose",()=>{j(0)}),i.useEffect(()=>(n?.onNestedDialogOpen&&r&&n.onNestedDialogOpen(D),n?.onNestedDialogClose&&!r&&n.onNestedDialogClose(),()=>{n?.onNestedDialogClose&&r&&n.onNestedDialogClose()}),[r,n,D]);const V=i.useMemo(()=>oe(R),[oe,R]);t.useSyncedValues({openMethod:y,transitionStatus:f,activeTriggerProps:V,inactiveTriggerProps:ie(R),popupProps:J(),floatingRootContext:q,nestedOpenDialogCount:D})}const In={open:w(e=>e.open),modal:w(e=>e.modal),nested:w(e=>e.nested),nestedOpenDialogCount:w(e=>e.nestedOpenDialogCount),disablePointerDismissal:w(e=>e.disablePointerDismissal),openMethod:w(e=>e.openMethod),descriptionElementId:w(e=>e.descriptionElementId),titleElementId:w(e=>e.titleElementId),mounted:w(e=>e.mounted),transitionStatus:w(e=>e.transitionStatus),popupProps:w(e=>e.popupProps),floatingRootContext:w(e=>e.floatingRootContext),activeTriggerId:w(e=>e.activeTriggerId),activeTriggerElement:w(e=>e.mounted&&e.activeTriggerId!=null?e.triggers.get(e.activeTriggerId)??null:null),triggers:w(e=>e.triggers),popupElement:w(e=>e.popupElement),viewportElement:w(e=>e.viewportElement),payload:w(e=>e.payload),activeTriggerProps:w(e=>e.activeTriggerProps),inactiveTriggerProps:w(e=>e.inactiveTriggerProps),role:w(e=>e.role)};class On extends At{constructor(t){super(Pn(t),{popupRef:i.createRef(),backdropRef:i.createRef(),internalBackdropRef:i.createRef(),preventUnmountingOnCloseRef:{current:!1}},In)}setOpen=(t,n)=>{if(n.preventUnmountOnClose=()=>{this.context.preventUnmountingOnCloseRef.current=!0},!t&&n.trigger==null&&this.state.activeTriggerId!=null&&(n.trigger=this.state.triggers.get(this.state.activeTriggerId)),this.context.onOpenChange?.(t,n),n.isCanceled)return;const o={open:t,nativeEvent:n.event,reason:n.reason,nested:this.state.nested};this.state.floatingRootContext.events?.emit("openchange",o),this.set("open",t);const s=n.trigger?.id??null;(s||t)&&this.set("activeTriggerId",s)}}function Pn(e={}){return{disablePointerDismissal:!1,modal:!0,open:!1,nested:!1,popupElement:null,viewportElement:null,activeTriggerId:null,descriptionElementId:void 0,titleElementId:void 0,openMethod:null,mounted:!1,transitionStatus:"idle",nestedOpenDialogCount:0,triggers:new Map,floatingRootContext:Vt(),payload:void 0,activeTriggerProps:me,inactiveTriggerProps:me,popupProps:me,role:"dialog",...e}}function Fn(e){const{children:t,open:n,defaultOpen:o=!1,onOpenChange:s,onOpenChangeComplete:r,disablePointerDismissal:l=!1,modal:u=!0,actionsRef:a,handle:g,triggerId:d,defaultTriggerId:k=null}=e,h=z(!0),c=!!h,f=xt(()=>g?.store??new On).current;f.useControlledProp("open",n,o),f.useControlledProp("activeTriggerId",d,k),f.useSyncedValues({disablePointerDismissal:l,nested:c,modal:u}),f.useContextCallback("onOpenChange",s),f.useContextCallback("onOpenChangeComplete",r);const F=f.useState("payload");wn({store:f,actionsRef:a,parentContext:h?.store.context,triggerIdProp:d});const y=i.useMemo(()=>({store:f}),[f]);return P.jsx(dt.Provider,{value:y,children:typeof t=="function"?t({payload:F}):t})}const Mn=i.forwardRef(function(t,n){const{render:o,className:s,id:r,...l}=t,{store:u}=z(),a=ut(r);return u.useSyncedValueWithCleanup("titleElementId",a),le("h2",t,{ref:n,props:[{id:a},l]})}),be=i.forwardRef(({title:e,onBackdropClick:t,subTitle:n,dismissible:o=!1,open:s=!1,onOpenChange:r,className:l,style:u,children:a,alertDialog:g,closeIconAriaLabel:d},k)=>P.jsx(Fn,{open:s,onOpenChange:r,children:P.jsxs(vn,{children:[P.jsx(Zt,{className:"flx-modal-overlay-container",children:P.jsx("div",{onClick:()=>{t?.()},className:"flx-modal-overlay-backdrop"})}),P.jsxs(bn,{ref:k,className:ht([l,"flx-modal"]),style:u,children:[o&&P.jsx(en,{render:P.jsx(vt,{name:"cross",className:"flx-modal-close",onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&r?.(!1)},"aria-label":d})}),e||n?P.jsxs("div",{className:"flx-modal-header",children:[e?P.jsx(Mn,{className:"flx-modal-title",children:e}):null,n?P.jsx(tn,{className:"flx-modal-subtitle",children:n}):null]}):null,P.jsx("div",{className:"flx-modal-content",children:a})]}),g]})}));be.displayName="FlxModal";const we=i.memo(be);we.displayName="MemoFlxModal";try{be.displayName="FlxModal",be.__docgenInfo={description:"",displayName:"FlxModal",props:{title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},dismissible:{defaultValue:{value:"false"},description:"",name:"dismissible",required:!1,type:{name:"boolean | undefined"}},onOpenChange:{defaultValue:null,description:"",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void) | undefined"}},onBackdropClick:{defaultValue:null,description:"",name:"onBackdropClick",required:!1,type:{name:"(() => void) | undefined"}},alertDialog:{defaultValue:null,description:"",name:"alertDialog",required:!1,type:{name:"ReactNode"}},closeIconAriaLabel:{defaultValue:null,description:"",name:"closeIconAriaLabel",required:!1,type:{name:"string | undefined"}},className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: DialogPopupState) => string | undefined) | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, DialogPopupState> | undefined"}}}}}catch{}try{we.displayName="MemoFlxModal",we.__docgenInfo={description:"",displayName:"MemoFlxModal",props:{className:{defaultValue:null,description:`CSS class applied to the element, or a function that
returns a class based on the component’s state.`,name:"className",required:!1,type:{name:"string | ((state: DialogPopupState) => string | undefined) | undefined"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string | undefined"}},render:{defaultValue:null,description:`Allows you to replace the component’s HTML element
with a different tag, or compose it with another component.

Accepts a \`ReactElement\` or a function that returns the element to render.`,name:"render",required:!1,type:{name:"ReactElement<Record<string, unknown>, string | JSXElementConstructor<any>> | ComponentRenderFn<HTMLProps<any>, DialogPopupState> | undefined"}},onOpenChange:{defaultValue:null,description:"",name:"onOpenChange",required:!1,type:{name:"((open: boolean) => void) | undefined"}},subTitle:{defaultValue:null,description:"",name:"subTitle",required:!1,type:{name:"string | undefined"}},closeIconAriaLabel:{defaultValue:null,description:"",name:"closeIconAriaLabel",required:!1,type:{name:"string | undefined"}},onBackdropClick:{defaultValue:null,description:"",name:"onBackdropClick",required:!1,type:{name:"(() => void) | undefined"}},dismissible:{defaultValue:{value:"false"},description:"",name:"dismissible",required:!1,type:{name:"boolean | undefined"}},alertDialog:{defaultValue:null,description:"",name:"alertDialog",required:!1,type:{name:"ReactNode"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined"}}}}}catch{}export{be as F,we as M};
