import{j as f}from"./jsx-runtime-NtR90vs_.js";import{c as ze}from"./clsx-B-dksMZM.js";import{r as t}from"./iframe-DMgJMfTy.js";import{l as Ue}from"./lodash-CmQLOLUV.js";import{M as de}from"./Icon-BPlfcXXP.js";import{M as me}from"./Button-BXeyTgse.js";import{e as fe,f as Ve,o as Ge,g as Ke}from"./owner-CwWlm1ZE.js";import{i as Je}from"./inertValue-heD8jRfE.js";import{b as We,u as ae,c as he}from"./floating-ui.utils.dom-BiKb4_oH.js";import{f as xe,b as Y}from"./useRenderElement-BDAcc6QV.js";import{u as Qe,t as Ze}from"./useOpenChangeComplete-CKh5LlvE.js";import{a as ye}from"./useButton-By0iWj5u.js";import"./index-BuszbRwq.js";import"./index-z-sgVaVj.js";const et=t.createContext(void 0);function Te(){const e=t.useContext(et);if(!e)throw new Error(xe(73));return e}const ve=t.createContext(void 0);function O(){const e=t.useContext(ve);if(!e)throw new Error(xe(66));return e}let _=(function(e){return e.index="--toast-index",e.offsetY="--toast-offset-y",e.height="--toast-height",e.swipeMovementX="--toast-swipe-movement-x",e.swipeMovementY="--toast-swipe-movement-y",e})({});const tt={...Ze,swipeDirection(e){return e?{"data-swipe-direction":e}:null}},k=40,nt=10,I=.5,st=1;function pe(e,l,p){switch(e){case"up":return-p;case"down":return p;case"left":return-l;case"right":return l;default:return 0}}function ot(e){const p=window.getComputedStyle(e).transform;let o=0,D=0,h=1;if(p&&p!=="none"){const u=p.match(/matrix(?:3d)?\(([^)]+)\)/);if(u){const a=u[1].split(", ").map(parseFloat);a.length===6?(o=a[4],D=a[5],h=Math.sqrt(a[0]*a[0]+a[1]*a[1])):a.length===16&&(o=a[12],D=a[13],h=a[0])}}return{x:o,y:D,scale:h}}const rt=t.forwardRef(function(l,p){const{toast:o,render:D,className:h,swipeDirection:u=["down","right"],...a}=l,d=o.positionerProps?.anchor!==void 0;let s=[];d||(s=Array.isArray(u)?u:[u]);const i=s.length>0,{toasts:c,focused:x,close:R,remove:b,setToasts:we,pauseTimers:Ce,expanded:B,setHovering:Me}=Te(),[ce,j]=t.useState(void 0),[P,le]=t.useState(!1),[De,G]=t.useState(!1),[Re,Se]=t.useState(!1),[E,H]=t.useState({x:0,y:0}),[v,be]=t.useState({x:0,y:0,scale:1}),[K,Ee]=t.useState(),[J,Ie]=t.useState(),[A,W]=t.useState(null),y=t.useRef(null),F=t.useRef({x:0,y:0}),Q=t.useRef({x:0,y:0,scale:1}),X=t.useRef(void 0),Z=t.useRef(0),$=t.useRef(!1),w=t.useRef({x:0,y:0}),ee=t.useRef(!1),te=t.useMemo(()=>c.indexOf(o),[o,c]),ne=t.useMemo(()=>c.filter(n=>n.transitionStatus!=="ending").indexOf(o),[o,c]),Pe=t.useMemo(()=>c.slice(0,c.indexOf(o)).reduce((n,r)=>n+(r.height||0),0),[c,o]);Qe({open:o.transitionStatus!=="ending",ref:y,onComplete(){o.transitionStatus==="ending"&&b(o.id)}});const q=We(()=>{const n=y.current;if(!n)return;const r=n.style.height;n.style.height="auto";const m=n.offsetHeight;n.style.height=r,we(g=>g.map(T=>T.id===o.id?{...T,ref:y,height:m,transitionStatus:void 0}:T))});ae(q,[q]);function _e(n,r){let m=n,g=r;return!s.includes("left")&&!s.includes("right")?m=n>0?n**I:-(Math.abs(n)**I):(!s.includes("right")&&n>0&&(m=n**I),!s.includes("left")&&n<0&&(m=-(Math.abs(n)**I))),!s.includes("up")&&!s.includes("down")?g=r>0?r**I:-(Math.abs(r)**I):(!s.includes("down")&&r>0&&(g=r**I),!s.includes("up")&&r<0&&(g=-(Math.abs(r)**I))),{x:m,y:g}}function Ne(n){if(n.button!==0)return;n.pointerType==="touch"&&Ce();const r=Ke(n.nativeEvent);if(!(r&&r.closest('button,a,input,textarea,[role="button"],[data-swipe-ignore]'))){if($.current=!1,X.current=void 0,Z.current=0,F.current={x:n.clientX,y:n.clientY},w.current=F.current,y.current){const g=ot(y.current);Q.current=g,be(g),H({x:g.x,y:g.y})}Me(!0),le(!0),G(!1),W(null),ee.current=!0,y.current?.setPointerCapture(n.pointerId)}}function Le(n){if(!P)return;n.preventDefault(),ee.current&&(F.current={x:n.clientX,y:n.clientY},ee.current=!1);const{clientY:r,clientX:m,movementX:g,movementY:T}=n;(T<0&&r>w.current.y||T>0&&r<w.current.y)&&(w.current={x:w.current.x,y:r}),(g<0&&m>w.current.x||g>0&&m<w.current.x)&&(w.current={x:m,y:w.current.y});const C=m-F.current.x,S=r-F.current.y,Be=r-w.current.y,He=m-w.current.x;if(!De&&Math.sqrt(C*C+S*S)>=st&&(G(!0),A===null)){const U=s.includes("left")||s.includes("right"),Xe=s.includes("up")||s.includes("down");if(U&&Xe){const $e=Math.abs(C),qe=Math.abs(S);W($e>qe?"horizontal":"vertical")}}let M;if(!X.current)A==="vertical"?S>0?M="down":S<0&&(M="up"):A==="horizontal"?C>0?M="right":C<0&&(M="left"):Math.abs(C)>=Math.abs(S)?M=C>0?"right":"left":M=S>0?"down":"up",M&&s.includes(M)&&(X.current=M,Z.current=pe(M,C,S),j(M));else{const re=X.current,U=pe(re,He,Be);U>k?($.current=!1,j(re)):Z.current-U>=nt&&($.current=!0)}const z=_e(C,S);let se=Q.current.x,oe=Q.current.y;A==="horizontal"?(s.includes("left")||s.includes("right"))&&(se+=z.x):(A==="vertical"||(s.includes("left")||s.includes("right"))&&(se+=z.x),(s.includes("up")||s.includes("down"))&&(oe+=z.y)),H({x:se,y:oe})}function Oe(n){if(!P)return;if(le(!1),G(!1),W(null),y.current?.releasePointerCapture(n.pointerId),$.current){H({x:v.x,y:v.y}),j(void 0);return}let r=!1;const m=E.x-v.x,g=E.y-v.y;let T;for(const C of s){switch(C){case"right":m>k&&(r=!0,T="right");break;case"left":m<-k&&(r=!0,T="left");break;case"down":g>k&&(r=!0,T="down");break;case"up":g<-k&&(r=!0,T="up");break}if(r)break}r?(j(T),Se(!0),R(o.id)):(H({x:v.x,y:v.y}),j(void 0))}function je(n){if(n.key==="Escape"){if(!y.current||!fe(y.current,Ve(Ge(y.current))))return;R(o.id)}}t.useEffect(()=>{if(!i)return;const n=y.current;if(!n)return;function r(m){fe(n,m.target)&&m.preventDefault()}return n.addEventListener("touchmove",r,{passive:!1}),()=>{n.removeEventListener("touchmove",r)}},[i]);function Ae(){if(!P&&E.x===v.x&&E.y===v.y&&!Re)return{[_.swipeMovementX]:"0px",[_.swipeMovementY]:"0px"};const n=E.x-v.x,r=E.y-v.y;return{transition:P?"none":void 0,transform:P?`translateX(${E.x}px) translateY(${E.y}px) scale(${v.scale})`:void 0,[_.swipeMovementX]:`${n}px`,[_.swipeMovementY]:`${r}px`}}const ue=o.priority==="high",Fe={role:ue?"alertdialog":"dialog",tabIndex:0,"aria-modal":!1,"aria-labelledby":K,"aria-describedby":J,"aria-hidden":ue&&!x?!0:void 0,onPointerDown:i?Ne:void 0,onPointerMove:i?Le:void 0,onPointerUp:i?Oe:void 0,onKeyDown:je,inert:Je(o.limited),style:{...Ae(),[_.index]:o.transitionStatus==="ending"?te:ne,[_.offsetY]:`${Pe}px`,[_.height]:o.height?`${o.height}px`:void 0}},N=t.useMemo(()=>({rootRef:y,toast:o,titleId:K,setTitleId:Ee,descriptionId:J,setDescriptionId:Ie,swiping:P,swipeDirection:ce,recalculateHeight:q,index:te,visibleIndex:ne,expanded:B}),[o,K,J,P,ce,q,te,ne,B]),ke=t.useMemo(()=>({transitionStatus:o.transitionStatus,expanded:B,limited:o.limited||!1,type:o.type,swiping:N.swiping,swipeDirection:N.swipeDirection}),[B,o.transitionStatus,o.limited,o.type,N.swiping,N.swipeDirection]),Ye=Y("div",l,{ref:[p,N.rootRef],state:ke,stateAttributesMapping:tt,props:[Fe,a]});return f.jsx(ve.Provider,{value:N,children:Ye})}),it=t.forwardRef(function(l,p){const{render:o,className:D,id:h,children:u,...a}=l,{toast:d}=O(),s=u??d.description,i=!!s,c=he(h),{setDescriptionId:x}=O();ae(()=>{if(i)return x(c),()=>{x(void 0)}},[i,c,x]);const R=t.useMemo(()=>({type:d.type}),[d.type]),b=Y("p",l,{ref:p,state:R,props:{...a,id:c,children:s}});return i?b:null}),at=t.forwardRef(function(l,p){const{render:o,className:D,id:h,children:u,...a}=l,{toast:d}=O(),s=u??d.title,i=!!s,c=he(h),{setTitleId:x}=O();ae(()=>{if(i)return x(c),()=>{x(void 0)}},[i,c,x]);const R=t.useMemo(()=>({type:d.type}),[d.type]),b=Y("h2",l,{ref:p,state:R,props:{...a,id:c,children:s}});return i?b:null}),ct=t.forwardRef(function(l,p){const{render:o,className:D,disabled:h,nativeButton:u=!0,...a}=l,{close:d,expanded:s}=Te(),{toast:i}=O(),{getButtonProps:c,buttonRef:x}=ye({disabled:h,native:u}),R=t.useMemo(()=>({type:i.type}),[i.type]);return Y("button",l,{ref:[p,x],state:R,props:[{"aria-hidden":!s,onClick(){d(i.id)}},a,c]})}),lt=t.forwardRef(function(l,p){const{render:o,className:D,disabled:h,nativeButton:u=!0,...a}=l,{toast:d}=O(),s=d.actionProps?.children??a.children,i=!!s,{getButtonProps:c,buttonRef:x}=ye({disabled:h,native:u}),R=t.useMemo(()=>({type:d.type}),[d.type]),b=Y("button",l,{ref:[p,x],state:R,props:[a,d.actionProps,c,{children:s}]});return i?b:null}),ut=2e3,dt=Ue.memoize(e=>({error:3e3,warning:3e3,info:3e3,success:2e3})[e]||ut),ge=1e4,mt=50,L=({data:e,onCloseToast:l,className:p,iconComponent:o,...D})=>{const h=t.useId(),u=t.useCallback(()=>{l?.(e)},[l,e]),a=t.useCallback(i=>{i.event(),u()},[u]),d=t.useMemo(()=>{if(e?.closeInterval)return e?.closeInterval;const i=((e.title?.length||0)+(e.message?.length||0))*mt,c=dt(e.messageType);return i<c?c:i>ge?ge:i},[e.closeInterval,e.messageType,e.title,e.message]),s=t.useRef(null);return t.useEffect(()=>(s.current=setTimeout(()=>{u()},d),()=>{s.current&&clearTimeout(s.current)}),[u,d]),f.jsx(rt,{...D,role:"alert",className:ze("flx-toast-container",e.messageType,p),swipeDirection:"down",toast:{id:h,title:e.title,description:e.message,onClose:u},"data-testid":`messageType-${e.messageType}`,children:f.jsxs("div",{className:"content",children:[f.jsx("div",{className:"type-icon-container",children:o||f.jsx(de,{name:e.icon||e.messageType,className:"type-icon"})}),f.jsxs("div",{children:[e.title?f.jsx(at,{className:"title",children:e.title}):null,e.message?f.jsx(it,{className:"message",children:e.message}):null,e.action?f.jsx(lt,{render:f.jsx(me,{variant:"text",className:"action",onClick:()=>a(e.action),children:e.action?.name})}):null]}),e.hideCloseButton?null:f.jsx(ct,{render:f.jsx(me,{variant:"text",className:"close",onClick:()=>u(),children:f.jsx(de,{name:"dismiss",className:"close-icon"})})})]})})},ie=t.memo(L);ie.displayName="MemoFlxToast";try{ie.displayName="MemoFlxToast",ie.__docgenInfo={description:"",displayName:"MemoFlxToast",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"ToastData"}},onCloseToast:{defaultValue:null,description:"",name:"onCloseToast",required:!1,type:{name:"((data: ToastData) => void) | undefined"}},iconComponent:{defaultValue:null,description:"",name:"iconComponent",required:!1,type:{name:"ReactElement<FlxIconProps, string | JSXElementConstructor<any>> | null | undefined"}}}}}catch{}const bt={component:L,title:"Toast"},V={render:()=>f.jsxs(f.Fragment,{children:[f.jsx(L,{data:{messageType:"success",title:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"info",message:"Lorem ipsum dolor sit amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"warning",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet"},onCloseToast:e=>console.log("onCloseToast",e)}),f.jsx(L,{data:{messageType:"error",title:"Lorem ipsum dolor sit amet",message:"Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. "},onCloseToast:e=>console.log("onCloseToast",e)})]})};V.parameters={...V.parameters,docs:{...V.parameters?.docs,source:{originalSource:`{
  render: () => <>
      <FlxToast data={{
      messageType: 'success',
      title: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'info',
      message: 'Lorem ipsum dolor sit amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'warning',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet'
    }} onCloseToast={data => console.log('onCloseToast', data)} />

      <FlxToast data={{
      messageType: 'error',
      title: 'Lorem ipsum dolor sit amet',
      message: 'Sit dolor amet something went very very wrong. Plese try to recconect to previous screen and reload. You can try restarting your computer in order to solve your problem. Or call numbers listed in the contact page. '
    }} onCloseToast={data => console.log('onCloseToast', data)} />
    </>
}`,...V.parameters?.docs?.source}}};const Et=["Toast"];export{V as Toast,Et as __namedExportsOrder,bt as default};
