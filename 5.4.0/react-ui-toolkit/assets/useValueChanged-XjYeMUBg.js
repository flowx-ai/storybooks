import{r as C}from"./index-BuszbRwq.js";import{b as y,u as o}from"./floating-ui.utils.dom-BiKb4_oH.js";import{r as s}from"./iframe-DMgJMfTy.js";import{N as l,f as h,E as g}from"./useRenderElement-BDAcc6QV.js";let x=(function(e){return e.disabled="data-disabled",e.valid="data-valid",e.invalid="data-invalid",e.touched="data-touched",e.dirty="data-dirty",e.filled="data-filled",e.focused="data-focused",e})({});const R={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valid:null,valueMissing:!1},k={valid(e){return e===null?null:e?{[x.valid]:""}:{[x.invalid]:""}}},E=s.createContext({invalid:void 0,name:void 0,validityData:{state:R,errors:[],error:"",value:"",initialValue:null},setValidityData:l,disabled:void 0,touched:!1,setTouched:l,dirty:!1,setDirty:l,filled:!1,setFilled:l,focused:!1,setFocused:l,validate:()=>null,validationMode:"onSubmit",validationDebounceTime:0,shouldValidateOnChange:()=>!1,state:{disabled:!1,valid:null,touched:!1,dirty:!1,filled:!1,focused:!1},markedDirtyRef:{current:!1},validation:{getValidationProps:(e=g)=>e,getInputValidationProps:(e=g)=>e,inputRef:{current:null},commit:async()=>{}}});function I(e=!0){const t=s.useContext(E);if(t.setValidityData===l&&!e)throw new Error(h(28));return t}function M(e,t){return{...e,state:{...e.state,valid:!t&&e.state.valid}}}const L=s.createContext({formRef:{current:{fields:new Map}},errors:{},clearErrors:l,validationMode:"onSubmit",submitAttemptedRef:{current:!1}});function T(){return s.useContext(L)}function F(e){const{enabled:t=!0,value:i,id:n,name:f,controlRef:c,commit:m}=e,{formRef:d}=T(),{invalid:v,markedDirtyRef:b,validityData:u,setValidityData:p}=I(),r=y(e.getValue);o(()=>{if(!t)return;let a=i;a===void 0&&(a=r()),u.initialValue===null&&a!==null&&p(V=>({...V,initialValue:a}))},[t,p,i,u.initialValue,r]),o(()=>{!t||!n||d.current.fields.set(n,{getValue:r,name:f,controlRef:c,validityData:M(u,v),validate(){let a=i;a===void 0&&(a=r()),b.current=!0,C.flushSync(()=>m(a))}})},[m,c,t,d,r,n,v,b,f,u,i]),o(()=>{const a=d.current.fields;return()=>{n&&a.delete(n)}},[d,n])}const D=s.createContext({controlId:void 0,setControlId:l,labelId:void 0,setLabelId:l,messageIds:[],setMessageIds:l,labelableControlRef:{current:null},registerLabelableControlRef:null,getDescriptionProps:e=>e});function _(){return s.useContext(D)}function N(e,t){const i=s.useRef(e),n=y(t);o(()=>{i.current!==e&&n(i.current)},[e,n]),o(()=>{i.current=e},[e])}export{I as a,T as b,F as c,N as d,k as f,_ as u};
